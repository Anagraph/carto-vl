<!DOCTYPE html>
<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../hide-attribution.js"></script>
    <!-- Include CARTO GL JS -->
    <script src="../../../../dist/carto-gl.js"></script>
    <!-- Include Mapbox GL JS -->
    <script src="../../../../vendor/mapbox-gl-dev.js"></script>
    <!-- Include Mapbox GL CSS -->
    <link href='../mapbox-gl-v0.42.2.css' rel='stylesheet' />
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; height: 100%; width: 100%; }
    </style>
</head>

<body>
    <div id='map'></div>
</body>
<script>
    const map = new mapboxgl.Map({
        container: 'map',
        style: { "version": 8, "sources": {}, "layers": [] },
        center: [-20, 33],
        zoom: 2
    });

    const auth = {
        user: 'cartogl',
        apiKey: 'YOUR_API_KEY'
    };

    carto.setDefaultAuth(auth);
    const source = new carto.source.Dataset('points_0', auth);
    const s = carto.style.expressions;
    const $amount = s.property('amount');
    const style = new carto.Style({
        width: s.float(20),
        color: s.rgba(0, 0, 1, 1),
        filter: s.or(s.lte($amount, s.float(100)), s.gt($amount, s.float(299)))
    });

    const layer = new carto.Layer('myCartoLayer', source, style);
    layer.on('loaded', () => window.mapLoaded = true); // Used by screenshot testing utility
    layer.addTo(map);
</script>

</html>
