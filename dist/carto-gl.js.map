{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 96aae84992331ef75b05","webpack:///./src/core/style/expressions/expression.js","webpack:///./src/core/style/expressions/utils.js","webpack:///./src/core/style/functions.js","webpack:///./src/core/style/expressions/binary.js","webpack:///./src/core/style/expressions/unary.js","webpack:///./src/api/util.js","webpack:///./src/api/error-handling/carto-validation-error.js","webpack:///./src/core/style/expressions/property.js","webpack:///./src/core/style/expressions/aggregation.js","webpack:///./src/core/renderer.js","webpack:///./src/core/schema.js","webpack:///./src/core/style/expressions/animate.js","webpack:///./src/api/source/base.js","webpack:///./src/core/style/expressions/blend.js","webpack:///./src/core/style/expressions/float.js","webpack:///./src/core/style/expressions/floatConstant.js","webpack:///./src/core/style/expressions/category.js","webpack:///./src/core/style/expressions/belongs.js","webpack:///./src/core/style/expressions/between.js","webpack:///./src/core/style/expressions/interpolators.js","webpack:///./src/core/shaders/index.js","webpack:///./src/core/dataframe.js","webpack:///./src/client/rsys.js","webpack:///./src/core/metadata.js","webpack:///./src/api/source/base-windshaft.js","webpack:///./node_modules/process/browser.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js","webpack:///./src/api/setup/auth-service.js","webpack:///./src/api/setup/config-service.js","webpack:///./src/api/style.js","webpack:///./src/api/map.js","webpack:///./src/index.js","webpack:///./src/core/style/expressions/palettes.js","webpack:///./node_modules/cartocolor/index.js","webpack:///./node_modules/cartocolor/cartocolor.js","webpack:///./node_modules/colorbrewer/index.js","webpack:///./node_modules/colorbrewer/colorbrewer.js","webpack:///./src/core/style/expressions/buckets.js","webpack:///./src/core/style/expressions/CIELab.js","webpack:///./src/core/style/expressions/hsv.js","webpack:///./src/core/style/expressions/linear.js","webpack:///./src/core/style/expressions/near.js","webpack:///./src/core/style/expressions/now.js","webpack:///./src/core/style/expressions/ramp.js","webpack:///./src/core/style/expressions/rgba.js","webpack:///./src/core/style/expressions/opacity.js","webpack:///./src/core/style/expressions/top.js","webpack:///./src/core/style/expressions/xyz.js","webpack:///./src/core/style/expressions/zoom.js","webpack:///./src/core/style/expressions/time.js","webpack:///./src/core/style/expressions/quantiles.js","webpack:///./src/core/style/expressions/torque.js","webpack:///./src/core/style/expressions/viewportAggregation.js","webpack:///./src/core/style/expressions/ordering.js","webpack:///./src/api/source/geojson.js","webpack:///./src/core/shaders/renderer/index.js","webpack:///./src/core/shaders/renderer/point.js","webpack:///./src/core/shaders/renderer/tris.js","webpack:///./src/core/shaders/renderer/lines.js","webpack:///./src/core/shaders/styler/index.js","webpack:///./src/core/shaders/aaBlender.js","webpack:///./src/core/shaders/shader-cache.js","webpack:///./src/core/decoder.js","webpack:///./node_modules/earcut/src/earcut.js","webpack:///./src/api/error-handling/carto-error.js","webpack:///./src/api/error-handling/error-list.js","webpack:///./src/api/source/dataset.js","webpack:///./src/client/windshaft.js","webpack:///./node_modules/pbf/index.js","webpack:///./node_modules/ieee754/index.js","webpack:///./node_modules/lru-cache/index.js","webpack:///./node_modules/pseudomap/map.js","webpack:///./node_modules/pseudomap/pseudomap.js","webpack:///./node_modules/util/util.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/util/support/isBufferBrowser.js","webpack:///./node_modules/util/node_modules/inherits/inherits_browser.js","webpack:///./node_modules/yallist/yallist.js","webpack:///./src/client/windshaft-filtering.js","webpack:///./node_modules/@mapbox/vector-tile/index.js","webpack:///./node_modules/@mapbox/vector-tile/lib/vectortile.js","webpack:///./node_modules/@mapbox/point-geometry/index.js","webpack:///./src/api/source/sql.js","webpack:///./src/api/layer.js","webpack:///./src/core/style/shader-compiler.js","webpack:///./src/core/style/parser.js","webpack:///./node_modules/jsep/build/jsep.js","webpack:///./src/api/integrator/carto.js","webpack:///./src/api/integrator/mapbox-gl.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;AC7DuB;AACE;AACzB;;AAEA;AACA;AACA;AACA,+BAA+B,8BAA8B;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,WAAW;AAC1B,eAAe,WAAW;AAC1B,eAAe,WAAW;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;AC5J0B;AAC1B;;AAEA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,8BAA8B,EAAE,UAAU,EAAE,UAAU,EAAE;AACxD;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc,eAAe,cAAc,wCAAwC,cAAc,cAAc;AAC/G;AACA;AACA,uBAAuB;AACvB,qBAAqB,aAAa,sBAAsB,WAAW;AACnE;;AAEA;AACA,uBAAuB;AACvB,OAAO,eAAe,2BAA2B,mBAAmB;AACpE;;AAEA;AACA,uBAAuB;AACvB,OAAO,OAAO;AACd;;AAEA;AACA,uBAAuB;AACvB,OAAO,IAAI;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2BAA2B;AAC3B,WAAW,UAAU;AACrB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,uCAAuC,oBAAoB,qBAAqB,eAAe;AAC/F;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrHA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAE4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACkB;AAClB;AACA;;AAEA;AACc;AACC;AACD;AACA;AACA;AACC;AACD;AACA;;AAEd;AACmB;AACA;AACA;AACA;AACA;AACA;AACG;AACS;AACZ;AACS;AACX;AACG;AACF;;;AAGlB;AACc;AACA;AACA;AACA;AACC;;AAEf;AACqC;;AAErC;AACkB;AACF;;AAEK;;;AAGb;;;AAOR;;AAEoC;;AAEpC;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;;AAGQ;AACA;;;;;;;;;;;ACpOQ;AACO;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,uBAAuB;AACvB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,KAAK,EAAE;AAC3B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,KAAK,EAAE;AAC3B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,KAAK,EAAE;AAC3B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,KAAK,EAAE;AAC3B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,IAAI,EAAE;AAC7B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,uBAAuB;AACvB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,IAAI,EAAE;AAC7B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,GAAG,EAAE;AACzB;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,IAAI,EAAE;AAC1B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,GAAG,EAAE;AACzB;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,IAAI,EAAE;AAC1B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,IAAI,EAAE;AAC1B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB,EAAE,IAAI,EAAE;AAC1B;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,KAAK,EAAE;AAC9B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,EAAE,KAAK,EAAE;AAC9B;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uCAAuC,KAAK,4CAA4C,OAAO,iBAAiB,OAAO;AACvH;AACA;;AAEA,mBAAmB,aAAa;AAChC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC,KAAK,4CAA4C,OAAO,iBAAiB,OAAO;AACnH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACpdkD;AAClD;;;AAGA;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,qBAAqB;AACrB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4DAAmE,EAAE;AAAA;AAAA;;AAErE;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,qBAAqB;AACrB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,gEAAuE,EAAE;AAAA;AAAA;;AAEzE;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4DAAmE,EAAE;AAAA;AAAA;;AAErE;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,oBAAoB;AACpB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4DAAmE,EAAE;AAAA;AAAA;;AAErE;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,oBAAoB;AACpB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4DAAmE,EAAE;AAAA;AAAA;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,uBAAuB;AACvB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,gEAAuE,EAAE;AAAA;AAAA;;AAEzE;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,sBAAsB;AACtB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,4DAAmE,EAAE;AAAA;AAAA;;AAErE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA,oBAAoB;AACpB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA,yDAAgE,EAAE;AAAA;AAAA;;AAElE;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E,YAAY;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9LA;AAAA;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAUA;;;;;;;;;AC1CqB;;AAErB;AACA;AACA;AACA,YAAY,WAAW;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AAAA;AAAA;;;;;;;;;;ACfA;AACsB;;AAEtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,yCAAyC,UAAU;AACnD;AACA;AACA;AACA;AACA;AACA,sFAAsF,4BAA4B;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;AC1DA;AACA;AACmC;;AAEnC;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,6BAA6B,QAAQ,GAAG,mBAAmB,GAAG;AAC1F;AACA;AACA;AACA,uCAAuC,QAAQ,GAAG,mBAAmB;AACrE;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,gCAAgC,QAAQ,GAAG,mBAAmB;AAC9D;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;AC/CA;AACA;AACA;AACoB;;AAEpB;;AAEA;;AAEA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oGAAoG,aAAa,KAAK,UAAU;AAChI;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,eAAe;AACf;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;;;AAGA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,UAAU;AACzB,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,4BAA4B;AACvE,gDAAgD,4BAA4B;AAC5E;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,2BAA2B,iCAAiC;AAC5D;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B,QAAQ;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,eAAe,6BAA6B;;AAE5C;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,aAAa;AAChD,mCAAmC,aAAa;AAChD,KAAK;AACL,mCAAmC,aAAa;AAChD,mCAAmC,aAAa;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEQ;;;;;;;;;;ACvgBR;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;ACrCA;AAC6C;;;AAG7C;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,iBAAiB;AAC3D,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA,sEAAsE,gBAAgB;AACtF;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;AChDA;;AAEA;AACA;AACA;AACA,kCAAkC,oCAAoC;AACtE;AACA,qDAAqD,6BAA6B;AAClF;AACA,QAAQ,wBAAwB,kCAAkC,2BAA2B,GAAG,uBAAuB,KAAK,2BAA2B;AACvJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;ACpB+E;AAC/E;AACA;;AAEA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,aAAa,mCAAmC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,eAAe,uBAAuB;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,4CAA4C,SAAS,IAAI,SAAS,UAAU,WAAW;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA,6EAA6E,OAAO,oBAAoB,OAAO;AAC/G;AACA;;;;;;;;;;ACxEA;AACsB;;;AAGtB;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,iBAAiB;AAC5D,4BAA4B,gBAAgB;AAC5C;AACA;;AAEA;AACA,uEAAuE,gBAAgB;AACvF;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACzDA;AACsB;;;AAGtB;AACA;AACA;AACA,eAAe,EAAE;AACjB;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,qCAAqC,cAAc;AACnD;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACpBA;AACsB;;AAEtB;AACA;AACA,WAAW,OAAO;AAClB,aAAa,mCAAmC;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC,iBAAiB;AAC1D,0BAA0B,gBAAgB;AAC1C;AACA;AACA;AACA,qEAAqE,gBAAgB;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC3CmE;AACnE;;;AAGA;AACA;AACA;AACA;AACA,yBAAyB,mCAAmC,aAAa,MAAM,aAAa,MAAM,GAAG,iBAAiB;AACtH;;AAEA;AACA;AACA;AACA;AACA,yBAAyB,mCAAmC,aAAa,MAAM,aAAa,MAAM,GAAG,iBAAiB;AACtH;;AAEA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,kDAAkD;AAC7D,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,kDAAkD;AAC7D,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,0DAA0D,MAAM;AAChE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;AChGA;AACkD;;AAElD;AACA;AACA;AACA;AACA,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,WAAW,4CAA4C;AACvD,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,gCAAgC;AAC/C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,0CAA0C,aAAa,MAAM,kBAAkB,OAAO,aAAa,MAAM,kBAAkB;AAC3H;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACtDuB;AACvB;;AAEA;;AAEA,kFAAyF;AAAA;AAAA;AACzF;AACA,6BAA6B,MAAM;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AAAA;AAAA;AACH;AACA,+BAA+B,MAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AAAA;AAAA;;;AAGH;AACA;AACA;AACA;AACA;AACA,mBAAmB,OAAO;AAC1B;AACA;AACA;AACA;AACA,oEAAoE,YAAY;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,C;;;;;;;;;;;;;;AChFA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,2BAA2B;AAClD,sFAAsF,EAAE;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yFAA8D,OAAO;AACrE;AACA;;AAEA;AACA;AACA,yFAA8D,OAAO;AACrE;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEQ;;;;;;;;;ACjJR;AACA;AACA,iBAAiB,sDAAsD;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,mBAAmB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACrIA;AAAA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,KAAK;AAChB,YAAY,OAAO;AACnB;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;AACA;AACA,YAAY,0BAA0B,yDAAyD;AAC/F;;AAEA;AACA;AACA,WAAW,KAAK;AAChB,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,KAAK;AAChB,YAAY,MAAM,sBAAsB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,YAAY,MAAM,sBAAsB;AACxC;AACA;AACA;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,aAAa;AACrC,4BAA4B,aAAa;AACzC,wBAAwB,mBAAmB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEQ;;;;;;;;;AC1IR;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;ACzCA;AACA;AACA;AACoC;AACI;;;AAGxC,8CAA8C,KAAK;;AAEnD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,4BAA4B,KAAK;AACjC,8CAA8C,MAAM;AACpD;AACA,gCAAgC,MAAM;AACtC,gCAAgC,MAAM;AACtC;AACA;;AAEA;AACA,kEAAkE,MAAM,QAAQ,IAAI;AACpF;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;AC1DA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;ACvLtC;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;;;;;;AC5DA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,4BAA4B;AAC5B;AACA;AACA;;AAEA;;AAEA,SAAS;;AAET;AACA;AACA,2CAA2C;AAC3C;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2DAA2D,SAAS;AACpE;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxOA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEQ;;;;;;;;;;;;;;AC7ER;AACA;;;AAGA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO,8BAA8B,KAAK;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEQ;;;;;;;;;;;;;;;;;ACvDR;AACA;AACA;AACA;AACwB;AACO;AAC/B;AACuB;AACvB;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA,kCAAkC,0BAA0B;AAC5D,6BAA6B,0BAA0B,kBAAkB,yCAAyC;AAClH;AACA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,cAAc;AAC9B,gBAAgB;AAChB;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,UAAU;AACzB,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,OAAO;AAC5B,sBAAsB,OAAO;AAC7B,sBAAsB,mCAAmC;AACzD,sBAAsB,mCAAmC;AACzD,sBAAsB,mCAAmC;AACzD,sBAAsB,mCAAmC;AACzD,sBAAsB,mCAAmC;AACzD;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,IAAI;AAC9C;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;AC/UA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8CAA8C,kBAAkB;AAChE,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,uBAAuB,6BAA6B;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB;;AAEA;AACA;;AAEA;AACA;;AAEA,sCAAsC,WAAW;AACjD,uCAAuC,YAAY;AACnD;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;AC7HA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,gD;AACP,OAAO;AACP,OAAO;AACP;AACA,SAAS;AACT,MAAM;AACN,MAAM;AACN,MAAM;AACN,MAAM;AACN;;AAEA;AACA;AACA;AACA;AACA;AACA;AACyB;AACE;AAC3B;;AAEA;;AAEA,eAAe;AACf,gBAAgB;;AAUhB;;;;;;;;;;;;;;ACzCA;AACA;;AAEA;AACA;AACA;AACA,6CAA6C,kDAAkD;AAC/F,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB,mBAAmB;AACnC,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEQ;;;;;;;AChFR;;;;;;;ACAA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAY,2BAA2B;AACvC,WAAW,wBAAwB;AACnC,YAAY,2BAA2B;AACvC,WAAW,wBAAwB;AACnC,WAAW,wBAAwB;AACnC,cAAc,2BAA2B;AACzC,aAAa,wBAAwB;AACrC,eAAe,wBAAwB;AACvC,aAAa,2BAA2B;AACxC,WAAW,2BAA2B;AACtC,aAAa,2BAA2B;AACxC,aAAa;AACb;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;;AAEA,CAAC;;;;;;;ACn1DD;;;;;;;ACAA;AACA;AACA;;AAEA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA;;AAEA,CAAC;;;;;;;;;;AC1TD;AAC4C;;AAE5C;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,yCAAyC;AACtD,aAAa,qDAAqD;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,eAAe,iCAAiC;AAChD,eAAe,sCAAsC;AACrD,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+FAA+F,WAAW;AAC1G;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,mFAA2B;AACrF,iDAAiD,UAAU,sBAAsB,SAAS;AAC1F,iBAAiB;AACjB,0DAA0D,mFAA2B,8BAA8B,SAAS;AAC5H;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA,gDAAgD,MAAM;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,2FAA2F,WAAW;AACtG;AACA;AACA;AACA,sDAAsD,mFAA2B;AACjF,6CAA6C,WAAW,sBAAsB,SAAS;AACvF,aAAa;AACb,sDAAsD,mFAA2B,8BAA8B,SAAS;AACxH;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,mCAAmC,eAAe;AAClD;AACA;AACA,eAAe,wBAAwB,QAAQ,IAAI,GAAG,mBAAmB,MAAM,GAAG;AAClF,yBAAyB,MAAM;AAC/B,aAAa;AACb;AACA,iCAAiC,SAAS;AAC1C,cAAc;AACd,qBAAqB,uBAAuB;AAC5C,SAAS;;AAET;AACA;AACA,uBAAuB,SAAS,GAAG,mBAAmB;AACtD;AACA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC7IA;AACmE;;AAEnE;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC,4BAA4B,SAAS;AACrC,4BAA4B,SAAS;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC5EA;AACwC;;AAExC;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,4CAA4C;AACvE;AACA;AACA;AACA;AACA,iCAAiC,SAAS,EAAE,wBAAwB,UAAU,SAAS,EAAE,kBAAkB,kBAAkB,SAAS,EAAE,kBAAkB;AAC1J;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA,uDAAuD,cAAc,cAAc,eAAe;AAClG;AACA;;;;;;;;;;ACtDA;AACmE;;AAEnE;AACA;AACA;AACA,UAAU,iCAAiC;AAC3C,UAAU,mCAAmC;AAC7C,UAAU,mCAAmC;AAC7C,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,kBAAkB;;AAEjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,gDAAgD,aAAa,GAAG,iBAAiB,KAAK,0BAA0B;;AAEhH,SAAS;AACT;AACA;AACA;;AAEA,gDAAgD,aAAa,GAAG,WAAW,KAAK,WAAW,GAAG,WAAW;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACtEA;AAC8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA,eAAe,uEAAuE;AACtF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,aAAa,GAAG,cAAc,IAAI,iBAAiB,IAAI,eAAe;AACpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;ACzCA;AACgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,eAAe,oEAAgB;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC3BA;AAC6E;;AAE7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,mCAAmC;AACjD,cAAc,iCAAiC;AAC/C,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,eAAe;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC,8BAA8B;AAC9B,gCAAgC;AAChC;AACA,wCAAwC,UAAU,UAAU,aAAa,SAAS,UAAU,YAAY,UAAU;AAClH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B,WAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE,UAAU;AAC1E,kEAAkE,UAAU;AAC5E,sEAAsE,UAAU;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AChJA;AACkD;;AAElD;;AAEA;AACA;AACA;AACA;AACA,WAAW,sCAAsC;AACjD,WAAW,sCAAsC;AACjD,WAAW,sCAAsC;AACjD,WAAW,sCAAsC;AACjD,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,SAAS,IAAI,SAAS,IAAI,SAAS,IAAI,SAAS;AAC7F;AACA;AACA;AAAA;AAAA;;;;;;;;;;;ACrDA;AACgB;AACoB;;AAEpC;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,mCAAmC;AAC/C;AACA;AACA;AACA;AACA,wBAAwB;AACxB,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,aAAa;AAC5B;AACA;AACA;AACA;AACA;AACA,+CAA+C,UAAU,SAAS,UAAU;AAC5E;AACA;AACA;AAAA;AAAA;;;;;;;;;AC3CA;;AAEA;AACA;AACA;AACA,eAAe,qBAAqB;AACpC;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,iGAAiG,mBAAmB;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAmE,WAAW;AAC9E,6CAA6C,UAAU,SAAS,gBAAgB;AAChF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D,UAAU;AACzE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACzEA;AACuB;;;AAGvB;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,SAAS;AACrC,4BAA4B,SAAS;AACrC,4BAA4B,SAAS;AACrC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;ACzEA;AACgB;;AAEhB;AACA;AACA;AACA;AACA;AACA,eAAe,qEAAiB;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;ACnBA;AACgB;AACgC;AAChD;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,iBAAiB;AAC5C,+BAA+B,EAAE;AACjC,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA,yCAAyC,kBAAkB;AAC3D;AACA,mBAAmB,wBAAwB,UAAU,mBAAmB,MAAM,GAAG;AACjF,qBAAqB;AACrB,SAAS;AACT;AACA,qCAAqC,SAAS;AAC9C,UAAU;AACV,iBAAiB;AACjB,KAAK;AACL;AACA;AACA,2BAA2B,SAAS,GAAG,mBAAmB;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,2BAA2B,6BAA6B;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;ACnGA;AACuC;AACyB;AAChE;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,gDAAgD;AAC3D,WAAW,gDAAgD;AAC3D,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA,WAAW,kCAAkC;AAC7C;AACA;AACA,WAAW,OAAO;AAClB,WAAW,4BAA4B;AACvC,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA,8BAA8B,aAAa,GAAG,cAAc,IAAI,0BAA0B,IAAI,aAAa,GAAG,cAAc,IAAI,eAAe,IAAI,gBAAgB;AACnK;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC,0CAA0C;AAC1C;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;AC5HA;AACgB;;AAEhB;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA,mBAAmB,sEAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,aAAa;AACb,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,EAAE;AACrB;AACA;AACA;AACA;AACA;AACA,mBAAmB,sEAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB,aAAa;AACb,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,6BAA6B;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yCAAyC,gBAAgB;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AC7HA;AACwB;;AAExB;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AAAA;AAAA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;AC/BA;AACoB;AACpB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB,aAAa;AAClC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB,2BAA2B;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,kEAAkE,aAAa;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kEAAkE,aAAa;AAC/E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,uBAAuB,2BAA2B;AAClD;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,wJAAqF,WAAW,IAAI,KAAK;AACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,wFAA8C,WAAW;AACzD,uFAAsC,sEAA4B,aAAa,EAAE;AACjF;;AAEA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,yBAAyB;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;AC3VA;AACA;AACA;;;;;;;;ACFA;AAAA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA,2BAA2B,MAAM;AACjC,+BAA+B,MAAM;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;AAAA;;AAED;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,CAAC,E;;;;;;;;;;ACjID;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;AAAA;;AAED;AACA;;AAEA;;AAEA;AACA;AACA,CAAC,E;;;;;;;;;;ACnCD;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,CAAC;AAAA;AAAA;;AAED;AACA;;AAEA;;AAEA;AACA;AACA,CAAC;AAAA;AAAA;;;;;;;;ACvCD;AAAA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;ACnCA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;ACjCA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD,SAAS;AAC9D;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA,yBAAyB;AACzB,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;;AAEA,2BAA2B,2BAA2B;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0DAAgB;;;;;;;;ACtIhB;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,0EAA0E;AAC1E;AACA;AACA;;AAEA,yBAAyB,cAAc;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,SAAS;AAChC,KAAK;AACL,2BAA2B,YAAY;AACvC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC;;AAEzC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC;;AAEzC,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA,iCAAiC,+BAA+B;;AAEhE;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kDAAkD;;AAElD;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,uBAAuB,YAAY;AACnC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD,SAAS;AAC1D;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,sBAAsB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,SAAS;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,kBAAkB,yCAAyC;AAC3D;;AAEA,mBAAmB,iBAAiB;AACpC,uBAAuB,oBAAoB;AAC3C,2BAA2B,SAAS;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACzoBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,WAAW;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mDAAmD,IAAI;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEQ;;;;;;;;;AC7ER;AAAA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;;AAEQ;;;;;;;;;;;AC/IR;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,wCAAwC;AAClG;AACA;AACA,yBAAyB,oDAAoD;AAC7E;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO,6BAA6B,KAAK;AACxD;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;AC5DA;AACA;AACA;AACA;AACA;AACA;AACqB;AACrB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC,UAAU;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB,eAAe,EAAE;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA,0BAA0B,OAAO;AACjC;;AAEA;AACA;AACA;AACA,+BAA+B,iEAAiE,QAAQ,0BAA0B,oBAAoB,mDAAmD,GAAG,mFAAwC;AACpP,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB,iEAAiE,QAAQ,0BAA0B,oBAAoB,mDAAmD;AACnM;;AAEA;AACA,wHAAwH,MAAM;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA,sBAAsB,EAAE,GAAG,EAAE,GAAG,EAAE;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB;AACA,qBAAqB;AACrB,wDAAwD,KAAK;AAC7D;;AAEA,iBAAiB;AACjB;AACA;AACA;;AAEA,uBAAuB,wCAAwC;;AAE/D;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA;AACA,0CAA0C,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,gBAAgB,EAAE;AAClG;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,2BAA2B,oBAAoB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,qBAAqB;AAC5C;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb,iEAAiE,cAAc;AAC/E;;AAEA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;;AAEA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,8BAA8B;AAC9C;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA,aAAa;AACb,oDAAoD,KAAK;AACzD;AACA,SAAS;;AAET,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA,iCAAiC,wBAAwB,0BAA0B,eAAe,iBAAiB;AACnH,SAAS;AACT;AACA;AACA,qCAAqC,oBAAoB,2CAA2C,UAAU;AAC9G;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,0CAA0C,OAAO;AACjD;AACA;AACA;AACA;;AAEA;AACA,iDAAiD,MAAM,SAAS;AAChE;AACA;AACA;AACA;;AAEA;AACA,iFAAiF,MAAM,oCAAoC;AAC3H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iEAAiE,KAAK;AACtE;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,GAAG,GAAG,KAAK,OAAO,KAAK,GAAG,GAAG;AAC7D;AACA,wCAAwC,eAAe,QAAQ,OAAO;AACtE;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,KAAK;AAC1C,qCAAqC,KAAK;AAC1C,qCAAqC,KAAK;AAC1C,qCAAqC,KAAK;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA,8CAA8C,IAAI;AAClD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,GAAG,GAAG,KAAK,OAAO,KAAK,GAAG,GAAG;AAC7D;AACA,wCAAwC,YAAY,QAAQ,OAAO;AACnE;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,KAAK;AAC/D,0DAA0D,KAAK;AAC/D;AACA;AACA;AACA;;AAEA;AACA;AACA,iDAAiD,KAAK,gBAAgB,MAAM,YAAY,KAAK,wBAAwB;AACrH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AAAA;AAAA;;;AAGA;AACA;AACA,mBAAmB,qBAAqB;AACxC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,mBAAmB;AACpC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,iBAAiB,GAAG,cAAc,cAAc,wBAAwB,GAAG,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AAC5H;AACA,6BAA6B,wBAAwB,GAAG,WAAW,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;AAC/E;;AAEA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;AC9pBA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;AAChB,gBAAgB;;AAEhB;AACA;;AAEA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,4BAA4B,kBAAkB;AAC9C,4BAA4B,wBAAwB;AACpD,4BAA4B,yBAAyB;AACrD,4BAA4B,yBAAyB;AACrD,0BAA0B;;AAE1B;AACA,KAAK;;AAEL,8BAA8B;AAC9B;AACA,KAAK;;AAEL;AACA;AACA,wDAAwD;AACxD,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;;AAEvC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,+EAA+E;AAC/E,+EAA+E;AAC/E,+EAA+E;AAC/E;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,uBAAuB,SAAS;AAChC,KAAK;;AAEL;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL,6CAA6C,gDAAgD,IAAI;AACjG,6CAA6C,iDAAiD,GAAG;AACjG,6CAA6C,iDAAiD,GAAG;AACjG,6CAA6C,+CAA+C,KAAK;AACjG,6CAA6C,gDAAgD,IAAI;AACjG,6CAA6C,iDAAiD,GAAG;AACjG,6CAA6C,kDAAkD,EAAE;AACjG,6CAA6C,iDAAiD,GAAG;AACjG,6CAA6C,kDAAkD,EAAE;;AAEjG;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,sBAAsB;AAC3C,qBAAqB,sBAAsB;AAC3C,qBAAqB,uBAAuB;AAC5C,qBAAqB,uBAAuB;AAC5C,qBAAqB,uBAAuB;AAC5C,qBAAqB,uBAAuB;;AAE5C;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,2CAA2C;AAC3C,2CAA2C;AAC3C,2CAA2C;AAC3C,2CAA2C;AAC3C;AACA;;AAEA;AACA;;AAEA,mEAAmE;AACnE,mEAAmE;AACnE,mEAAmE;AACnE,mEAAmE;AACnE,mEAAmE;AACnE;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,eAAe;AAC5C;;AAEA,wCAAwC,gBAAgB,gBAAgB,8BAA8B;AACtG,wCAAwC,gBAAgB,gBAAgB,+BAA+B;AACvG,wCAAwC,gBAAgB,gBAAgB,6BAA6B;AACrG,wCAAwC,gBAAgB,gBAAgB,8BAA8B;AACtG,wCAAwC,gBAAgB,gBAAgB,+BAA+B;AACvG,wCAAwC,gBAAgB,gBAAgB,+BAA+B;AACvG,wCAAwC,gBAAgB,gBAAgB,gCAAgC;AACxG,wCAAwC,gBAAgB,gBAAgB,+BAA+B;AACvG,wCAAwC,gBAAgB,gBAAgB,gCAAgC;;AAExG;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,4BAA4B,gBAAgB;AAC5C,8BAA8B;;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACzmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;;ACnFA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe;AACf;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH,oBAAoB,iCAAiC;AACrD;AACA,CAAC;;AAED;AACA,oBAAoB,sBAAsB;AAC1C;AACA,CAAC;;AAED;AACA,oBAAoB,+BAA+B;AACnD;AACA,CAAC;;AAED;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,wCAAwC,iBAAiB;AACzD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB;AACvB;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA,WAAW;;AAEX;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,8BAA8B,QAAQ;AACtC;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACldA;AACA;AACA;;AAEA;AACA;AACA,CAAC;AACD;AACA;;;;;;;;ACRA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,GAAG;AACH,sBAAsB;AACtB;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AChHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,uBAAuB,SAAS;AAChC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,4CAA4C,KAAK;;AAEjD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;;AAGA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;ACzkBA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;ACpBA;AACA;AACA;AACA;AACA;AACA,C;;;;;;ACLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACtBA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,yCAAyC,OAAO;AAChD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA,uCAAuC,OAAO;AAC9C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;;AAEA;AACA;AACA,mDAAmD,iBAAiB;AACpE;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qCAAqC,0BAA0B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,iBAAiB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA,iBAAiB,iBAAiB;AAClC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA,+BAA+B,iBAAiB;AAChD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC,iBAAiB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC,6BAA6B;AAClE;AACA;AACA,QAAQ,2BAA2B;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,2BAA2B;AAC1E;AACA;AACA,QAAQ,6BAA6B;AACrC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,yBAAyB,iBAAiB;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;;;;;;;;ACjXc;AACI;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA,WAAW,EAAE;AACb,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,UAAU;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,WAAW,WAAW,aAAa,OAAO,aAAa;AAC1E;AACA;;AAEA;AACA;AACA,mBAAmB,WAAW,OAAO,2BAA2B,IAAI,WAAW;AAC/E;AACA;;AAEA;AACA;AACA,mBAAmB,WAAW,WAAW,2BAA2B,IAAI,WAAW;AACnF;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;AC1GA;AACA;AACA;;;;;;;;ACFA;;AAEA;;AAEA;;AAEA;AACA,6CAA6C;AAC7C;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACfA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA,WAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA,uBAAuB,kCAAkC,EAAE;;AAE3D;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,0BAA0B,6BAA6B,EAAE;;AAEzD;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,0BAA0B,6BAA6B,EAAE;;AAEzD;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,iCAAiC,qCAAqC,EAAE;;AAExE;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,iCAAiC,oCAAoC,EAAE;;AAEvE;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,0BAA0B,8BAA8B,EAAE;;AAE1D;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,0BAA0B,6BAA6B,EAAE;;AAEzD;AACA;AACA;AACA,eAAe,OAAO;AACtB,gBAAgB,MAAM;AACtB;AACA,0BAA0B,gCAAgC,EAAE;;AAE5D;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,MAAM;AACrB,gBAAgB,MAAM;AACtB;AACA,kCAAkC,wCAAwC,EAAE;;AAE5E;AACA;AACA,eAAe,cAAc;AAC7B,gBAAgB,MAAM;AACtB;AACA,0BAA0B,iCAAiC,EAAE;;AAE7D;AACA;AACA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA,yBAAyB,6BAA6B,EAAE;;AAExD;AACA;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA,yBAAyB,6BAA6B,EAAE;;AAExD;AACA;AACA;AACA,gBAAgB,MAAM;AACtB;AACA,yBAAyB,8BAA8B,EAAE;;AAEzD;AACA;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,QAAQ;AACxB;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA,eAAe,MAAM;AACrB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,gBAAgB,OAAO;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,sBAAsB;AACjC,YAAY,MAAM;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACvTA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,yBAAyB,oDAAoD;AAC7E;AACA;AACA;AACA;AACA,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO;AACtB,eAAe,OAAO,6BAA6B,KAAK;AACxD;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;ACvEA;AACA;AACA;AACA;AACA;AACA;AACA;AACgB;;;AAGhB;;AAEA;AACA;AACA;AACA;AACA,2BAA2B,+BAA+B,MAAM,wBAAwB;AACxF;AACA,aAAa,+BAA+B;AAC5C,aAAa,wBAAwB;AACrC;AACA,cAAc,OAAO;AACrB,cAAc,kBAAkB;AAChC,cAAc,YAAY;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,eAAe,kBAAkB;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,UAAU;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qEAAqE;AACrE;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,YAAY;AACnD,uCAAuC,YAAY;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe,YAAY;AAC3B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA,eAAe,aAAa;AAC5B,eAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AAAA;AAAA;;;;;;;;;ACzYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACfA;AACA;AACuB;AACvB;;AAEA;;AAEA;AACA;AACA;AACA,kBAAkB,+FAAgE,EAAE;AACpF;AACA;;AAEA;AACA;AACA,WAAW,EAAE;AACb,WAAW,EAAE;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,iBAAiB;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,cAAc;AACtE;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,cAAc;AACrE;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA,2CAA2C,qBAAqB;AAChE;;;;;;;ACtJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAe,+BAA+B;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,iCAAiC;AACjC,GAAG;AACH;AACA;AACA;AACA;AACA,wEAAwE;AACxE,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,wEAAwE;AACxE,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,iCAAiC,EAAE;AAC5D,6BAA6B,qCAAqC,EAAE;AACpE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,wDAAwD;AACxD;AACA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,2CAA2C;AAC3C;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC;AACnC;AACA;AACA,oCAAoC;AACpC;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,8BAA8B;AAC9B,gCAAgC;AAChC;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,cAAc;AACd,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,OAAO,gCAAgC;AACvC;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,+DAA+D;;AAE5F;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,EAAE;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,CAAC;;;;;;;;;;ACxqBD;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACrBA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,MAAM;AAC7C;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"carto-gl.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"carto\"] = factory();\n\telse\n\t\troot[\"carto\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 32);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 96aae84992331ef75b05","import { implicitCast } from './utils';\nimport { blend, animate } from '../functions';\nimport * as schema from '../../schema';\n\n/**\n * Abstract expression class\n *\n * All expressions listed in  {@link carto.style.expressions} inherit from this class so any of them\n * they can be used where an Expression is required as long as the types match.\n *\n * This means that you can't a numeric expression where a color expression is expected.\n *\n * @memberof carto.style.expressions\n * @name Expression\n * @api\n */\nexport default class Expression {\n    /**\n     * @hideconstructor\n     * @param {*} children\n     * @param {*} inlineMaker\n     * @param {*} preface\n     */\n    constructor(children) {\n        this.childrenNames = Object.keys(children);\n        Object.keys(children).map(name => this[name] = implicitCast(children[name]));\n        this._getChildren().map(child => child.parent = this);\n        this._metaBindings = [];\n        this.preface = '';\n    }\n\n    _bind(metadata) {\n        this._metaBindings.push(metadata);\n        this._compile(metadata);\n        return this;\n    }\n\n    _compile(metadata) {\n        this._getChildren().map(child => child._compile(metadata));\n    }\n\n    _setGenericGLSL(inlineMaker, preface) {\n        this.inlineMaker = inlineMaker;\n        this.preface = (preface ? preface : '');\n    }\n\n    /**\n     * Generate GLSL code\n     * @param {*} uniformIDMaker    fn to get unique IDs\n     * @param {*} propertyTIDMaker  fn to get property IDs and inform of used properties\n     */\n    _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n        const childSources = this.childrenNames.map(name => this[name]._applyToShaderSource(uniformIDMaker, propertyTIDMaker));\n        let childInlines = {};\n        childSources.map((source, index) => childInlines[this.childrenNames[index]] = source.inline);\n        return {\n            preface: childSources.map(s => s.preface).reduce((a, b) => a + b, '') + this.preface,\n            inline: this.inlineMaker(childInlines, uniformIDMaker, propertyTIDMaker)\n        };\n    }\n\n    /**\n     * Inform about a successful shader compilation. One-time post-compilation WebGL calls should be done here.\n     * @param {*} program\n     */\n    _postShaderCompile(program, gl) {\n        this.childrenNames.forEach(name => this[name]._postShaderCompile(program, gl));\n    }\n\n    _getDrawMetadataRequirements() {\n        // Depth First Search => reduce using union\n        return this._getChildren().map(child => child._getDrawMetadataRequirements()).reduce(schema.union, schema.IDENTITY);\n    }\n\n    /**\n     * Pre-rendering routine. Should establish the current timestamp in seconds since an arbitrary point in time as needed.\n     * @param {number} timestamp\n     */\n    _setTimestamp(timestamp) {\n        this.childrenNames.forEach(name => this[name]._setTimestamp(timestamp));\n    }\n\n    /**\n     * Pre-rendering routine. Should establish related WebGL state as needed.\n     * @param {*} l\n     */\n    _preDraw(...args) {\n        this.childrenNames.forEach(name => this[name]._preDraw(...args));\n    }\n\n    /**\n     * @jsapi\n     * @returns true if the evaluation of the function at styling time won't be the same every time.\n     */\n    isAnimated() {\n        return this._getChildren().some(child => child.isAnimated());\n    }\n\n    /**\n     * Replace child *toReplace* by *replacer*\n     * @param {*} toReplace\n     * @param {*} replacer\n     */\n    _replaceChild(toReplace, replacer) {\n        const name = this.childrenNames.find(name => this[name] == toReplace);\n        this[name] = replacer;\n        replacer.parent = this;\n        replacer.notify = toReplace.notify;\n    }\n\n    notify() {\n        this.parent.notify();\n    }\n\n    /**\n     * Linear interpolation between this and finalValue with the specified duration\n     * @jsapi\n     * @param {Expression} final\n     * @param {Expression} duration\n     * @param {Expression} blendFunc\n     */\n    //TODO blendFunc = 'linear'\n    blendTo(final, duration = 500) {\n        final = implicitCast(final);\n        const parent = this.parent;\n        const blender = blend(this, final, animate(duration));\n        this._metaBindings.map(m => blender._bind(m));\n        parent._replaceChild(this, blender);\n        blender.notify();\n        return final;\n    }\n\n    blendFrom(final, duration = 500, interpolator = null) {\n        final = implicitCast(final);\n        const parent = this.parent;\n        const blender = blend(final, this, animate(duration), interpolator);\n        this._metaBindings.map(m => blender._bind(m));\n        parent._replaceChild(this, blender);\n        blender.notify();\n    }\n\n    /**\n     * @returns a list with the expression children\n     */\n    _getChildren() {\n        return this.childrenNames.map(name => this[name]);\n    }\n\n    _getMinimumNeededSchema() {\n        // Depth First Search => reduce using union\n        return this._getChildren().map(child => child._getMinimumNeededSchema()).reduce(schema.union, schema.IDENTITY);\n    }\n    // eslint-disable-next-line no-unused-vars\n    eval(feature) {\n        throw new Error('Unimplemented');\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/expression.js\n// module id = 0\n// module chunks = 0","import { float, category } from '../functions';\nimport Expression from './expression';\n\nexport const DEFAULT = undefined;\n\n// To support literals (string and numeric) out of the box we need to cast them implicitly on constructors\nexport function implicitCast(value) {\n    if (Number.isFinite(value)) {\n        return float(value);\n    }\n    if (typeof value == 'string') {\n        return category(value);\n    }\n    return value;\n}\n\nexport function hexToRgb(hex) {\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n        r: parseInt(result[1], 16),\n        g: parseInt(result[2], 16),\n        b: parseInt(result[3], 16)\n    } : null;\n}\n\nexport function getOrdinalFromIndex(index) {\n    const indexToOrdinal = {\n        1: 'first',\n        2: 'second',\n        3: 'third',\n        4: 'fourth'\n    };\n    return indexToOrdinal[index] || String(index);\n}\n\nexport function getStringErrorPreface(expressionName, parameterName, parameterIndex) {\n    return `${expressionName}(): invalid ${getOrdinalFromIndex(parameterIndex + 1)} parameter '${parameterName}'`;\n}\nexport function throwInvalidType(expressionName, parameterName, parameterIndex, expectedType, actualType) {\n    throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\nexpected type was '${expectedType}', actual type was '${actualType}'`);\n}\n\nexport function throwInvalidInstance(expressionName, parameterName, parameterIndex, expectedClass, actualInstance) {\n    throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\n    '${actualInstance}' is not an instance of '${expectedClass.name}'`);\n}\n\nexport function throwInvalidNumber(expressionName, parameterName, parameterIndex, number) {\n    throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\n    '${number}' is not a finite number`);\n}\n\nexport function throwInvalidString(expressionName, parameterName, parameterIndex, str) {\n    throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\n    '${str}' is not a string`);\n}\n\n// Try to check the type, but accept undefined types without throwing\n// This is useful to make constructor-time checks, at constructor-time some types can be already known and errors can be throw.\n// Constructor-time is the best time to throw, but metadata is not provided yet, therefore, the checks cannot be complete,\n// they must be loose\nexport function checkLooseType(expressionName, parameterName, parameterIndex, expectedType, parameter) {\n    checkExpression(expressionName, parameterName, parameterIndex, parameter);\n    if (parameter.type !== undefined) {\n        checkType(expressionName, parameterName, parameterIndex, expectedType, parameter);\n    }\n}\n\nexport function checkExpression(expressionName, parameterName, parameterIndex, parameter) {\n    if (!(parameter instanceof Expression)) {\n        throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\n        '${parameter}' is not of type Expression`);\n    }\n}\n\nexport function checkType(expressionName, parameterName, parameterIndex, expectedType, parameter) {\n    checkExpression(expressionName, parameterName, parameterIndex, parameter);\n    if (Array.isArray(expectedType)) {\n        const ok = expectedType.some(type =>\n            parameter.type == type\n        );\n        if (!ok) {\n            throw new Error(`${getStringErrorPreface(expressionName, parameterName, parameterIndex)}\n            expected type was one of ${expectedType.join()}, actual type was '${parameter.type}'`);\n        }\n    } else if (parameter.type != expectedType) {\n        throwInvalidType(expressionName, parameterName, parameterIndex, expectedType, parameter.type);\n    }\n}\n\nexport function checkInstance(expressionName, parameterName, parameterIndex, expectedClass, parameter) {\n    checkExpression(expressionName, parameterName, parameterIndex, parameter);\n    if (!(parameter instanceof expectedClass)) {\n        throwInvalidInstance(expressionName, parameterName, parameterIndex, expectedClass, parameter.type);\n    }\n}\n\nexport function checkNumber(expressionName, parameterName, parameterIndex, number) {\n    if (!Number.isFinite(number)) {\n        throwInvalidNumber(expressionName, parameterName, parameterIndex, number);\n    }\n}\n\nexport function checkString(expressionName, parameterName, parameterIndex, str) {\n    if (typeof str !== 'string') {\n        throwInvalidString(expressionName, parameterName, parameterIndex, str);\n    }\n}\n\n\nexport function clamp(x, min, max) {\n    return Math.min(Math.max(x, min), max);\n}\n\nexport function mix(x, y, a) {\n    return x * (1 - a) + y * a;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/utils.js\n// module id = 1\n// module chunks = 0","/**\n *  @api\n *  @namespace carto.style.expressions\n *  @description\n *  Expressions are used to define styles, a style is composed of an expression for every configurable attribute.\n *  Remember a style has the following attributes:\n *\n *  - **color**: Determine the element fill color.\n *  - **strokeColor**: Determine the element border color.\n *  - **width**: Determine the element width: radius when points, thickness when lines, ignored for polygons.\n *  - **strokeWidth**: Determine the element border size.\n *  - **filter**: This is a special property used to remove elements that do not meet the expression.\n *\n * For example the point radius could be styled using the `number` expression:\n *\n * ```javascript\n * const style = new carto.Style({\n *  width: carto.style.expressions.number(10)\n * });\n * ```\n *\n * You can evaluate dataset properties inside an expression. Imagine we are representing cities in a map,\n * we can set the point width depending on the population using the `property` expression.\n *\n * ```javascript\n * const style = new carto.Style({\n *  width: carto.style.expressions.property('population')\n * });\n * ```\n *\n * Multiple expressions can be combined to form more powerful ones,\n * for example lets divide the population between a number using the `div` expression to make points smaller:\n *\n * ```javascript\n * const s = carto.style.expressions; // We use this alias along documentation.\n * const style = new carto.Style({\n *  width: s.div(\n *      property('population'),\n *      s.number(10000)\n *  ),\n * });\n * ```\n *\n * Although expression combination is very powerful, you must be aware of the different types to produce valid combinations.\n * For example, the previous example is valid since we assumed that 'population' is a numeric property, it won't be valid if\n * it was a categorical property. Each expression defines some restrictions regarding their parameters, particularly, the\n * type of their parameters.\n *\n * The most important types are:\n *  - **Numeric** expression. Expressions that contains numbers, both integers and floating point numbers. Boolean types are emulated by this type, being 0 false, and 1 true.\n *  - **Category** expression. Expressions that contains categories. Categories can have a limited set of values, like the country or the region of a feature.\n *  - **Color** expression. Expressions that contains colors. An alpha or transparency channel is included in this type.\n *\n */\n\nimport { palettes, Inverse } from './expressions/palettes';\nimport Animate from './expressions/animate';\nimport Blend from './expressions/blend';\nimport Buckets from './expressions/buckets';\nimport CIELab from './expressions/CIELab';\nimport Float from './expressions/float';\nimport FloatConstant from './expressions/floatConstant';\nimport Category from './expressions/category';\nimport HSV from './expressions/hsv';\nimport Linear from './expressions/linear';\nimport Near from './expressions/near';\nimport Now from './expressions/now';\nimport Property from './expressions/property';\nimport Ramp from './expressions/ramp';\nimport RGBA from './expressions/rgba';\nimport Opacity from './expressions/opacity';\nimport Top from './expressions/top';\nimport XYZ from './expressions/xyz';\nimport Zoom from './expressions/zoom';\nimport { In, Nin } from './expressions/belongs.js';\nimport Between from './expressions/between';\nimport Time from './expressions/time';\n\n// Unary ops\nimport { Log } from './expressions/unary';\nimport { Sqrt } from './expressions/unary';\nimport { Sin } from './expressions/unary';\nimport { Cos } from './expressions/unary';\nimport { Tan } from './expressions/unary';\nimport { Sign } from './expressions/unary';\nimport { Abs } from './expressions/unary';\nimport { Not } from './expressions/unary';\n\n// Binary ops\nimport { FloatMul } from './expressions/binary';\nimport { FloatDiv } from './expressions/binary';\nimport { FloatAdd } from './expressions/binary';\nimport { FloatSub } from './expressions/binary';\nimport { FloatMod } from './expressions/binary';\nimport { FloatPow } from './expressions/binary';\nimport { GreaterThan } from './expressions/binary';\nimport { GreaterThanOrEqualTo } from './expressions/binary';\nimport { LessThan } from './expressions/binary';\nimport { LessThanOrEqualTo } from './expressions/binary';\nimport { Equals } from './expressions/binary';\nimport { NotEquals } from './expressions/binary';\nimport { Or, And } from './expressions/binary';\n\n\n// Aggregation ops\nimport { Max } from './expressions/aggregation';\nimport { Min } from './expressions/aggregation';\nimport { Avg } from './expressions/aggregation';\nimport { Sum } from './expressions/aggregation';\nimport { Mode } from './expressions/aggregation';\n\n// Classifiers\nimport { Quantiles, GlobalQuantiles } from './expressions/quantiles';\n\n// Interpolators\nimport { ILinear } from './expressions/interpolators';\nimport { Cubic } from './expressions/interpolators';\n\nimport {Torque, Fade} from './expressions/torque';\n\n\nexport { Cubic };\n\n\nimport {\n    ViewportMax, ViewportMin, ViewportAvg, ViewportSum, ViewportCount, ViewportPercentile,\n    GlobalMax, GlobalMin, GlobalAvg, GlobalSum, GlobalCount, GlobalPercentile\n}\n    from './expressions/viewportAggregation';\n\nimport { Asc, Desc, NoOrder, Width } from './expressions/ordering';\n\n// Expose classes as constructor functions\nexport const asc = (...args) => new Asc(...args);\nexport const desc = (...args) => new Desc(...args);\nexport const noOrder = (...args) => new NoOrder(...args);\nexport const width = (...args) => new Width(...args);\nexport const floatMul = (...args) => new FloatMul(...args);\nexport const floatDiv = (...args) => new FloatDiv(...args);\nexport const floatAdd = (...args) => new FloatAdd(...args);\nexport const floatSub = (...args) => new FloatSub(...args);\nexport const floatPow = (...args) => new FloatPow(...args);\nexport const floatMod = (...args) => new FloatMod(...args);\nexport const log = (...args) => new Log(...args);\nexport const sqrt = (...args) => new Sqrt(...args);\nexport const sin = (...args) => new Sin(...args);\nexport const cos = (...args) => new Cos(...args);\nexport const tan = (...args) => new Tan(...args);\nexport const sign = (...args) => new Sign(...args);\nexport const near = (...args) => new Near(...args);\nexport const blend = (...args) => new Blend(...args);\nexport const rgba = (...args) => new RGBA(...args);\nexport const property = (...args) => new Property(...args);\nexport const animate = (...args) => new Animate(...args);\nexport const hsv = (...args) => new HSV(...args);\nexport const opacity = (...args) => new Opacity(...args);\nexport const ramp = (...args) => new Ramp(...args);\nexport const float = (...args) => new Float(...args);\nexport const category = (...args) => new Category(...args);\nexport const max = (...args) => new Max(...args);\nexport const min = (...args) => new Min(...args);\nexport const sum = (...args) => new Sum(...args);\nexport const avg = (...args) => new Avg(...args);\nexport const mode = (...args) => new Mode(...args);\nexport const top = (...args) => new Top(...args);\nexport const linear = (...args) => new Linear(...args);\nexport const cubic = (...args) => new Cubic(...args);\nexport const ilinear = (...args) => new ILinear(...args);\nexport const now = (...args) => new Now(...args);\nexport const zoom = (...args) => new Zoom(...args);\nexport const cielab = (...args) => new CIELab(...args);\nexport const xyz = (...args) => new XYZ(...args);\nexport const abs = (...args) => new Abs(...args);\nexport const greaterThan = (...args) => new GreaterThan(...args);\nexport const greaterThanOrEqualTo = (...args) => new GreaterThanOrEqualTo(...args);\nexport const lessThan = (...args) => new LessThan(...args);\nexport const lessThanOrEqualTo = (...args) => new LessThanOrEqualTo(...args);\nexport const equals = (...args) => new Equals(...args);\nexport const notEquals = (...args) => new NotEquals(...args);\nexport const buckets = (...args) => new Buckets(...args);\nexport const quantiles = (...args) => new Quantiles(...args);\nexport const globalQuantiles = (...args) => new GlobalQuantiles(...args);\nexport const viewportMax = (...args) => new ViewportMax(...args);\nexport const viewportMin = (...args) => new ViewportMin(...args);\nexport const viewportAvg = (...args) => new ViewportAvg(...args);\nexport const viewportSum = (...args) => new ViewportSum(...args);\nexport const viewportCount = (...args) => new ViewportCount(...args);\nexport const viewportPercentile = (...args) => new ViewportPercentile(...args);\nexport const globalPercentile = (...args) => new GlobalPercentile(...args);\nexport const globalMax = (...args) => new GlobalMax(...args);\nexport const globalMin = (...args) => new GlobalMin(...args);\nexport const globalAvg = (...args) => new GlobalAvg(...args);\nexport const globalSum = (...args) => new GlobalSum(...args);\nexport const globalCount = (...args) => new GlobalCount(...args);\nexport const inverse = (...args) => new Inverse(...args);\nexport const floatConstant = (...args) => new FloatConstant(...args);\nexport const torque = (...args) => new Torque(...args);\nexport const fade = (...args) => new Fade(...args);\nexport const time = (...args) => new Time(...args);\n\nexport const TRUE = new FloatConstant(1);\nexport const FALSE = new FloatConstant(0);\nexport const and = (...args) => new And(...args);\nexport const or = (...args) => new Or(...args);\nexport const not = (...args) => new Not(...args);\n\nexport const gt = greaterThan;\nexport const gte = greaterThanOrEqualTo;\nexport const lt = lessThan;\nexport const lte = lessThanOrEqualTo;\nconst _in = (...args) => new In(...args);\n\nexport const number = float;\nexport const add = floatAdd;\nexport const sub = floatSub;\nexport const mul = floatMul;\nexport const div = floatDiv;\nexport const pow = floatPow;\nexport const mod = floatMod;\nexport const prop = property;\n\nexport const eq = equals;\nexport const neq = notEquals;\nexport const nin = (...args) => new Nin(...args);\nexport const between = (...args) => new Between(...args);\n\n\nexport { _in as in };\nexport { palettes, Asc, Desc };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/functions.js\n// module id = 2\n// module chunks = 0","import { float } from '../functions';\nimport { implicitCast } from './utils';\nimport Expression from './expression';\n\n// Each binary expression can have a set of the following signatures (OR'ed flags)\nconst UNSUPPORTED_SIGNATURE = 0;\nconst FLOATS_TO_FLOAT = 1;\nconst FLOAT_AND_COLOR_TO_COLOR = 2;\nconst COLORS_TO_COLOR = 4;\nconst CATEGORIES_TO_FLOAT = 8;\n\n/**\n *\n * Multiply two numeric expressions.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Simple multiplication.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.mul(5, 5);  // Upon rendering, width will be evaluated internally to 25\n * });\n *\n * @memberof carto.style.expressions\n * @name mul\n * @function\n * @api\n */\nexport const FloatMul = genBinaryOp('mul',\n    FLOATS_TO_FLOAT | FLOAT_AND_COLOR_TO_COLOR | COLORS_TO_COLOR,\n    (x, y) => x * y,\n    (x, y) => `(${x} * ${y})`\n);\n\n/**\n *\n * Divide two numeric expressions.\n *\n * @param {carto.style.expressions.Expression | number} numerator - Numerator of the division\n * @param {carto.style.expressions.Expression | number} denominator - Denominator of the division\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Number division.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.div(10, 2);   // Upon rendering, width will be evaluated internally to 5\n * });\n *\n * @memberof carto.style.expressions\n * @name div\n * @function\n * @api\n */\nexport const FloatDiv = genBinaryOp('div',\n    FLOATS_TO_FLOAT | FLOAT_AND_COLOR_TO_COLOR | COLORS_TO_COLOR,\n    (x, y) => x / y,\n    (x, y) => `(${x} / ${y})`\n);\n\n/**\n *\n * Add two numeric expressions.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Number addition.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.add(10, 2);  // Upon rendering, width will be evaluated internally to 12\n * });\n *\n * @memberof carto.style.expressions\n * @name add\n * @function\n * @api\n */\nexport const FloatAdd = genBinaryOp('add',\n    FLOATS_TO_FLOAT | COLORS_TO_COLOR,\n    (x, y) => x + y,\n    (x, y) => `(${x} + ${y})`\n);\n\n/**\n *\n * Substract two numeric expressions.\n *\n * @param {carto.style.expressions.Expression | number} minuend - The minuend of the subtraction\n * @param {carto.style.expressions.Expression | number} subtrahend - The subtrahend of the subtraction\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Number subtraction.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.sub(10, 2);  // Upon rendering, width will be evaluated internally to 8\n * });\n *\n * @memberof carto.style.expressions\n * @name sub\n * @function\n * @api\n */\nexport const FloatSub = genBinaryOp('sub',\n    FLOATS_TO_FLOAT | COLORS_TO_COLOR,\n    (x, y) => x - y,\n    (x, y) => `(${x} - ${y})`\n);\n\n/**\n *\n * Modulus of two numeric expressions, mod returns a numeric expression with the value of x modulo y. This is computed as x - y * floor(x/y).\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Number modulus.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.mod(10, 6);  // 4\n * });\n *\n * @memberof carto.style.expressions\n * @name mod\n * @function\n * @api\n */\nexport const FloatMod = genBinaryOp('mod',\n    FLOATS_TO_FLOAT,\n    (x, y) => x % y,\n    (x, y) => `mod(${x}, ${y})`\n);\n\n/**\n *\n * Compute the base to the exponent power, return a numeric expression with the value of the first parameter raised to the power of the second.\n * The result is undefined if x<0 or if x=0 and y≤0.\n *\n * @param {carto.style.expressions.Expression | number} base numeric expression\n * @param {carto.style.expressions.Expression | number} exponent numeric expression\n * @return {carto.style.expressions.Expression} numeric expression with base ^ exponent\n *\n * @example <caption>Power of two numbers.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.pow(2, 3);  // 8\n * });\n *\n * @memberof carto.style.expressions\n * @name pow\n * @function\n * @api\n */\nexport const FloatPow = genBinaryOp('pow',\n    FLOATS_TO_FLOAT,\n    (x, y) => Math.pow(x, y),\n    (x, y) => `pow(${x}, ${y})`\n);\n\n/**\n *\n * Compare if x is greater than y.\n *\n * This returns a numeric expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price > 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.gt(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name gt\n * @function\n * @api\n */\nexport const GreaterThan = genBinaryOp('greaterThan',\n    FLOATS_TO_FLOAT,\n    (x, y) => x > y ? 1 : 0,\n    (x, y) => `(${x}>${y}? 1.:0.)`\n);\n\n/**\n *\n * Compare if x is greater than or equal to y.\n *\n * This returns a numeric expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price >= 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.gte(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name gte\n * @function\n * @api\n */\nexport const GreaterThanOrEqualTo = genBinaryOp('greaterThanOrEqualTo',\n    FLOATS_TO_FLOAT,\n    (x, y) => x >= y ? 1 : 0,\n    (x, y) => `(${x}>=${y}? 1.:0.)`\n);\n\n/**\n *\n * Compare if x is lower than y.\n *\n * This returns a numeric expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price < 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.lt(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name lt\n * @function\n * @api\n */\nexport const LessThan = genBinaryOp('lessThan',\n    FLOATS_TO_FLOAT,\n    (x, y) => x < y ? 1 : 0,\n    (x, y) => `(${x}<${y}? 1.:0.)`\n);\n\n/**\n *\n * Compare if x is lower than or equal to y.\n *\n * This returns a numeric expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price <= 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.lte(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name lte\n * @function\n * @api\n */\nexport const LessThanOrEqualTo = genBinaryOp('lessThanOrEqualTo',\n    FLOATS_TO_FLOAT,\n    (x, y) => x <= y ? 1 : 0,\n    (x, y) => `(${x}<=${y}? 1.:0.)`\n);\n\n/**\n *\n * Compare if x is equal to a y.\n *\n * This returns a numeric expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price === 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.eq(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name eq\n * @function\n * @api\n */\nexport const Equals = genBinaryOp('equals',\n    FLOATS_TO_FLOAT | CATEGORIES_TO_FLOAT,\n    (x, y) => x == y ? 1 : 0,\n    (x, y) => `(${x}==${y}? 1.:0.)`\n);\n\n/**\n *\n * Compare if x is different than y.\n *\n * This returns a number expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Compare two numbers to show only elements with price !== 30</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.neq(s.property('price'), 30);\n * });\n *\n * @memberof carto.style.expressions\n * @name neq\n * @function\n * @api\n */\nexport const NotEquals = genBinaryOp('notEquals',\n    FLOATS_TO_FLOAT | CATEGORIES_TO_FLOAT,\n    (x, y) => x != y ? 1 : 0,\n    (x, y) => `(${x}!=${y}? 1.:0.)`\n);\n\n\n/**\n *\n * Perform a binary OR between two numeric expressions.\n * If the numbers are different from 0 or 1 this performs a [fuzzy or operation](https://en.wikipedia.org/wiki/Fuzzy_logic#Fuzzification).\n * This fuzzy behavior will allow transitions to work in a continuos, non-discrete, fashion.\n *\n * This returns a number expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Show only elements with price < 30 or price > 1000</caption>\n * const s = carto.style.expressions;\n * const $price = s.property('price');\n * const style = new carto.Style({\n *  filter: s.or(\n *      s.lt($price, 30)\n *      s.gt($price, 1000)\n * });\n *\n * @memberof carto.style.expressions\n * @name or\n * @function\n * @api\n */\nexport const Or = genBinaryOp('or',\n    FLOATS_TO_FLOAT,\n    (x, y) => Math.min(x + y, 1),\n    (x, y) => `min(${x} + ${y}, 1.)`\n);\n\n/**\n *\n * Perform a binary AND between two numeric expressions.\n * If the numbers are different from 0 or 1 this performs a [fuzzy or operation](https://en.wikipedia.org/wiki/Fuzzy_logic#Fuzzification).\n * This fuzzy behavior will allow transitions to work in a continuos, non-discrete, fashion.\n *\n * This returns a number expression where 0 means `false` and 1 means `true`.\n *\n * @param {carto.style.expressions.Expression | number} x numeric expression\n * @param {carto.style.expressions.Expression | number} y numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Show only elements with price < 30 AND category === 'fruit'</caption>\n * const s = carto.style.expressions;\n * const $price = s.property('price');\n * const $category = s.property('category');\n *\n * const style = new carto.Style({\n *  filter: s.and(\n *      s.lt($price, 30)\n *      s.eq($category, 'fruit')\n * });\n *\n * @memberof carto.style.expressions\n * @name and\n * @function\n * @api\n */\nexport const And = genBinaryOp('and',\n    FLOATS_TO_FLOAT,\n    (x, y) => Math.min(x * y, 1),\n    (x, y) => `min(${x} * ${y}, 1.)`\n);\n\nfunction genBinaryOp(name, allowedSignature, jsFn, glsl) {\n    return class BinaryOperation extends Expression {\n        /**\n         * @jsapi\n         * @name BinaryOperation\n         * @hideconstructor\n         * @augments Expression\n         * @constructor\n         * @param {*} a\n         * @param {*} b\n         */\n        constructor(a, b) {\n            if (Number.isFinite(a) && Number.isFinite(b)) {\n                return float(jsFn(a, b));\n            }\n            a = implicitCast(a);\n            b = implicitCast(b);\n\n            const signature = getSignature(a, b);\n            if (signature !== undefined) {\n                if (signature == UNSUPPORTED_SIGNATURE || !(signature & allowedSignature)) {\n                    throw new Error(`${name}(): invalid parameter types\\n'x' type was ${a.type}, 'y' type was ${b.type}`);\n                }\n            }\n\n            super({ a: a, b: b });\n            this.type = getReturnTypeFromSignature(signature);\n        }\n        _compile(meta) {\n            super._compile(meta);\n            const [a, b] = [this.a, this.b];\n\n            const signature = getSignature(a, b);\n            if (signature == UNSUPPORTED_SIGNATURE || !(signature & allowedSignature)) {\n                throw new Error(`${name}(): invalid parameter types\\n'x' type was ${a.type}, 'y' type was ${b.type}`);\n            }\n            this.type = getReturnTypeFromSignature(signature);\n\n            this.inlineMaker = inline => glsl(inline.a, inline.b);\n        }\n        eval(feature) {\n            return jsFn(this.a.eval(feature), this.b.eval(feature));\n        }\n    };\n}\n\nfunction getSignature(a, b) {\n    if (!a.type || !b.type) {\n        return undefined;\n    } else if (a.type == 'float' && b.type == 'float') {\n        return FLOATS_TO_FLOAT;\n    } else if (a.type == 'float' && b.type == 'color') {\n        return FLOAT_AND_COLOR_TO_COLOR;\n    } else if (a.type == 'color' && b.type == 'float') {\n        return FLOAT_AND_COLOR_TO_COLOR;\n    } else if (a.type == 'color' && b.type == 'color') {\n        return COLORS_TO_COLOR;\n    } else if (a.type == 'category' && b.type == 'category') {\n        return CATEGORIES_TO_FLOAT;\n    } else {\n        return UNSUPPORTED_SIGNATURE;\n    }\n}\n\nfunction getReturnTypeFromSignature(signature) {\n    switch (signature) {\n        case FLOATS_TO_FLOAT:\n            return 'float';\n        case FLOAT_AND_COLOR_TO_COLOR:\n            return 'color';\n        case COLORS_TO_COLOR:\n            return 'color';\n        case CATEGORIES_TO_FLOAT:\n            return 'float';\n        default:\n            return undefined;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/binary.js\n// module id = 3\n// module chunks = 0","import { implicitCast, checkLooseType, checkType } from './utils';\nimport Expression from './expression';\n\n\n/**\n *\n * Compute the natural logarithm (base e) of a number x\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the natural logarithm\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Natural Logarithm.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.log(10);  // 2.302585092994046\n * });\n *\n * @memberof carto.style.expressions\n * @name log\n * @function\n * @api\n */\nexport const Log = genUnaryOp('log', x => Math.log(x), x => `log(${x})`);\n\n/**\n *\n * Compute the square root of a number x\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the square root\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Square root.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.sqrt(4);  // 2\n * });\n *\n * @memberof carto.style.expressions\n * @name sqrt\n * @function\n * @api\n */\nexport const Sqrt = genUnaryOp('sqrt', x => Math.sqrt(x), x => `sqrt(${x})`);\n\n/**\n *\n * Compute the sine of a number x\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the sine in radians\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Sin</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.sin(Math.PI/2);  // 1\n * });\n *\n * @memberof carto.style.expressions\n * @name sin\n * @function\n * @api\n */\nexport const Sin = genUnaryOp('sin', x => Math.sin(x), x => `sin(${x})`);\n\n/**\n *\n * Compute the cosine of a number x\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the cosine in radians\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Cos</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.cos(0);  // 1\n * });\n *\n * @memberof carto.style.expressions\n * @name cos\n * @function\n * @api\n */\nexport const Cos = genUnaryOp('cos', x => Math.cos(x), x => `cos(${x})`);\n\n/**\n *\n * Compute the tangent of a number x\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the tangent in radians\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Tan</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.tan(0);  // 0\n * });\n *\n * @memberof carto.style.expressions\n * @name tan\n * @function\n * @api\n */\nexport const Tan = genUnaryOp('tan', x => Math.tan(x), x => `tan(${x})`);\n\n/**\n *\n * Compute the sign of a number x, indicating whether the number is positive, negative or zero\n * This means this function will return 1 if the number is positive, -1 if the number is negative 0 if the number is 0 and\n * -0 if the number is -0.\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the sign\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Sign</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.sign(100);  // 1\n * });\n *\n * @memberof carto.style.expressions\n * @name sign\n * @function\n * @api\n */\nexport const Sign = genUnaryOp('sign', x => Math.sign(x), x => `sign(${x})`);\n\n/**\n *\n * Compute the absolute value of a number x.\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the absolute value\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Abs</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.abs(100);  // 1\n * });\n *\n * @memberof carto.style.expressions\n * @name abs\n * @function\n * @api\n */\nexport const Abs = genUnaryOp('abs', x => Math.abs(x), x => `abs(${x})`);\n\n/**\n *\n * Compute the logical negation of the given expression.\n * This is internally computed as 1 - x preserving boolean behavior and allowing fuzzy logic.\n *\n *  - When x is equal to 1 not(x) will be evaluated to 0\n *  - When x is equal to 0 not(x) will be evaluated to 1\n *\n * @param {carto.style.expressions.number|number} x - Number to compute the absolute value\n * @return {carto.style.expressions.number}\n *\n * @example <caption>Not</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.not(0);  // 1\n * });\n *\n * @memberof carto.style.expressions\n * @name not\n * @function\n * @api\n */\nexport const Not = genUnaryOp('not', x => 1 - x, x => `(1.0 - ${x})`);\n\nfunction genUnaryOp(name, jsFn, glsl) {\n    return class UnaryOperation extends Expression {\n        constructor(a) {\n            a = implicitCast(a);\n            checkLooseType(name, 'x', 0, 'float', a);\n            super({ a: a });\n            this.type = 'float';\n        }\n        _compile(meta) {\n            super._compile(meta);\n            checkType(name, 'x', 0, 'float', this.a);\n            if (this.a.type != 'float') {\n                throw new Error(`Binary operation cannot be performed to '${this.a.type}'`);\n            }\n            this.inlineMaker = inlines => glsl(inlines.a);\n        }\n        eval(feature) {\n            return jsFn(this.a.eval(feature));\n        }\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/unary.js\n// module id = 4\n// module chunks = 0","/**\n * Export util functions\n */\n\nconst DEG2RAD = Math.PI / 180;\nconst EARTH_RADIUS = 6378137;\nconst WM_R = EARTH_RADIUS * Math.PI; // Webmercator *radius*: half length Earth's circumference\nconst WM_2R = WM_R * 2; // Webmercator coordinate range (Earth's circumference)\n\nfunction projectToWebMercator(latLng) {\n    let lat = latLng.lat * DEG2RAD;\n    let lng = latLng.lng * DEG2RAD;\n    let x = lng * EARTH_RADIUS;\n    let y = Math.log(Math.tan(lat / 2 + Math.PI / 4)) * EARTH_RADIUS;\n    return { x, y };\n}\n\nfunction isUndefined(value) {\n    return value === undefined;\n}\n\nfunction isString(value) {\n    return typeof value == 'string';\n}\n\nfunction isNumber(value) {\n    return typeof value == 'number';\n}\n\nfunction isObject(value) {\n    const type = typeof value;\n    return value != null && (type == 'object' || type == 'function');\n}\n\nexport {\n    WM_R,\n    WM_2R,\n    projectToWebMercator,\n    isUndefined,\n    isString,\n    isNumber,\n    isObject\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/util.js\n// module id = 5\n// module chunks = 0","import { CartoError } from './carto-error';\n\n/**\n * Utility to build a cartoError related to validation errors.\n *\n * @return {CartoError} A well formed object representing the error.\n */\nexport default class CartoValidationError extends CartoError {\n    constructor(type, message) {\n        super({\n            origin: 'validation',\n            type: type,\n            message: message\n        });\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/error-handling/carto-validation-error.js\n// module id = 6\n// module chunks = 0","import Expression from './expression';\nimport { checkString } from './utils';\n\n/**\n *\n * Evaluates the value of a column for every row in the dataset.\n *\n * For example think about a dataset containing 3 cities: Barcelona, Paris and London.\n * The `prop('name')` will return the name of the current city for every point in the dataset.\n *\n * @param {string} name - The property in the dataset that is going to be evaluated\n * @return {carto.style.expressions.property}\n *\n * @example <caption>Display only cities with name different from \"London\"</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.neq(s.prop('name'), 'london'),\n * });\n *\n * @memberof carto.style.expressions\n * @name prop\n * @function\n * @api\n */\nexport default class Property extends Expression {\n    /**\n     * @jsapi\n     * @param {*} name Property/column name\n     */\n    constructor(name) {\n        checkString('property', 'name', 0, name);\n        if (name == '') {\n            throw new Error('property(): invalid parameter, zero-length string');\n        }\n        super({});\n        this.name = name;\n    }\n    _compile(meta) {\n        const metaColumn = meta.columns.find(c => c.name == this.name);\n        if (!metaColumn) {\n            throw new Error(`Property '${this.name}' does not exist`);\n        }\n        this.type = metaColumn.type;\n        if (this.type == 'category') {\n            this.numCategories = metaColumn.categoryNames.length;\n        }\n        super._setGenericGLSL((childInlines, uniformIDMaker, propertyTIDMaker) => `p${propertyTIDMaker(this.name)}`);\n    }\n    _getMinimumNeededSchema() {\n        return {\n            columns: [\n                this.name\n            ]\n        };\n    }\n    eval(feature) {\n        return feature[this.name];\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/property.js\n// module id = 7\n// module chunks = 0","import Expression from './expression';\nimport Property from './property';\nimport { checkInstance, checkType } from './utils';\n\n// Aggregation ops\nexport const Max = genAggregationOp('max', 'float');\nexport const Min = genAggregationOp('min', 'float');\nexport const Avg = genAggregationOp('avg', 'float');\nexport const Sum = genAggregationOp('sum', 'float');\nexport const Mode = genAggregationOp('mode', 'category');\n\nfunction genAggregationOp(aggName, aggType) {\n    return class AggregationOperation extends Expression {\n        constructor(property) {\n            checkInstance(aggName, 'property', 0, Property, property);\n            super({ property: property });\n            this.type = aggType;\n        }\n        get name() {\n            return this.property.name;\n        }\n        get numCategories() {\n            return this.property.numCategories;\n        }\n        //Override super methods, we don't want to let the property use the raw column, we must use the agg suffixed one\n        _compile(metadata) {\n            super._compile(metadata);\n            checkType(aggName, 'property', 0, aggType, this.property);\n        }\n        _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n            return {\n                preface: '',\n                inline: `p${propertyTIDMaker(`_cdb_agg_${aggName}_${this.property.name}`)}`\n            };\n        }\n        eval(feature) {\n            return feature[`_cdb_agg_${aggName}_${this.property.name}`];\n        }\n        _postShaderCompile() { }\n        _getMinimumNeededSchema() {\n            return {\n                columns: [\n                    `_cdb_agg_${aggName}_${this.property.name}`\n                ]\n            };\n        }\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/aggregation.js\n// module id = 8\n// module chunks = 0","import * as shaders from './shaders';\nimport * as schema from './schema';\nimport Dataframe from './dataframe';\nimport { Asc, Desc } from './style/functions';\n\nconst HISTOGRAM_BUCKETS = 1000;\n\nconst INITIAL_TIMESTAMP = Date.now();\n\n/**\n * @typedef {object} RPoint - Point in renderer coordinates space\n * @property {number} x\n * @property {number} y\n */\n\n/**\n * @description The Render To Texture Width limits the maximum number of features per tile: *maxFeatureCount = RTT_WIDTH^2*\n *\n * Large RTT_WIDTH values are unsupported by hardware. Limits vary on each machine.\n * Support starts to drop from 2048, with a drastic reduction in support for more than 4096 pixels.\n *\n * Large values imply a small overhead too.\n */\nconst RTT_WIDTH = 1024;\n\n\n/**\n * @description Renderer constructor. Use it to create a new renderer bound to the provided canvas.\n * Initialization will be done synchronously.\n * The function will fail in case that a WebGL context cannot be created this can happen because of the following reasons:\n *   * The provided canvas element is invalid\n *   * The browser or the machine doesn't support WebGL or the required WebGL extension and minimum parameter values\n * @jsapi\n * @memberOf renderer\n * @constructor\n * @param {HTMLElement} canvas - the WebGL context will be created on this element\n */\n\nclass Renderer {\n    constructor(canvas) {\n        if (canvas) {\n            this.gl = canvas.getContext('webgl');\n            if (!this.gl) {\n                throw new Error('WebGL 1 is unsupported');\n            }\n            this._initGL(this.gl);\n        }\n        this._center = { x: 0, y: 0 };\n        this._zoom = 1;\n        this.RTT_WIDTH = RTT_WIDTH;\n        console.log('R', this);\n        this.dataframes = [];\n    }\n\n    _initGL(gl) {\n        this.gl = gl;\n        const OES_texture_float = gl.getExtension('OES_texture_float');\n        if (!OES_texture_float) {\n            throw new Error('WebGL extension OES_texture_float is unsupported');\n        }\n        const supportedRTT = gl.getParameter(gl.MAX_RENDERBUFFER_SIZE);\n        if (supportedRTT < RTT_WIDTH) {\n            throw new Error(`WebGL parameter 'gl.MAX_RENDERBUFFER_SIZE' is below the requirement: ${supportedRTT} < ${RTT_WIDTH}`);\n        }\n        this._initShaders();\n\n        this.auxFB = gl.createFramebuffer();\n\n        // Create a VBO that covers the entire screen\n        // Use a \"big\" triangle instead of a square for performance and simplicity\n        this.bigTriangleVBO = gl.createBuffer();\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.bigTriangleVBO);\n        var vertices = [\n            10.0, -10.0,\n            0.0, 10.0,\n            -10.0, -10.0,\n        ];\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);\n\n        // Create a 1x1 RGBA texture set to [0,0,0,0]\n        // Needed because sometimes we don't really use some textures within the shader, but they are declared anyway.\n        this.zeroTex = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, this.zeroTex);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,\n            1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n            new Uint8Array(4));\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n        this._AATex = gl.createTexture();\n        this._AAFB = gl.createFramebuffer();\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.bindTexture(gl.TEXTURE_2D, this.zeroTex);\n    }\n\n    /**\n    * Get Renderer visualization center\n    * @return {RPoint}\n    */\n    getCenter() {\n        return { x: this._center.x, y: this._center.y };\n    }\n\n    /**\n     * Set Renderer visualization center\n     * @param {number} x\n     * @param {number} y\n     */\n    setCenter(x, y) {\n        this._center.x = x;\n        this._center.y = y;\n    }\n\n    /**\n     * Get Renderer visualization bounds\n     * @return {*}\n     */\n    getBounds() {\n        const center = this.getCenter();\n        const sx = this.getZoom() * this.getAspect();\n        const sy = this.getZoom();\n        return [center.x - sx, center.y - sy, center.x + sx, center.y + sy];\n    }\n\n    /**\n     * Get Renderer visualization zoom\n     * @return {number}\n     */\n    getZoom() {\n        return this._zoom;\n    }\n\n    /**\n     * Set Renderer visualization zoom\n     * @param {number} zoom\n     */\n    setZoom(zoom) {\n        this._zoom = zoom;\n    }\n\n\n    /**\n     * Removes a dataframe for the renderer. Freeing its resources.\n     * @param {*} tile\n     */\n    removeDataframe(dataframe) {\n        this.dataframes = this.dataframes.filter(t => t !== dataframe);\n    }\n\n    /**\n     * @description Adds a new dataframe to the renderer.\n     *\n     * Performance-intensive. The required allocation and copy of resources will happen synchronously.\n     * To achieve good performance, avoid multiple calls within the same event, particularly with large dataframes.\n     * @param {Dataframe} dataframe\n     * @returns {BoundDataframe}\n     */\n    addDataframe(dataframe) {\n        dataframe.bind(this);\n        this.dataframes.push(dataframe);\n    }\n\n    getAspect() {\n        if (this.gl) {\n            return this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\n        }\n        return 1;\n    }\n\n\n    getStyledTiles() {\n        return this.dataframes.filter(tile => tile.style && tile.visible && tile.style.colorShader);\n    }\n\n\n    _computeDrawMetadata() {\n        const aspect = this.gl.canvas.clientWidth / this.gl.canvas.clientHeight;\n        const tiles = this.getStyledTiles();\n        let drawMetadata = {\n            freeTexUnit: 4,\n            zoom: 1. / this._zoom,\n            columns: []\n        };\n        let requiredColumns = tiles.map(d => {\n            const colorRequirements = d.style.getColor()._getDrawMetadataRequirements();\n            const widthRequirements = d.style.getWidth()._getDrawMetadataRequirements();\n            const strokeColorRequirements = d.style.getStrokeColor()._getDrawMetadataRequirements();\n            const strokeWidthRequirements = d.style.getStrokeWidth()._getDrawMetadataRequirements();\n            const filterRequirements = d.style.filter._getDrawMetadataRequirements();\n            return [widthRequirements, colorRequirements, strokeColorRequirements, strokeWidthRequirements, filterRequirements].\n                reduce(schema.union, schema.IDENTITY);\n        }).reduce(schema.union, schema.IDENTITY).columns;\n\n        if (requiredColumns.length == 0) {\n            return drawMetadata;\n        }\n\n        requiredColumns.forEach(column => {\n            drawMetadata.columns.push(\n                {\n                    name: column,\n                    min: Number.POSITIVE_INFINITY,\n                    max: Number.NEGATIVE_INFINITY,\n                    avg: undefined,\n                    count: 0,\n                    sum: 0,\n                    histogramBuckets: HISTOGRAM_BUCKETS,\n                    histogram: Array.from({ length: HISTOGRAM_BUCKETS }, () => 0),\n                    accumHistogram: Array.from({ length: HISTOGRAM_BUCKETS }, () => 0),\n                }\n            );\n        });\n\n        const s = 1. / this._zoom;\n        // TODO go feature by feature instead of column by column\n        tiles.forEach(d => {\n            d.vertexScale = [(s / aspect) * d.scale, s * d.scale];\n            d.vertexOffset = [(s / aspect) * (this._center.x - d.center.x), s * (this._center.y - d.center.y)];\n            const minx = (-1 + d.vertexOffset[0]) / d.vertexScale[0];\n            const maxx = (1 + d.vertexOffset[0]) / d.vertexScale[0];\n            const miny = (-1 + d.vertexOffset[1]) / d.vertexScale[1];\n            const maxy = (1 + d.vertexOffset[1]) / d.vertexScale[1];\n\n            const columnNames = d.style.filter._getMinimumNeededSchema().columns;\n            const f = {};\n\n            for (let i = 0; i < d.numFeatures; i++) {\n                const x = d.geom[2 * i + 0];\n                const y = d.geom[2 * i + 1];\n                if (x > minx && x < maxx && y > miny && y < maxy) {\n                    if (d.style.filter) {\n                        columnNames.forEach(name => {\n                            f[name] = d.properties[name][i];\n                        });\n                        if (d.style.filter.eval(f) < 0.5) {\n                            continue;\n                        }\n                    }\n                    requiredColumns.forEach(column => {\n                        const values = d.properties[column];\n                        const v = values[i];\n                        const metaColumn = drawMetadata.columns.find(c => c.name == column);\n                        metaColumn.min = Math.min(v, metaColumn.min);\n                        metaColumn.max = Math.max(v, metaColumn.max);\n                        metaColumn.count++;\n                        metaColumn.sum += v;\n                    });\n                }\n            }\n        });\n        requiredColumns.forEach(column => {\n            const metaColumn = drawMetadata.columns.find(c => c.name == column);\n            metaColumn.avg = metaColumn.sum / metaColumn.count;\n        });\n        tiles.forEach(d => {\n            requiredColumns.forEach(column => {\n                const values = d.properties[column];\n                const metaColumn = drawMetadata.columns.find(c => c.name == column);\n                d.vertexScale = [(s / aspect) * d.scale, s * d.scale];\n                d.vertexOffset = [(s / aspect) * (this._center.x - d.center.x), s * (this._center.y - d.center.y)];\n                const minx = (-1 + d.vertexOffset[0]) / d.vertexScale[0];\n                const maxx = (1 + d.vertexOffset[0]) / d.vertexScale[0];\n                const miny = (-1 + d.vertexOffset[1]) / d.vertexScale[1];\n                const maxy = (1 + d.vertexOffset[1]) / d.vertexScale[1];\n                const vmin = metaColumn.min;\n                const vmax = metaColumn.max;\n                const vdiff = vmax - vmin;\n                for (let i = 0; i < d.numFeatures; i++) {\n                    const x = d.geom[2 * i + 0];\n                    const y = d.geom[2 * i + 1];\n                    if (x > minx && x < maxx && y > miny && y < maxy) {\n                        const v = values[i];\n                        if (!Number.isFinite(v)) {\n                            continue;\n                        }\n                        metaColumn.histogram[Math.ceil(999 * (v - vmin) / vdiff)]++;\n                    }\n                }\n            });\n        });\n        requiredColumns.forEach(column => {\n            const metaColumn = drawMetadata.columns.find(c => c.name == column);\n            for (let i = 1; i < metaColumn.histogramBuckets; i++) {\n                metaColumn.accumHistogram[i] = metaColumn.accumHistogram[i - 1] + metaColumn.histogram[i];\n            }\n        });\n        return drawMetadata;\n    }\n\n    refresh(timestamp) {\n        const gl = this.gl;\n        // Don't re-render more than once per animation frame\n        if (this.lastFrame === timestamp) {\n            return;\n        }\n\n        var width = gl.canvas.clientWidth;\n        var height = gl.canvas.clientHeight;\n        if (gl.canvas.width != width ||\n            gl.canvas.height != height) {\n            gl.canvas.width = width;\n            gl.canvas.height = height;\n        }\n        var aspect = gl.canvas.clientWidth / gl.canvas.clientHeight;\n\n        gl.enable(gl.CULL_FACE);\n\n        gl.disable(gl.BLEND);\n        gl.disable(gl.DEPTH_TEST);\n        gl.disable(gl.STENCIL_TEST);\n        gl.depthMask(false);\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this.auxFB);\n\n        const tiles = this.getStyledTiles();\n\n        const drawMetadata = this._computeDrawMetadata();\n\n        const styleTile = (tile, tileTexture, shader, styleExpr, TID) => {\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, tileTexture, 0);\n            gl.viewport(0, 0, RTT_WIDTH, tile.height);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n\n            gl.useProgram(shader.program);\n            for (let i = 0; i < 16; i++) {\n                gl.activeTexture(gl.TEXTURE0 + i);\n                gl.bindTexture(gl.TEXTURE_2D, this.zeroTex);\n                gl.uniform1i(shader.textureLocations[i], 0);\n            }\n\n            drawMetadata.freeTexUnit = 4;\n            styleExpr._setTimestamp((Date.now() - INITIAL_TIMESTAMP) / 1000.);\n            styleExpr._preDraw(drawMetadata, gl);\n\n            Object.keys(TID).forEach((name, i) => {\n                gl.activeTexture(gl.TEXTURE0 + i);\n                gl.bindTexture(gl.TEXTURE_2D, tile.propertyTex[tile.propertyID[name]]);\n                gl.uniform1i(shader.textureLocations[i], i);\n            });\n\n            gl.enableVertexAttribArray(shader.vertexAttribute);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.bigTriangleVBO);\n            gl.vertexAttribPointer(shader.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            gl.drawArrays(gl.TRIANGLES, 0, 3);\n            gl.disableVertexAttribArray(shader.vertexAttribute);\n        };\n        tiles.map(tile => styleTile(tile, tile.texColor, tile.style.colorShader, tile.style.getColor(), tile.style.propertyColorTID));\n        tiles.map(tile => styleTile(tile, tile.texWidth, tile.style.widthShader, tile.style.getWidth(), tile.style.propertyWidthTID));\n        tiles.map(tile => styleTile(tile, tile.texStrokeColor, tile.style.strokeColorShader, tile.style.getStrokeColor(), tile.style.propertyStrokeColorTID));\n        tiles.map(tile => styleTile(tile, tile.texStrokeWidth, tile.style.strokeWidthShader, tile.style.getStrokeWidth(), tile.style.propertyStrokeWidthTID));\n        tiles.map(tile => styleTile(tile, tile.texFilter, tile.style.filterShader, tile.style.filter, tile.style.propertyFilterTID));\n\n        gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n        gl.enable(gl.BLEND);\n\n        gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n        if (tiles.length && tiles[0].type != 'point') {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, this._AAFB);\n            const [w, h] = [gl.drawingBufferWidth, gl.drawingBufferHeight];\n\n            if (w != this._width || h != this._height) {\n                gl.bindTexture(gl.TEXTURE_2D, this._AATex);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,\n                    w * 2, h * 2, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n                gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, this._AATex, 0);\n\n                [this._width, this._height] = [w, h];\n            }\n            gl.viewport(0, 0, w * 2, h * 2);\n            gl.clear(gl.COLOR_BUFFER_BIT);\n        }\n\n        const s = 1. / this._zoom;\n\n        const { orderingMins, orderingMaxs } = getOrderingRenderBuckets(tiles);\n\n        const renderDrawPass = orderingIndex => tiles.forEach(tile => {\n\n            let renderer = null;\n            if (tile.type == 'point') {\n                renderer = this.finalRendererProgram;\n            } else if (tile.type == 'line') {\n                renderer = this.lineRendererProgram;\n            } else {\n                renderer = this.triRendererProgram;\n            }\n            gl.useProgram(renderer.program);\n\n            //Set filtering condition on \"... AND feature is in current order bucket\"\n            gl.uniform1f(renderer.orderMinWidth, orderingMins[orderingIndex]);\n            gl.uniform1f(renderer.orderMaxWidth, orderingMaxs[orderingIndex]);\n\n            gl.uniform2f(renderer.vertexScaleUniformLocation,\n                (s / aspect) * tile.scale,\n                s * tile.scale);\n            gl.uniform2f(renderer.vertexOffsetUniformLocation,\n                (s / aspect) * (this._center.x - tile.center.x),\n                s * (this._center.y - tile.center.y));\n            if (tile.type == 'line') {\n                gl.uniform2f(renderer.normalScale, 1 / gl.canvas.clientWidth, 1 / gl.canvas.clientHeight);\n            }\n\n            tile.vertexScale = [(s / aspect) * tile.scale, s * tile.scale];\n\n            tile.vertexOffset = [(s / aspect) * (this._center.x - tile.center.x), s * (this._center.y - tile.center.y)];\n\n            gl.enableVertexAttribArray(renderer.vertexPositionAttribute);\n            gl.bindBuffer(gl.ARRAY_BUFFER, tile.vertexBuffer);\n            gl.vertexAttribPointer(renderer.vertexPositionAttribute, 2, gl.FLOAT, false, 0, 0);\n\n\n            gl.enableVertexAttribArray(renderer.featureIdAttr);\n            gl.bindBuffer(gl.ARRAY_BUFFER, tile.featureIDBuffer);\n            gl.vertexAttribPointer(renderer.featureIdAttr, 2, gl.FLOAT, false, 0, 0);\n\n            if (tile.type == 'line') {\n                gl.enableVertexAttribArray(renderer.normalAttr);\n                gl.bindBuffer(gl.ARRAY_BUFFER, tile.normalBuffer);\n                gl.vertexAttribPointer(renderer.normalAttr, 2, gl.FLOAT, false, 0, 0);\n            }\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, tile.texColor);\n            gl.uniform1i(renderer.colorTexture, 0);\n\n            gl.activeTexture(gl.TEXTURE1);\n            gl.bindTexture(gl.TEXTURE_2D, tile.texWidth);\n            gl.uniform1i(renderer.widthTexture, 1);\n\n\n            gl.activeTexture(gl.TEXTURE2);\n            gl.bindTexture(gl.TEXTURE_2D, tile.texFilter);\n            gl.uniform1i(renderer.filterTexture, 2);\n\n            if (tile.type == 'point') {\n                // Lines and polygons don't support stroke\n                gl.activeTexture(gl.TEXTURE3);\n                gl.bindTexture(gl.TEXTURE_2D, tile.texStrokeColor);\n                gl.uniform1i(renderer.colorStrokeTexture, 3);\n\n                gl.activeTexture(gl.TEXTURE4);\n                gl.bindTexture(gl.TEXTURE_2D, tile.texStrokeWidth);\n                gl.uniform1i(renderer.strokeWidthTexture, 4);\n            }\n\n            gl.drawArrays(tile.type == 'point' ? gl.POINTS : gl.TRIANGLES, 0, tile.numVertex);\n\n            gl.disableVertexAttribArray(renderer.vertexPositionAttribute);\n            gl.disableVertexAttribArray(renderer.featureIdAttr);\n            if (tile.type == 'line') {\n                gl.disableVertexAttribArray(renderer.normalAttr);\n            }\n        });\n        orderingMins.map((_, orderingIndex) => {\n            renderDrawPass(orderingIndex);\n        });\n\n        if (tiles.length && tiles[0].type != 'point') {\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n            gl.viewport(0, 0, gl.drawingBufferWidth, gl.drawingBufferHeight);\n\n            gl.useProgram(this._aaBlendShader.program);\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(gl.TEXTURE_2D, this._AATex);\n            gl.uniform1i(this._aaBlendShader.readTU, 0);\n\n            gl.enableVertexAttribArray(this._aaBlendShader.vertexAttribute);\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.bigTriangleVBO);\n            gl.vertexAttribPointer(this._aaBlendShader.vertexAttribute, 2, gl.FLOAT, false, 0, 0);\n\n            gl.drawArrays(gl.TRIANGLES, 0, 3);\n            gl.disableVertexAttribArray(this._aaBlendShader.vertexAttribute);\n        }\n\n        gl.disable(gl.CULL_FACE);\n    }\n\n\n    /**\n     * Initialize static shaders\n     */\n    _initShaders() {\n        this.finalRendererProgram = shaders.renderer.createPointShader(this.gl);\n        this.triRendererProgram = shaders.renderer.createTriShader(this.gl);\n        this.lineRendererProgram = shaders.renderer.createLineShader(this.gl);\n        this._aaBlendShader = new shaders.AABlender(this.gl);\n    }\n}\n\nfunction getOrderingRenderBuckets(tiles) {\n    let orderer = null;\n    if (tiles.length > 0) {\n        orderer = tiles[0].style.getOrder();\n    }\n    let orderingMins = [0];\n    let orderingMaxs = [1000];\n    if (orderer instanceof Asc) {\n        orderingMins = Array.from({ length: 16 }, (_, i) => (15 - i) * 2);\n        orderingMaxs = Array.from({ length: 16 }, (_, i) => i == 0 ? 1000 : (15 - i + 1) * 2);\n    } else if (orderer instanceof Desc) {\n        orderingMins = Array.from({ length: 16 }, (_, i) => i * 2);\n        orderingMaxs = Array.from({ length: 16 }, (_, i) => i == 15 ? 1000 : (i + 1) * 2);\n    }\n    return {\n        orderingMins,\n        orderingMaxs\n    };\n}\n\nexport { Renderer, Dataframe, schema };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/renderer.js\n// module id = 9\n// module chunks = 0","// The IDENTITY schema contains zero columns, and it has two interesting properties:\n//      union(a,IDENTITY)=union(IDENTITY, a)=a\n//      contains(x, IDENTITY)=true  (for x = valid schema)\nexport const IDENTITY = {\n    columns: []\n};\n\n/*\nconst schema = {\n    columns: ['temp', 'cat']\n};*/\n\n//TODO\n// Returns true if subsetSchema is a contained by supersetSchema\n// A schema A is contained by the schema B when all columns of A are present in B and\n// all aggregations in A are present in B, if a column is not aggregated in A, it must\n// be not aggregated in B\n//export function contains(supersetSchema, subsetSchema) {\n//}\n\n// Returns the union of a and b schemas\n// The union of two schemas is a schema with all the properties in both schemas and with their\n// aggregtions set to the union of both aggregation sets, or null if a property aggregation is null in both schemas\n// The union is not defined when one schema set the aggregation of one column and the other schema left the aggregation\n// to null. In this case the function will throw an exception.\nexport function union(a, b) {\n    const t = a.columns.concat(b.columns);\n    return {\n        columns: t.filter((item, pos) => t.indexOf(item) == pos)\n    };\n}\n\nexport function equals(a,b){\n    if (!a || !b){\n        return false;\n    }\n    return a.columns.length==b.columns.length && a.columns.every(v=> b.columns.includes(v));\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/schema.js\n// module id = 10\n// module chunks = 0","import Expression from './expression';\nimport { checkNumber, getStringErrorPreface } from './utils';\n\n\n//TODO refactor to use uniformfloat class\nexport default class Animate extends Expression {\n    /**\n     * @jsapi\n     * @description Animate returns a number from zero to one based on the elapsed number of milliseconds since the style was instantiated.\n     * The animation is not cyclic. It will stick to one once the elapsed number of milliseconds reach the animation's duration.\n     * @param {*} duration animation duration in milliseconds\n     */\n    constructor(duration) {\n        checkNumber('animate', 'duration', 0, duration);\n        if (duration < 0) {\n            throw new Error(getStringErrorPreface('animate', 'duration', 0) + 'duration must be greater than or equal to 0');\n        }\n        super({});\n        this.aTime = Date.now();\n        this.bTime = this.aTime + Number(duration);\n        this.type = 'float';\n    }\n    _applyToShaderSource(uniformIDMaker) {\n        this._uniformID = uniformIDMaker();\n        return {\n            preface: `uniform float anim${this._uniformID};\\n`,\n            inline: `anim${this._uniformID}`\n        };\n    }\n    _postShaderCompile(program, gl) {\n        this._uniformLocation = gl.getUniformLocation(program, `anim${this._uniformID}`);\n    }\n    _preDraw(drawMetadata, gl) {\n        const time = Date.now();\n        this.mix = (time - this.aTime) / (this.bTime - this.aTime);\n        if (this.mix > 1.) {\n            gl.uniform1f(this._uniformLocation, 1);\n        } else {\n            gl.uniform1f(this._uniformLocation, this.mix);\n        }\n    }\n    eval() {\n        const time = Date.now();\n        this.mix = (time - this.aTime) / (this.bTime - this.aTime);\n        return Math.min(this.mix, 1.);\n    }\n    isAnimated() {\n        return !this.mix || this.mix <= 1.;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/animate.js\n// module id = 11\n// module chunks = 0","\nexport default class Base {\n\n    /**\n     * Base data source object.\n     *\n     * The methods listed in the {@link carto.source.Base|source.Base} object are availiable in all source objects.\n     *\n     * Use a source to reference the data used in a {@link carto.layer.Base|layer}.\n     *\n     * {@link carto.source.Base} should not be used directly use {@link carto.source.Dataset}, {@link carto.source.SQL} of {@link carto.source.GeoJSON} instead.\n     *\n     *\n     * @constructor Base\n     * @abstract\n     * @memberof carto.source\n     * @api\n     */\n    constructor() {\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/source/base.js\n// module id = 12\n// module chunks = 0","import { implicitCast, clamp, mix, checkLooseType, checkType, checkExpression } from './utils';\nimport Animate from './animate';\nimport Expression from './expression';\n\n/**\n * @description Linearly interpolate from *a* to *b* based on *mix*\n * @param {carto.style.expressions.Expression | number} a numeric or color expression\n * @param {carto.style.expressions.Expression | number} b numeric or color expression\n * @param {carto.style.expressions.Expression | number} mix numeric expression with the interpolation parameter in the [0,1] range\n * @returns {carto.style.expressions.Expression} numeric expression\n *\n * @memberof carto.style.expressions\n * @name blend\n * @function\n * @api\n */\nexport default class Blend extends Expression {\n    constructor(a, b, mix, interpolator) {\n        a = implicitCast(a);\n        b = implicitCast(b);\n        mix = implicitCast(mix);\n\n\n        checkExpression('blend', 'a', 0, a);\n        checkExpression('blend', 'b', 1, b);\n        checkExpression('blend', 'mix', 2, mix);\n        if (a.type && b.type) {\n            abTypeCheck(a, b);\n        }\n        checkLooseType('blend', 'mix', 2, 'float', mix);\n\n        // TODO check interpolator type\n        const originalMix = mix;\n        if (interpolator) {\n            mix = interpolator(mix);\n        }\n        super({ a: a, b: b, mix: mix });\n        this.originalMix = originalMix;\n\n        if (a.type && b.type) {\n            this.type = a.type;\n        }\n    }\n    _compile(meta) {\n        super._compile(meta);\n\n        abTypeCheck(this.a, this.b);\n        checkType('blend', 'mix', 1, 'float', this.mix);\n\n        this.type = this.a.type;\n\n        this.inlineMaker = inline => `mix(${inline.a}, ${inline.b}, clamp(${inline.mix}, 0., 1.))`;\n    }\n    _preDraw(...args) {\n        super._preDraw(...args);\n        if (this.originalMix instanceof Animate && !this.originalMix.isAnimated()) {\n            this.parent._replaceChild(this, this.b);\n            this.notify();\n        }\n    }\n    eval(feature) {\n        const a = clamp(this.mix.eval(feature), 0, 1);\n        const x = this.a.eval(feature);\n        const y = this.b.eval(feature);\n        return mix(x, y, a);\n    }\n}\n\nfunction abTypeCheck(a, b) {\n    if (!((a.type == 'float' && b.type == 'float') || (a.type == 'color' && b.type == 'color'))) {\n        throw new Error(`blend(): invalid parameter types\\n\\t'a' type was '${a.type}'\\n\\t'b' type was ${b.type}'`);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/blend.js\n// module id = 13\n// module chunks = 0","import Expression from './expression';\nimport { checkNumber } from './utils';\n\n\n/**\n *\n * Wraps a number.\n *\n * @param {number} x - A number to be warped in a numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Creating a number expression.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.number(15);  // Elements will have width 15\n * });\n *\n * @memberof carto.style.expressions\n * @name number\n * @function\n * @api\n */\nexport default class Float extends Expression {\n    /**\n     * @jsapi\n     * @param {*} x\n     */\n    constructor(x) {\n        checkNumber('float', 'x', 0, x);\n        super({});\n        this.expr = x;\n        this.type = 'float';\n    }\n\n    _applyToShaderSource(uniformIDMaker) {\n        this._uniformID = uniformIDMaker();\n        return {\n            preface: `uniform float float${this._uniformID};\\n`,\n            inline: `float${this._uniformID}`\n        };\n    }\n\n    _postShaderCompile(program, gl) {\n        this._uniformLocation = gl.getUniformLocation(program, `float${this._uniformID}`);\n    }\n\n    _preDraw(drawMetadata, gl) {\n        gl.uniform1f(this._uniformLocation, this.expr);\n    }\n\n    isAnimated() {\n        return false;\n    }\n\n    eval() {\n        return this.expr;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/float.js\n// module id = 14\n// module chunks = 0","import Expression from './expression';\nimport { checkNumber } from './utils';\n\n\nexport default class FloatConstant extends Expression {\n    /**\n     * @jsapi\n     * @param {*} x\n     */\n    constructor(x) {\n        checkNumber('float', 'x', 0, x);\n        super({});\n        this.expr = x;\n        this.type = 'float';\n        this.inlineMaker = () => `(${x.toFixed(20)})`;\n    }\n\n    eval() {\n        return this.expr;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/floatConstant.js\n// module id = 15\n// module chunks = 0","import Expression from './expression';\nimport { checkString } from './utils';\n\n/**\n * @description Wrapper around category names\n * @param {string} categoryName\n * @returns {carto.style.expressions.Expression} category expression with the category name provided\n *\n * @memberof carto.style.expressions\n * @name category\n * @function\n * @api\n */\nexport default class Category extends Expression {\n    constructor(categoryName) {\n        checkString('category', 'categoryName', 0, categoryName);\n        super({});\n        this.expr = categoryName;\n        this.type = 'category';\n    }\n    _compile(metadata) {\n        this._metadata = metadata;\n    }\n    _applyToShaderSource(uniformIDMaker) {\n        this._uniformID = uniformIDMaker();\n        return {\n            preface: `uniform float cat${this._uniformID};\\n`,\n            inline: `cat${this._uniformID}`\n        };\n    }\n    _postShaderCompile(program, gl) {\n        this._uniformLocation = gl.getUniformLocation(program, `cat${this._uniformID}`);\n    }\n    _preDraw(drawMetadata, gl) {\n        const id = this._metadata.categoryIDs[this.expr];\n        gl.uniform1f(this._uniformLocation, id);\n    }\n    eval() {\n        return this._metadata.categoryIDs[this.expr];\n    }\n    isAnimated() {\n        return false;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/category.js\n// module id = 16\n// module chunks = 0","import { implicitCast, checkType, checkLooseType, checkExpression } from './utils';\nimport Expression from './expression';\n\n\nfunction IN_INLINE_MAKER(categories) {\n    if (categories.length == 0) {\n        return () => '0.';\n    }\n    return inline => `(${categories.map((cat, index) => `(${inline.value} == ${inline[`arg${index}`]})`).join(' || ')})? 1.: 0.`;\n}\n\nfunction NIN_INLINE_MAKER(categories) {\n    if (categories.length == 0) {\n        return () => '1.';\n    }\n    return inline => `(${categories.map((cat, index) => `(${inline.value} != ${inline[`arg${index}`]})`).join(' && ')})? 1.: 0.`;\n}\n\n/**\n *\n * Check if a categorical value belongs to a list of categories.\n *\n * @param {carto.style.expressions.expression | string} value - Categorical expression to be tested against the categorical whitelist\n * @param {...carto.style.expressions.expression | ...string} categories - Multiple categorical expression parameters that will form the whitelist\n * @return {carto.style.expressions.expression} numeric expression with the result of the check\n *\n * @example <caption>Display only cities where $type is \"metropolis\" or \"capital\".</caption>\n * const s = carto.style.expressions;\n * const $type = s.property('type');\n * const style = new carto.Style({\n *  filter: s.in($type, 'metropolis', 'capital');\n * });\n *\n * @memberof carto.style.expressions\n * @name in\n * @function\n * @api\n */\nexport const In = generateBelongsExpression('in', IN_INLINE_MAKER, (p, cats) => cats.some(cat => cat == p) ? 1 : 0);\n\n\n/**\n *\n * Check if value does not belong to the categories list given by the categories parameters.\n *\n * @param {carto.style.expressions.Expression | string} value - Categorical expression to be tested against the categorical blacklist\n * @param {...carto.style.expressions.Expression | ...string} categories - Multiple categorical expression parameters that will form the blacklist\n * @return {carto.style.expressions.Expression} numeric expression with the result of the check\n *\n * @example <caption>Display only cities where $type is not \"metropolis\" nor \"capital\".</caption>\n * const s = carto.style.expressions;\n * const $type = s.property('type');\n * const style = new carto.Style({\n *  filter: s.nin($type, 'metropolis', 'capital');\n * });\n *\n * @memberof carto.style.expressions\n * @name nin\n * @function\n * @api\n */\nexport const Nin = generateBelongsExpression('nin', NIN_INLINE_MAKER, (p, cats) => !cats.some(cat => cat == p) ? 1 : 0);\n\nfunction generateBelongsExpression(name, inlineMaker, jsEval) {\n\n    return class BelongExpression extends Expression {\n        constructor(value, ...categories) {\n            value = implicitCast(value);\n            checkExpression(name, 'value', 0, value);\n\n            categories = categories.map(implicitCast);\n\n            checkLooseType(name, 'value', 0, 'category', value);\n            categories.map((cat, index) => checkLooseType(name, '', index + 1, 'category', cat));\n\n            let children = {\n                value\n            };\n            categories.map((arg, index) => children[`arg${index}`] = arg);\n            super(children);\n            this.categories = categories;\n            this.inlineMaker = inlineMaker(this.categories);\n            this.type = 'float';\n        }\n\n        _compile(meta) {\n            super._compile(meta);\n            checkType(name, 'value', 0, 'category', this.value);\n            this.categories.map((cat, index) => checkType(name, '', index + 1, 'category', cat));\n        }\n\n        eval(feature) {\n            return jsEval(this.value.eval(feature), this.categories.map(category => category.eval(feature)));\n        }\n    };\n\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/belongs.js\n// module id = 17\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, checkLooseType, checkType } from './utils';\n\n/**\n *\n * Check if a given value is contained within an inclusive range (including the limits).\n *\n * @param {carto.style.expressions.Expression | number} value - numeric expression that is going to be tested against the [lowerLimit, upperLimit] range\n * @param {carto.style.expressions.Expression | number} lowerLimit - numeric expression with the lower limit of the range\n * @param {carto.style.expressions.Expression | number} upperLimit -  numeric expression with the upper limit of the range\n * @return {carto.style.expressions.Expression} numeric expression with the result of the check\n *\n * @example <caption>Display only cities where the population density is within the [50,100] range.</caption>\n * const s = carto.style.expressions;\n * const $dn = s.property('populationDensity');\n * const style = new carto.Style({\n *  filter: s.between($dn, 50, 100);\n * });\n *\n * @memberof carto.style.expressions\n * @name in\n * @function\n * @api\n */\nexport default class Between extends Expression {\n    constructor(value, lowerLimit, upperLimit) {\n        value = implicitCast(value);\n        lowerLimit = implicitCast(lowerLimit);\n        upperLimit = implicitCast(upperLimit);\n\n        checkLooseType('between', 'value', 0, 'float', value);\n        checkLooseType('between', 'lowerLimit', 1, 'float', lowerLimit);\n        checkLooseType('between', 'upperLimit', 2, 'float', upperLimit);\n\n        super({ value, lowerLimit, upperLimit });\n        this.type = 'float';\n    }\n\n    _compile(meta) {\n        super._compile(meta);\n\n        checkType('between', 'value', 0, 'float', this.value);\n        checkType('between', 'lowerLimit', 1, 'float', this.lowerLimit);\n        checkType('between', 'upperLimit', 2, 'float', this.upperLimit);\n\n        this.inlineMaker = inline => `((${inline.value} >= ${inline.lowerLimit} &&  ${inline.value} <= ${inline.upperLimit}) ? 1. : 0.)`;\n    }\n\n    eval(feature) {\n        const value = this.value.eval(feature);\n        const lower = this.lowerLimit.eval(feature);\n        const upper = this.upperLimit.eval(feature);\n        return (value >= lower && value <= upper) ? 1 : 0;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/between.js\n// module id = 18\n// module chunks = 0","import { implicitCast } from './utils';\nimport Expression from './expression';\n\n// TODO type checking\n\nexport class ILinear extends genInterpolator(inner => inner, undefined, inner => inner) { }\nexport class BounceEaseIn extends genInterpolator(\n    inner => `BounceEaseIn(${inner})`,\n    `\n    #ifndef BOUNCE_EASE_IN\n    #define BOUNCE_EASE_IN\n    float BounceEaseIn_BounceEaseOut(float p)\n    {\n        if(p < 4./11.0)\n        {\n            return (121. * p * p)/16.0;\n        }\n        else if(p < 8./11.0)\n        {\n            return (363./40.0 * p * p) - (99./10.0 * p) + 17./5.0;\n        }\n        else if(p < 9./10.0)\n        {\n            return (4356./361.0 * p * p) - (35442./1805.0 * p) + 16061./1805.0;\n        }\n        else\n        {\n            return (54./5.0 * p * p) - (513./25.0 * p) + 268./25.0;\n        }\n    }\n    float BounceEaseIn(float p)\n    {\n        return 1. - BounceEaseOut(1. - p);\n    }\n    #endif\n\n`,\n    inner => inner // TODO FIXME\n) { }\nexport class Cubic extends genInterpolator(\n    inner => `cubicEaseInOut(${inner})`,\n    `\n    #ifndef CUBIC\n    #define CUBIC\n    float cubicEaseInOut(float p){\n        if (p < 0.5) {\n            return 4. * p * p * p;\n        }else {\n            float f = ((2. * p) - 2.);\n            return 0.5 * f * f * f + 1.;\n        }\n    }\n    #endif\n`,\n    inner => inner // TODO FIXME\n) { }\n\n\n// Interpolators\nfunction genInterpolator(inlineMaker, preface, jsEval) {\n    const fn = class Interpolator extends Expression {\n        constructor(m) {\n            m = implicitCast(m);\n            super({ m: m });\n        }\n        _compile(meta) {\n            super._compile(meta);\n            if (this.m.type != 'float') {\n                throw new Error(`Blending cannot be performed by '${this.m.type}'`);\n            }\n            this.type = 'float';\n            this._setGenericGLSL(inline => inlineMaker(inline.m), preface);\n        }\n        eval(feature) {\n            return jsEval(this.m.eval(feature));\n        }\n    };\n    fn.type = 'interpolator';\n    return fn;\n\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/interpolators.js\n// module id = 19\n// module chunks = 0","import * as rendererGLSL from './renderer';\nimport * as stylerGLSL from './styler';\nimport * as aaBlenderGLSL from './aaBlender';\nimport ShaderCache from './shader-cache';\n\nconst NUM_TEXTURE_LOCATIONS = 4;\nconst shaderCache = new ShaderCache();\n\nlet programID = 1;\n\nfunction compileShader(gl, sourceCode, type) {\n    if (shaderCache.has(gl, sourceCode)) {\n        return shaderCache.get(gl, sourceCode);\n    }\n    const shader = gl.createShader(type);\n    gl.shaderSource(shader, sourceCode);\n    gl.compileShader(shader);\n    if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        const log = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error('An error occurred compiling the shaders: ' + log + '\\nSource:\\n' + sourceCode);\n    }\n    shaderCache.set(gl, sourceCode, shader);\n    return shader;\n}\n\nfunction compileProgram(gl, glslVS, glslFS) {\n    const VS = compileShader(gl, glslVS, gl.VERTEX_SHADER);\n    const FS = compileShader(gl, glslFS, gl.FRAGMENT_SHADER);\n    this.program = gl.createProgram();\n    gl.attachShader(this.program, VS);\n    gl.attachShader(this.program, FS);\n    gl.linkProgram(this.program);\n    gl.deleteShader(VS);\n    gl.deleteShader(FS);\n    if (!gl.getProgramParameter(this.program, gl.LINK_STATUS)) {\n        throw new Error('Unable to link the shader program: ' + gl.getProgramInfoLog(this.program));\n    }\n    this.programID = programID++;\n}\n\nclass AABlender {\n    constructor(gl) {\n        compileProgram.call(this, gl, aaBlenderGLSL.VS, aaBlenderGLSL.FS);\n        this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n        this.readTU = gl.getUniformLocation(this.program, 'aaTex');\n    }\n}\n\nclass Point {\n    constructor(gl) {\n        compileProgram.call(this, gl, rendererGLSL.point.VS, rendererGLSL.point.FS);\n        this.vertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        this.featureIdAttr = gl.getAttribLocation(this.program, 'featureID');\n        this.vertexScaleUniformLocation = gl.getUniformLocation(this.program, 'vertexScale');\n        this.vertexOffsetUniformLocation = gl.getUniformLocation(this.program, 'vertexOffset');\n        this.colorTexture = gl.getUniformLocation(this.program, 'colorTex');\n        this.colorStrokeTexture = gl.getUniformLocation(this.program, 'colorStrokeTex');\n        this.strokeWidthTexture = gl.getUniformLocation(this.program, 'strokeWidthTex');\n        this.widthTexture = gl.getUniformLocation(this.program, 'widthTex');\n        this.orderMinWidth = gl.getUniformLocation(this.program, 'orderMinWidth');\n        this.orderMaxWidth = gl.getUniformLocation(this.program, 'orderMaxWidth');\n        this.filterTexture = gl.getUniformLocation(this.program, 'filterTex');\n    }\n}\nclass Tri {\n    constructor(gl) {\n        compileProgram.call(this, gl, rendererGLSL.tris.VS, rendererGLSL.tris.FS);\n        this.vertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        this.featureIdAttr = gl.getAttribLocation(this.program, 'featureID');\n        this.vertexScaleUniformLocation = gl.getUniformLocation(this.program, 'vertexScale');\n        this.vertexOffsetUniformLocation = gl.getUniformLocation(this.program, 'vertexOffset');\n        this.colorTexture = gl.getUniformLocation(this.program, 'colorTex');\n        this.filterTexture = gl.getUniformLocation(this.program, 'filterTex');\n    }\n}\nclass Line {\n    constructor(gl) {\n        compileProgram.call(this, gl, rendererGLSL.line.VS, rendererGLSL.line.FS);\n        this.vertexPositionAttribute = gl.getAttribLocation(this.program, 'vertexPosition');\n        this.featureIdAttr = gl.getAttribLocation(this.program, 'featureID');\n        this.normalAttr = gl.getAttribLocation(this.program, 'normal');\n        this.vertexScaleUniformLocation = gl.getUniformLocation(this.program, 'vertexScale');\n        this.vertexOffsetUniformLocation = gl.getUniformLocation(this.program, 'vertexOffset');\n        this.colorTexture = gl.getUniformLocation(this.program, 'colorTex');\n        this.widthTexture = gl.getUniformLocation(this.program, 'widthTex');\n        this.filterTexture = gl.getUniformLocation(this.program, 'filterTex');\n        this.normalScale = gl.getUniformLocation(this.program, 'normalScale');\n    }\n}\nclass GenericStyler {\n    constructor(gl, glsl, preface, inline) {\n        const VS = glsl.VS;\n        let FS = glsl.FS;\n        FS = FS.replace('$PREFACE', preface);\n        FS = FS.replace('$INLINE', inline);\n        compileProgram.call(this, gl, VS, FS);\n        this.vertexAttribute = gl.getAttribLocation(this.program, 'vertex');\n        this.textureLocations = [];\n        for (let i = 0; i < NUM_TEXTURE_LOCATIONS; i++) {\n            this.textureLocations[i] = gl.getUniformLocation(this.program, `property${i}`);\n        }\n    }\n}\nclass Color extends GenericStyler {\n    constructor(gl, preface, inline) {\n        super(gl, stylerGLSL, '/*Color*/' + preface, inline);\n    }\n}\nclass Width extends GenericStyler {\n    constructor(gl, preface, inline) {\n        super(gl, stylerGLSL, '/*Width*/' + preface, `vec4((${inline})/64.)`);\n    }\n}\n\nclass Filter extends GenericStyler {\n    constructor(gl, preface, inline) {\n        super(gl, stylerGLSL, '/*Filter*/' + preface, `vec4(${inline})`);\n    }\n}\n\nconst renderer = {\n    createPointShader: function (gl) {\n        return new Point(gl);\n    },\n    createTriShader: function (gl) {\n        return new Tri(gl);\n    },\n    createLineShader: function (gl) {\n        return new Line(gl);\n    }\n};\n\nconst styler = {\n    createColorShader: function (gl, preface, inline) {\n        return new Color(gl, preface, inline);\n    },\n    createWidthShader: function (gl, preface, inline) {\n        return new Width(gl, preface, inline);\n    },\n    createFilterShader: function (gl, preface, inline) {\n        return new Filter(gl, preface, inline);\n    }\n};\n\nexport { renderer, styler, AABlender };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/index.js\n// module id = 20\n// module chunks = 0","import decoder from './decoder';\nexport default class Dataframe {\n    constructor({ center, scale, geom, properties, type, active, size }) {\n        this.active = active;\n        this.center = center;\n        this.geom = geom;\n        this.properties = properties;\n        this.scale = scale;\n        this.size = size;\n        this.type = type;\n    }\n\n    bind(renderer) {\n        const gl = renderer.gl;\n        this.renderer = renderer;\n\n        this.propertyTex = [];\n\n        const decodedGeom = decoder.decodeGeom(this.type, this.geom);\n        var points = decodedGeom.geometry;\n        this.numVertex = points.length / 2;\n        this.breakpointList = decodedGeom.breakpointList;\n        this.numFeatures = this.breakpointList.length || this.numVertex;\n        this._genDataframePropertyTextures(gl);\n\n        const width = this.renderer.RTT_WIDTH;\n        const height = Math.ceil(this.numFeatures / width);\n\n        this.style = null;\n\n        this.vertexBuffer = gl.createBuffer();\n        this.featureIDBuffer = gl.createBuffer();\n\n        this.texColor = this._createStyleTileTexture(this.numFeatures);\n        this.texWidth = this._createStyleTileTexture(this.numFeatures);\n        this.texStrokeColor = this._createStyleTileTexture(this.numFeatures);\n        this.texStrokeWidth = this._createStyleTileTexture(this.numFeatures);\n        this.texFilter = this._createStyleTileTexture(this.numFeatures);\n\n        var ids = new Float32Array(points.length);\n        let index = 0;\n        for (var i = 0; i < points.length; i += 2) {\n            if ((!this.breakpointList.length && i > 0) || i == this.breakpointList[index]) {\n                index++;\n            }\n            ids[i + 0] = ((index) % width) / (width - 1);\n            ids[i + 1] = height > 1 ? Math.floor((index) / width) / (height - 1) : 0.5;\n        }\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.vertexBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, points, gl.STATIC_DRAW);\n\n        if (decodedGeom.normals) {\n            this.normalBuffer = gl.createBuffer();\n            gl.bindBuffer(gl.ARRAY_BUFFER, this.normalBuffer);\n            gl.bufferData(gl.ARRAY_BUFFER, decodedGeom.normals, gl.STATIC_DRAW);\n        }\n\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.featureIDBuffer);\n        gl.bufferData(gl.ARRAY_BUFFER, ids, gl.STATIC_DRAW);\n    }\n\n    setStyle(style) {\n        this.style = style;\n    }\n\n    _genDataframePropertyTextures() {\n        const gl = this.renderer.gl;\n        const width = this.renderer.RTT_WIDTH;\n        const height = Math.ceil(this.numFeatures / width);\n\n        this.height = height;\n        this.propertyID = {}; //Name => PID\n        this.propertyCount = 0;\n        for (var k in this.properties) {\n            if (this.properties.hasOwnProperty(k) && this.properties[k].length > 0) {\n                var propertyID = this.propertyID[k];\n                if (propertyID === undefined) {\n                    propertyID = this.propertyCount;\n                    this.propertyCount++;\n                    this.propertyID[k] = propertyID;\n                }\n                this.propertyTex[propertyID] = gl.createTexture();\n                gl.bindTexture(gl.TEXTURE_2D, this.propertyTex[propertyID]);\n                gl.texImage2D(gl.TEXTURE_2D, 0, gl.ALPHA,\n                    width, height, 0, gl.ALPHA, gl.FLOAT,\n                    this.properties[k]);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n                gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n            }\n        }\n    }\n\n    _createStyleTileTexture(numFeatures) {\n        // TODO we are wasting 75% of the memory for the scalar attributes (width, strokeWidth),\n        // since RGB components are discarded\n        const gl = this.renderer.gl;\n        const width = this.renderer.RTT_WIDTH;\n        const height = Math.ceil(numFeatures / width);\n        const texture = gl.createTexture();\n        gl.bindTexture(gl.TEXTURE_2D, texture);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,\n            width, height, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n            null);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        return texture;\n    }\n\n    free() {\n        if (this.propertyTex) {\n            const gl = this.renderer.gl;\n            this.propertyTex.map(tex => gl.deleteTexture(tex));\n            gl.deleteTexture(this.texColor);\n            gl.deleteTexture(this.texStrokeColor);\n            gl.deleteTexture(this.texWidth);\n            gl.deleteTexture(this.texStrokeWidth);\n            gl.deleteTexture(this.texFilter);\n            gl.deleteBuffer(this.vertexBuffer);\n            gl.deleteBuffer(this.featureIDBuffer);\n            this.texColor = 'freed';\n            this.texWidth = 'freed';\n            this.texStrokeColor = 'freed';\n            this.texStrokeWidth = 'freed';\n            this.texFilter = 'freed';\n            this.vertexBuffer = 'freed';\n            this.featureIDBuffer = 'freed';\n            this.propertyTex = null;\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/dataframe.js\n// module id = 21\n// module chunks = 0","/**\n * An RSys defines a local coordinate system that maps the coordinates\n * in the range -1 <= x <= +1; -1 <= y <= +1 to an arbitrary rectangle\n * in an external coordinate system. (e.g. Dataframe coordinates to World coordinates)\n * It is the combination of a translation and anisotropic scaling.\n * @typedef {object} RSys - Renderer relative coordinate system\n * @property {RPoint} center - Position of the local system in external coordinates\n * @property {number} scale - Y-scale (local Y-distance / external Y-distance)\n*/\n\n/*\n * Random notes\n *\n * We can redefine Dataframe to use a Rsys instead of center, scale\n * and we can use an Rsys for the Renderer's canvas.\n *\n * Some interesting World coordinate systems:\n *\n * WM (Webmercator): represents a part of the world (excluding polar regions)\n * with coordinates in the range +/-WM_R for both X and Y. (positive orientation: E,N)\n *\n * NWMC (Normalized Webmercator Coordinates): represents the Webmercator *square*\n * with coordinates in the range +/-1. Results from dividing Webmercator coordinates\n * by WM_R. (positive orientation: E,N)\n *\n * TC (Tile coordinates): integers in [0, 2^Z) for zoom level Z. Example: the tile 0/0/0 (zoom, x, y) is the root tile.\n * (positive orientation: E,S)\n *\n * An RSys's rectangle (its bounds) is the area covered by the local coordinates in\n * the range +/-1.\n *\n * When an RSys external coordinate system is WM or NWMC, we can compute:\n * * Minimum zoom level for which tiles are no larger than the RSys rectangle:\n *   Math.ceil(Math.log2(1 / r.scale));\n * * Maximum zoom level for which tiles are no smaller than the rectangle:\n *   Math.floor(Math.log2(1 / r.scale));\n * (note that 1 / r.scale is the fraction of the World height that the local rectangle's height represents)\n *\n * We'll use the term World coordinates below for the *external* reference system\n * of an RSys (usually NWMC).\n */\n\n/*eslint no-unused-vars: [\"off\"] */\n\n/**\n * R coordinates to World\n * @param {RSys} r - ref. of the passed coordinates\n * @param {number} x - x coordinate in r\n * @param {number} y - y coordinate in r\n * @return {RPoint} World coordinates\n */\nfunction rToW(r, x, y) {\n    return { x: x * r.scale + r.center.x, y: y * r.scale + r.center.y };\n}\n\n/**\n * World coordinates to local RSys\n * @param {number} x - x W-coordinate\n * @param {number} y - y W-coordinate\n * @param {RSys} r - target ref. system\n * @return {RPoint} R coordinates\n */\nfunction wToR(x, y, r) {\n    return { x: (x - r.center.x) / r.scale, y: (y - r.center.y) / r.scale };\n}\n\n/**\n * RSys of a tile (mapping local tile coordinates in +/-1 to NWMC)\n * @param {number} x - TC x coordinate\n * @param {number} y - TC y coordinate\n * @param {number} z - Tile zoom level\n * @return {RSys}\n */\nfunction tileRsys(x, y, z) {\n    let max = Math.pow(2, z);\n    return { scale: 1 / max, center: { x: 2 * (x + 0.5) / max - 1, y: 1 - 2 * (y + 0.5) / max } };\n}\n\n/**\n * Minimum zoom level for which tiles are no larger than the RSys rectangle\n * @param {RSys} rsys\n * @return {number}\n */\nfunction rZoom(zoom) {\n    return Math.ceil(Math.log2(1. / zoom));\n}\n\n/**\n * TC tiles that intersect the local rectangle of an RSys\n * (with the largest tile size no larger than the rectangle)\n * @param {RSys} rsys\n * @return {Array} - array of TC tiles {x, y, z}\n */\nfunction rTiles(bounds) {\n    return wRectangleTiles(rZoom((bounds[3] - bounds[1]) / 2.), bounds);\n}\n\n/**\n * TC tiles of a given zoom level that intersect a W rectangle\n * @param {number} z\n * @param {Array} - rectangle extents [minx, miny, maxx, maxy]\n * @return {Array} - array of TC tiles {x, y, z}\n */\nfunction wRectangleTiles(z, wr) {\n    const [w_minx, w_miny, w_maxx, w_maxy] = wr;\n    const n = (1 << z); // for 0 <= z <= 30 equals Math.pow(2, z)\n\n    const clamp = x => Math.min(Math.max(x, 0), n - 1);\n    // compute tile coordinate ranges\n    const t_minx = clamp(Math.floor(n * (w_minx + 1) * 0.5));\n    const t_maxx = clamp(Math.ceil(n * (w_maxx + 1) * 0.5) - 1);\n    const t_miny = clamp(Math.floor(n * (1 - w_maxy) * 0.5));\n    const t_maxy = clamp(Math.ceil(n * (1 - w_miny) * 0.5) - 1);\n    let tiles = [];\n    for (let x = t_minx; x <= t_maxx; ++x) {\n        for (let y = t_miny; y <= t_maxy; ++y) {\n            tiles.push({ x: x, y: y, z: z });\n        }\n    }\n    return tiles;\n}\n\n/**\n * Get the Rsys of a tile where the Rsys's center is the tile center and the Rsys's scale is the tile extent.\n * @param {*} x\n * @param {*} y\n * @param {*} z\n * @returns {RSys}\n */\nfunction getRsysFromTile(x, y, z) {\n    return {\n        center: {\n            x: ((x + 0.5) / Math.pow(2, z)) * 2. - 1,\n            y: (1. - (y + 0.5) / Math.pow(2, z)) * 2. - 1.\n        },\n        scale: 1 / Math.pow(2, z)\n    };\n}\n\nexport { rTiles, getRsysFromTile, wToR };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/rsys.js\n// module id = 22\n// module chunks = 0","\n// The IDENTITY metadata contains zero columns\nexport const IDENTITY = {\n    featureCount: 0,\n    columns: []\n};\n\n/*\nconst metadataExample = {\n    featureCount: 0,\n    columns: [\n        {\n            name: 'temp',\n            type: 'float',\n            min: -10,\n            max: 45,\n            avg: 25,\n            histogram: [3, 6, 10, 22, 21, 14, 2, 1],\n            jenks3: [10, 20],\n            jenks4: [8, 15, 22],\n            jenks5: [7, 14, 18, 23],\n            jenks6: [],\n            jenks7: [],\n        },\n        {\n            name: 'cat',\n            type: 'category',\n            categoryNames: ['red', 'blue', 'green'],\n            categoryCount: [10, 30, 15],\n        }\n    ]\n};\n*/\n\nexport default class Metadata {\n    constructor(categoryIDs, columns, featureCount, sample) {\n        this.categoryIDs = categoryIDs;\n        this.columns = columns;\n        this.featureCount = featureCount;\n        this.sample = sample;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/metadata.js\n// module id = 23\n// module chunks = 0","import Base from './base';\nimport Windshaft from '../../client/windshaft';\nimport CartoValidationError from '../error-handling/carto-validation-error';\nimport { getDefaultAuth, checkAuth } from '../setup/auth-service';\nimport { getDefaultConfig, checkConfig } from '../setup/config-service';\n\n\nconst DEFAULT_SERVER_URL_TEMPLATE = 'https://{user}.carto.com';\n\nexport default class BaseWindshaft extends Base {\n\n    constructor() {\n        super();\n        this._client = new Windshaft(this);\n    }\n\n    initialize(auth, config) {\n        auth = auth || getDefaultAuth();\n        config = config || getDefaultConfig();\n        checkAuth(auth);\n        checkConfig(config);\n        this._apiKey = auth.apiKey;\n        this._username = auth.username;\n        this._serverURL = this._generateURL(auth, config);\n    }\n\n    bindLayer(...args) {\n        this._client._bindLayer(...args);\n    }\n\n    requestMetadata(style) {\n        return this._client.getMetadata(style);\n    }\n\n    requestData(viewport) {\n        return this._client.getData(viewport);\n    }\n\n    free() {\n        this._client.free();\n    }\n\n    _generateURL(auth, config) {\n        let url = (config && config.serverURL) || DEFAULT_SERVER_URL_TEMPLATE;\n        url = url.replace(/{user}/, auth.username);\n        this._validateServerURL(url.replace(/{local}/, ''));\n        return {\n            maps: url.replace(/{local}/, ':8181'),\n            sql:  url.replace(/{local}/, ':8080')\n        };\n    }\n\n    _validateServerURL(serverURL) {\n        var urlregex = /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)/;\n        if (!serverURL.match(urlregex)) {\n            throw new CartoValidationError('source', 'nonValidServerURL');\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/source/base-windshaft.js\n// module id = 24\n// module chunks = 0","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/process/browser.js\n// module id = 25\n// module chunks = 0","'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@mapbox/vector-tile/lib/vectortilelayer.js\n// module id = 26\n// module chunks = 0","'use strict';\n\nvar Point = require('@mapbox/point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (length <= 0) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = 'Multi' + type;\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('id' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@mapbox/vector-tile/lib/vectortilefeature.js\n// module id = 27\n// module chunks = 0","import * as util from '../util';\nimport CartoValidationError from '../error-handling/carto-validation-error';\n\n\nlet defaultAuth = undefined;\n\n/**\n * Set default authentication parameters: apiKey and user.\n *\n * @param {object} auth\n * @param {string} auth.apiKey - API key used to authenticate against CARTO\n * @param {string} auth.user - Name of the user\n *\n * @memberof carto\n * @api\n */\nfunction setDefaultAuth(auth) {\n    checkAuth(auth);\n    defaultAuth = auth;\n}\n\n/**\n * Get default authentication\n * @return {object}\n */\nfunction getDefaultAuth() {\n    return defaultAuth;\n}\n\n/**\n * Reset the default auth object\n */\nfunction cleanDefaultAuth() {\n    defaultAuth = undefined;\n}\n\n/**\n * Check a valid auth parameter.\n *\n * @param  {object} auth\n */\nfunction checkAuth(auth) {\n    if (util.isUndefined(auth)) {\n        throw new CartoValidationError('setup', 'authRequired');\n    }\n    if (!util.isObject(auth)) {\n        throw new CartoValidationError('setup', 'authObjectRequired');\n    }\n    auth.username = auth.user; // API adapter\n    checkApiKey(auth.apiKey);\n    checkUsername(auth.username);\n}\n\nfunction checkApiKey(apiKey) {\n    if (util.isUndefined(apiKey)) {\n        throw new CartoValidationError('setup', 'apiKeyRequired');\n    }\n    if (!util.isString(apiKey)) {\n        throw new CartoValidationError('setup', 'apiKeyStringRequired');\n    }\n    if (apiKey === '') {\n        throw new CartoValidationError('setup', 'nonValidApiKey');\n    }\n}\n\nfunction checkUsername(username) {\n    if (util.isUndefined(username)) {\n        throw new CartoValidationError('setup', 'usernameRequired');\n    }\n    if (!util.isString(username)) {\n        throw new CartoValidationError('setup', 'usernameStringRequired');\n    }\n    if (username === '') {\n        throw new CartoValidationError('setup', 'nonValidUsername');\n    }\n}\n\nexport { setDefaultAuth, getDefaultAuth, checkAuth, cleanDefaultAuth };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/setup/auth-service.js\n// module id = 28\n// module chunks = 0","import * as util from '../util';\nimport CartoValidationError from '../error-handling/carto-validation-error';\n\n\nlet defaultConfig = undefined;\n\n/**\n * Set default configuration parameters: serverURL.\n *\n * @param {object} options\n * @param {string} [options.serverURL='https://{user}.carto.com'] - URL of the CARTO Maps API server\n *\n * @memberof carto\n * @api\n */\nfunction setDefaultConfig(config) {\n    checkConfig(config);\n    defaultConfig = config;\n}\n\n/**\n * Get default config\n * @return {object}\n */\nfunction getDefaultConfig() {\n    return defaultConfig;\n}\n\n/**\n * Clean default config object\n */\nfunction cleanDefaultConfig() {\n    defaultConfig = undefined;\n}\n\n/**\n * Check a valid config parameter.\n *\n * @param  {object} config\n */\nfunction checkConfig(config) {\n    if (config) {\n        if (!util.isObject(config)) {\n            throw new CartoValidationError('setup', 'configObjectRequired');\n        }\n        _checkServerURL(config.serverURL);\n    }\n}\n\nfunction _checkServerURL(serverURL) {\n    if (!util.isString(serverURL)) {\n        throw new CartoValidationError('setup', 'serverURLStringRequired');\n    }\n}\n\nexport { setDefaultConfig, getDefaultConfig, checkConfig, cleanDefaultConfig };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/setup/config-service.js\n// module id = 29\n// module chunks = 0","import * as util from './util';\nimport * as s from '../core/style/functions';\nimport * as schema from '../core/schema';\nimport * as shaders from '../core/shaders';\nimport { compileShader } from '../core/style/shader-compiler';\nimport { parseStyleDefinition } from '../core/style/parser';\nimport Expression from '../core/style/expressions/expression';\nimport { implicitCast } from '../core/style/expressions/utils';\nimport CartoValidationError from './error-handling/carto-validation-error';\n\n\nconst DEFAULT_RESOLUTION = () => 1;\nconst DEFAULT_COLOR_EXPRESSION = () => s.rgba(0, 1, 0, 0.5);\nconst DEFAULT_WIDTH_EXPRESSION = () => s.float(5);\nconst DEFAULT_STROKE_COLOR_EXPRESSION = () => s.rgba(0, 1, 0, 0.5);\nconst DEFAULT_STROKE_WIDTH_EXPRESSION = () => s.float(0);\nconst DEFAULT_ORDER_EXPRESSION = () => s.noOrder();\nconst DEFAULT_FILTER_EXPRESSION = () => s.floatConstant(1);\nconst SUPPORTED_PROPERTIES = [\n    'resolution',\n    'color',\n    'width',\n    'strokeColor',\n    'strokeWidth',\n    'order',\n    'filter'\n];\n\n\nexport default class Style {\n\n    /**\n    * A Style defines how the data will be displayed: the color of the elements and size are basic things that can be\n    * managed through styles. Styles also control the element visibility, ordering or aggregation level.\n    *\n    * A Style is created from an {@link StyleSpec|styleSpec} object or from a string.\n    * Each attribute in the {@link StyleSpec|styleSpec} must be a valid {@link carto.style.expressions|expression}.\n    * Those expressions will be evaluated dynamically for every element in the dataset.\n    *\n    * @param {string|StyleSpec} definition - The definition of a style. This parameter could be a `string` or a `StyleSpec` object\n    *\n    * @example <caption> Create a style with black dots using the string constructor </caption>\n    * new carto.Style(`\n    *   color: rgb(0,0,0)\n    * `);\n    *\n    * @example <caption> Create a style with black dots using the styleSpec constructor </caption>\n    * new carto.Style({\n    *   color: carto.style.expression.rgb(0,0,0)\n    * });\n    *\n    * @fires CartoError\n    *\n    * @constructor Style\n    * @memberof carto\n    * @api\n    */\n    constructor(definition) {\n        const styleSpec = this._getStyleDefinition(definition);\n        this._checkStyleSpec(styleSpec);\n        this._styleSpec = styleSpec;\n\n        this.updated = true;\n        this._changeCallback = null;\n        this._styleSpec.color.parent = this;\n        this._styleSpec.width.parent = this;\n        this._styleSpec.strokeColor.parent = this;\n        this._styleSpec.strokeWidth.parent = this;\n        this._styleSpec.order.parent = this;\n        this._styleSpec.filter.parent = this;\n        this._styleSpec.color.notify = this._changed.bind(this);\n        this._styleSpec.width.notify = this._changed.bind(this);\n        this._styleSpec.strokeColor.notify = this._changed.bind(this);\n        this._styleSpec.strokeWidth.notify = this._changed.bind(this);\n        this._styleSpec.order.notify = this._changed.bind(this);\n        this._styleSpec.filter.notify = this._changed.bind(this);\n    }\n\n    /**\n     * Return the resolution.\n     *\n     * @return {number}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getResolution() {\n        return this._styleSpec.resolution;\n    }\n\n    /**\n     * Return the color expression.\n     *\n     * @return {carto.style.expression}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getColor() {\n        return this._styleSpec.color;\n    }\n\n    /**\n     * Return the width expression.\n     *\n     * @return {carto.style.expression}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getWidth() {\n        return this._styleSpec.width;\n    }\n\n    /**\n     * Return the strokeColor expression.\n     *\n     * @return {carto.style.expression}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getStrokeColor() {\n        return this._styleSpec.strokeColor;\n    }\n\n    /**\n     * Return the strokeWidth expression.\n     *\n     * @return {carto.style.expression}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getStrokeWidth() {\n        return this._styleSpec.strokeWidth;\n    }\n\n    /**\n     * Return the order expression.\n     *\n     * @return {carto.style.expression}\n     *\n     * @memberof carto.Style\n     * @instance\n     * @api\n     */\n    getOrder() {\n        return this._styleSpec.order;\n    }\n\n    get filter() {\n        return this._styleSpec.filter;\n    }\n\n    isAnimated() {\n        return this.getColor().isAnimated() ||\n            this.getWidth().isAnimated() ||\n            this.getStrokeColor().isAnimated() ||\n            this.getStrokeWidth().isAnimated() ||\n            this.filter.isAnimated();\n    }\n\n    onChange(callback) {\n        this._changeCallback = callback;\n    }\n\n    _changed() {\n        if (this._changeCallback) {\n            this._changeCallback();\n        }\n    }\n\n    getMinimumNeededSchema() {\n        const exprs = [\n            this._styleSpec.color,\n            this._styleSpec.width,\n            this._styleSpec.strokeColor,\n            this._styleSpec.strokeWidth,\n            this._styleSpec.filter,\n        ].filter(x => x && x._getMinimumNeededSchema);\n        return exprs.map(expr => expr._getMinimumNeededSchema()).reduce(schema.union, schema.IDENTITY);\n    }\n\n    _compileColorShader(gl, metadata) {\n        this._styleSpec.color._bind(metadata);\n        const r = compileShader(gl, this._styleSpec.color, shaders.styler.createColorShader);\n        this.propertyColorTID = r.tid;\n        this.colorShader = r.shader;\n    }\n\n    _compileWidthShader(gl, metadata) {\n        this._styleSpec.width._bind(metadata);\n        const r = compileShader(gl, this._styleSpec.width, shaders.styler.createWidthShader);\n        this.propertyWidthTID = r.tid;\n        this.widthShader = r.shader;\n    }\n\n    _compileStrokeColorShader(gl, metadata) {\n        this._styleSpec.strokeColor._bind(metadata);\n        const r = compileShader(gl, this._styleSpec.strokeColor, shaders.styler.createColorShader);\n        this.propertyStrokeColorTID = r.tid;\n        this.strokeColorShader = r.shader;\n    }\n\n    _compileStrokeWidthShader(gl, metadata) {\n        this._styleSpec.strokeWidth._bind(metadata);\n        const r = compileShader(gl, this._styleSpec.strokeWidth, shaders.styler.createWidthShader);\n        this.propertyStrokeWidthTID = r.tid;\n        this.strokeWidthShader = r.shader;\n    }\n\n    _compileFilterShader(gl, metadata) {\n        this._styleSpec.filter._bind(metadata);\n        const r = compileShader(gl, this._styleSpec.filter, shaders.styler.createFilterShader);\n        this.propertyFilterTID = r.tid;\n        this.filterShader = r.shader;\n    }\n\n    _replaceChild(toReplace, replacer) {\n        if (toReplace == this._styleSpec.color) {\n            this._styleSpec.color = replacer;\n            replacer.parent = this;\n            replacer.notify = toReplace.notify;\n        } else if (toReplace == this._styleSpec.width) {\n            this._styleSpec.width = replacer;\n            replacer.parent = this;\n            replacer.notify = toReplace.notify;\n        } else if (toReplace == this._styleSpec.strokeColor) {\n            this._styleSpec.strokeColor = replacer;\n            replacer.parent = this;\n            replacer.notify = toReplace.notify;\n        } else if (toReplace == this._styleSpec.strokeWidth) {\n            this._styleSpec.strokeWidth = replacer;\n            replacer.parent = this;\n            replacer.notify = toReplace.notify;\n        } else if (toReplace == this._styleSpec.filter) {\n            this._styleSpec.filter = replacer;\n            replacer.parent = this;\n            replacer.notify = toReplace.notify;\n        } else {\n            throw new Error('No child found');\n        }\n    }\n\n    // ^^\n\n    /**\n     * This function checks the input parameter `definition` returning always an object.\n     * If the `definition` is an object it returns the same object.\n     * If the `definition` is a string it returns the parsed string as an object.\n     * Otherwise it throws an error.\n     *\n     * @param  {string|object} definition\n     * @return {StyleSpec}\n     */\n    _getStyleDefinition(definition) {\n        if (util.isUndefined(definition)) {\n            return this._setDefaults({});\n        }\n        if (util.isObject(definition)) {\n            return this._setDefaults(definition);\n        }\n        if (util.isString(definition)) {\n            return this._setDefaults(parseStyleDefinition(definition));\n        }\n        throw new CartoValidationError('style', 'nonValidDefinition');\n    }\n\n    /**\n     * Add default values to a styleSpec object.\n     *\n     * @param {StyleSpec} styleSpec\n     * @return {StyleSpec}\n     */\n    _setDefaults(styleSpec) {\n        styleSpec.resolution = util.isUndefined(styleSpec.resolution) ? DEFAULT_RESOLUTION() : styleSpec.resolution;\n        styleSpec.color = styleSpec.color || DEFAULT_COLOR_EXPRESSION();\n        styleSpec.width = styleSpec.width || DEFAULT_WIDTH_EXPRESSION();\n        styleSpec.strokeColor = styleSpec.strokeColor || DEFAULT_STROKE_COLOR_EXPRESSION();\n        styleSpec.strokeWidth = styleSpec.strokeWidth || DEFAULT_STROKE_WIDTH_EXPRESSION();\n        styleSpec.order = styleSpec.order || DEFAULT_ORDER_EXPRESSION();\n        styleSpec.filter = styleSpec.filter || DEFAULT_FILTER_EXPRESSION();\n        return styleSpec;\n    }\n\n    _checkStyleSpec(styleSpec) {\n        /**\n         * @typedef {object} StyleSpec\n         * @property {number} resolution\n         * @property {carto.style.expressions.Expression} color\n         * @property {carto.style.expressions.Expression} width\n         * @property {carto.style.expressions.Expression} strokeColor\n         * @property {carto.style.expressions.Expression} strokeWidth\n         * @property {carto.style.expressions.Expression} order\n         * @api\n         */\n\n        // TODO: Check expression types ie: color is not a number expression!\n\n        styleSpec.width = implicitCast(styleSpec.width);\n        styleSpec.strokeWidth = implicitCast(styleSpec.strokeWidth);\n\n        if (!util.isNumber(styleSpec.resolution)) {\n            throw new CartoValidationError('style', 'resolutionNumberRequired');\n        }\n        if (!(styleSpec.color instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[color]');\n        }\n        if (!(styleSpec.strokeColor instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[strokeColor]');\n        }\n        if (!(styleSpec.width instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[width]');\n        }\n        if (!(styleSpec.strokeWidth instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[strokeWidth]');\n        }\n        if (!(styleSpec.order instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[order]');\n        }\n        if (!(styleSpec.filter instanceof Expression)) {\n            throw new CartoValidationError('style', 'nonValidExpression[filter]');\n        }\n        for (let key in styleSpec) {\n            if (SUPPORTED_PROPERTIES.indexOf(key) === -1) {\n                console.warn(`Property '${key}' is not supported`);\n            }\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/style.js\n// module id = 30\n// module chunks = 0","/**\n * @description A simple non-interactive map.\n */\n\nexport default class Map {\n\n    /**\n     * Create a simple carto.Map by specifying a container `id`.\n     *\n     * @param  {object} options\n     * @param  {string} options.container The element's string `id`.\n     *\n     * @constructor Map\n     * @memberof carto\n     */\n    constructor(options) {\n        options = options || {};\n\n        if (typeof options.container === 'string') {\n            const container = window.document.getElementById(options.container);\n            if (!container) {\n                throw new Error(`Container '${options.container}' not found.`);\n            } else {\n                this._container = container;\n            }\n        }\n        this._background = options.background || '';\n\n        this._layers = [];\n        this._repaint = true;\n        this._canvas = this._createCanvas();\n        this._container.appendChild(this._canvas);\n        this._gl = this._canvas.getContext('webgl') || this._canvas.getContext('experimental-webgl');\n\n        this._resizeCanvas(this._containerDimensions());\n    }\n\n    addLayer(layer, beforeLayerID) {\n        layer.initCallback();\n\n        let index;\n        for (index = 0; index < this._layers.length; index++) {\n            if (this._layers[index].getId() === beforeLayerID) {\n                break;\n            }\n        }\n        this._layers.splice(index, 0, layer);\n\n        window.requestAnimationFrame(this.update.bind(this));\n    }\n\n    update() {\n        this._drawBackground(this._background);\n\n        let loaded = true;\n        let animated = false;\n        this._layers.forEach((layer) => {\n            const hasData = layer.hasDataframes();\n            const hasAnimation = layer.getStyle() && layer.getStyle().isAnimated();\n            if (hasData || hasAnimation) {\n                layer.paintCallback();\n            }\n            loaded = loaded && hasData;\n            animated = animated || hasAnimation;\n        });\n\n        // Update until all layers are loaded or there is an animation\n        if (!loaded || animated) {\n            window.requestAnimationFrame(this.update.bind(this));\n        }\n    }\n\n    _drawBackground(color) {\n        switch (color) {\n            case 'black':\n                this._gl.clearColor(0, 0, 0, 1);\n                this._gl.clear(this._gl.COLOR_BUFFER_BIT);\n                break;\n            case 'red':\n                this._gl.clearColor(1, 0, 0, 1);\n                this._gl.clear(this._gl.COLOR_BUFFER_BIT);\n                break;\n            case 'green':\n                this._gl.clearColor(0, 1, 0, 1);\n                this._gl.clear(this._gl.COLOR_BUFFER_BIT);\n                break;\n            case 'blue':\n                this._gl.clearColor(0, 0, 1, 1);\n                this._gl.clear(this._gl.COLOR_BUFFER_BIT);\n                break;\n            default:\n            // white\n        }\n    }\n\n    _createCanvas() {\n        const canvas = window.document.createElement('canvas');\n\n        canvas.className = 'canvas';\n        canvas.style.position = 'absolute';\n\n        return canvas;\n    }\n\n    _containerDimensions() {\n        let width = 0;\n        let height = 0;\n\n        if (this._container) {\n            width = this._container.offsetWidth || 400;\n            height = this._container.offsetHeight || 300;\n        }\n\n        return { width, height };\n    }\n\n    _resizeCanvas(size) {\n        const pixelRatio = window.devicePixelRatio || 1;\n\n        this._canvas.width = pixelRatio * size.width;\n        this._canvas.height = pixelRatio * size.height;\n\n        this._canvas.style.width = `${size.width}px`;\n        this._canvas.style.height = `${size.height}px`;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/map.js\n// module id = 31\n// module chunks = 0","/**\n *  @api\n *  @namespace carto\n *\n *  @description\n *  The carto-gl functionality is exposed through the **carto** namespace including:\n * \n * - carto.source\n *  - {@link carto.source.Dataset|carto.source.Dataset} \n *  - {@link carto.source.SQL|carto.source.SQL}\n *  - {@link carto.source.GeoJSON|carto.source.GeoJSON}\n * - carto.style\n *  -   {@link carto.style.expressions|carto.style.expressions}\n * - {@link carto.Layer|carto.Layer}\n * - {@link carto.Style|carto.Style}\n * - {@link carto.setDefaultAuth|carto.setDefaultAuth}\n * - {@link carto.setDefaultConfig|carto.setDefaultConfig}\n */\n\nimport * as expressions from './core/style/functions';\nimport GeoJSON from './api/source/geojson';\nimport Dataset from './api/source/dataset';\nimport SQL from './api/source/sql';\nimport Layer from './api/layer';\nimport Style from './api/style';\nimport { setDefaultAuth } from './api/setup/auth-service';\nimport { setDefaultConfig } from './api/setup/config-service';\nimport Map from './api/map';\n\n// Namespaces\n\nconst style = { expressions };\nconst source = { Dataset, SQL, GeoJSON };\n\nexport {\n    source,\n    Layer,\n    setDefaultAuth,\n    setDefaultConfig,\n    style,\n    Style,\n    Map\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/index.js\n// module id = 32\n// module chunks = 0","\nimport * as cartocolor from 'cartocolor';\nimport Expression from './expression';\n\n/**\n * ### Color palettes\n *\n * Palettes are constants that allow to use {@link https://carto.com/carto-colors/|cartocolors} easily.\n * Use them with a {@link carto.style.expressions.ramp|ramp}\n *\n * The following palettes are availiable:\n *  - Categorical:\n *      - PRISM\n *      - EARTH\n *  - Numeric\n *      - ...\n *\n * @api\n * @name carto.style.expressions.palettes\n * @memberof carto.style.expressions\n *\n * @example <caption> Using a color scheme </caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  filter: s.ramp(s.property('type'), s.palettes.PRISM);\n * });\n */\nconst palettes = {};\n\nclass PaletteGenerator extends Expression {\n    constructor(name, subPalettes) {\n        super({});\n        this.type = 'palette';\n        this.name = name;\n        this.subPalettes = subPalettes;\n        this.tags = subPalettes.tags;\n    }\n    getLongestSubPalette() {\n        const s = this.subPalettes;\n        for (let i = 20; i >= 0; i--) {\n            if (s[i]) {\n                return s[i];\n            }\n        }\n    }\n}\n\nObject.keys(cartocolor).map(name => {\n    palettes[`${name.toLowerCase()}`] = new PaletteGenerator(name, cartocolor[name]);\n});\n\nclass Inverse {\n    constructor(palette) {\n        this.type = 'palette';\n        this._originalPalette = palette;\n        this.tags = palette.tags;\n        this.subPalettes = new Proxy(palette.subPalettes, {\n            get: (target, name) => {\n                if (Number.isFinite(Number(name)) && Array.isArray(target[name])) {\n                    return this._reversePalette(target[name]);\n                }\n                return target[name];\n            }\n        });\n    }\n    getLongestSubPalette() {\n        return this._reversePalette(this._originalPalette.getLongestSubPalette());\n    }\n    _reversePalette(palette) {\n        if (this.tags.includes('qualitative')) {\n            // Last color is 'others', therefore, we shouldn't change the order of that one\n            const copy = [...palette];\n            const others = copy.pop();\n            return [...copy.reverse(), others];\n\n        }\n        return [...palette].reverse();\n    }\n}\n\nexport { palettes, Inverse };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/palettes.js\n// module id = 33\n// module chunks = 0","module.exports = require('./cartocolor');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/cartocolor/index.js\n// module id = 34\n// module chunks = 0","!function() {\n\nvar cartocolor = {\n    \"Burg\": {\n        \"2\": [\n            \"#ffc6c4\",\n            \"#672044\"\n        ],\n        \"3\": [\n            \"#ffc6c4\",\n            \"#cc607d\",\n            \"#672044\"\n        ],\n        \"4\": [\n            \"#ffc6c4\",\n            \"#e38191\",\n            \"#ad466c\",\n            \"#672044\"\n        ],\n        \"5\": [\n            \"#ffc6c4\",\n            \"#ee919b\",\n            \"#cc607d\",\n            \"#9e3963\",\n            \"#672044\"\n        ],\n        \"6\": [\n            \"#ffc6c4\",\n            \"#f29ca3\",\n            \"#da7489\",\n            \"#b95073\",\n            \"#93345d\",\n            \"#672044\"\n        ],\n        \"7\": [\n            \"#ffc6c4\",\n            \"#f4a3a8\",\n            \"#e38191\",\n            \"#cc607d\",\n            \"#ad466c\",\n            \"#8b3058\",\n            \"#672044\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"BurgYl\": {\n        \"2\": [\n            \"#fbe6c5\",\n            \"#70284a\"\n        ],\n        \"3\": [\n            \"#fbe6c5\",\n            \"#dc7176\",\n            \"#70284a\"\n        ],\n        \"4\": [\n            \"#fbe6c5\",\n            \"#ee8a82\",\n            \"#c8586c\",\n            \"#70284a\"\n        ],\n        \"5\": [\n            \"#fbe6c5\",\n            \"#f2a28a\",\n            \"#dc7176\",\n            \"#b24b65\",\n            \"#70284a\"\n        ],\n        \"6\": [\n            \"#fbe6c5\",\n            \"#f4b191\",\n            \"#e7807d\",\n            \"#d06270\",\n            \"#a44360\",\n            \"#70284a\"\n        ],\n        \"7\": [\n            \"#fbe6c5\",\n            \"#f5ba98\",\n            \"#ee8a82\",\n            \"#dc7176\",\n            \"#c8586c\",\n            \"#9c3f5d\",\n            \"#70284a\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"RedOr\": {\n        \"2\": [\n            \"#f6d2a9\",\n            \"#b13f64\"\n        ],\n        \"3\": [\n            \"#f6d2a9\",\n            \"#ea8171\",\n            \"#b13f64\"\n        ],\n        \"4\": [\n            \"#f6d2a9\",\n            \"#f19c7c\",\n            \"#dd686c\",\n            \"#b13f64\"\n        ],\n        \"5\": [\n            \"#f6d2a9\",\n            \"#f3aa84\",\n            \"#ea8171\",\n            \"#d55d6a\",\n            \"#b13f64\"\n        ],\n        \"6\": [\n            \"#f6d2a9\",\n            \"#f4b28a\",\n            \"#ef9177\",\n            \"#e3726d\",\n            \"#cf5669\",\n            \"#b13f64\"\n        ],\n        \"7\": [\n            \"#f6d2a9\",\n            \"#f5b78e\",\n            \"#f19c7c\",\n            \"#ea8171\",\n            \"#dd686c\",\n            \"#ca5268\",\n            \"#b13f64\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"OrYel\": {\n        \"2\": [\n            \"#ecda9a\",\n            \"#ee4d5a\"\n        ],\n        \"3\": [\n            \"#ecda9a\",\n            \"#f7945d\",\n            \"#ee4d5a\"\n        ],\n        \"4\": [\n            \"#ecda9a\",\n            \"#f3ad6a\",\n            \"#f97b57\",\n            \"#ee4d5a\"\n        ],\n        \"5\": [\n            \"#ecda9a\",\n            \"#f1b973\",\n            \"#f7945d\",\n            \"#f86f56\",\n            \"#ee4d5a\"\n        ],\n        \"6\": [\n            \"#ecda9a\",\n            \"#f0c079\",\n            \"#f5a363\",\n            \"#f98558\",\n            \"#f76856\",\n            \"#ee4d5a\"\n        ],\n        \"7\": [\n            \"#ecda9a\",\n            \"#efc47e\",\n            \"#f3ad6a\",\n            \"#f7945d\",\n            \"#f97b57\",\n            \"#f66356\",\n            \"#ee4d5a\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Peach\": {\n        \"2\": [\n            \"#fde0c5\",\n            \"#eb4a40\"\n        ],\n        \"3\": [\n            \"#fde0c5\",\n            \"#f59e72\",\n            \"#eb4a40\"\n        ],\n        \"4\": [\n            \"#fde0c5\",\n            \"#f8b58b\",\n            \"#f2855d\",\n            \"#eb4a40\"\n        ],\n        \"5\": [\n            \"#fde0c5\",\n            \"#f9c098\",\n            \"#f59e72\",\n            \"#f17854\",\n            \"#eb4a40\"\n        ],\n        \"6\": [\n            \"#fde0c5\",\n            \"#fac7a1\",\n            \"#f7ac80\",\n            \"#f38f65\",\n            \"#f0704f\",\n            \"#eb4a40\"\n        ],\n        \"7\": [\n            \"#fde0c5\",\n            \"#facba6\",\n            \"#f8b58b\",\n            \"#f59e72\",\n            \"#f2855d\",\n            \"#ef6a4c\",\n            \"#eb4a40\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"PinkYl\": {\n        \"2\": [\n            \"#fef6b5\",\n            \"#e15383\"\n        ],\n        \"3\": [\n            \"#fef6b5\",\n            \"#ffa679\",\n            \"#e15383\"\n        ],\n        \"4\": [\n            \"#fef6b5\",\n            \"#ffc285\",\n            \"#fa8a76\",\n            \"#e15383\"\n        ],\n        \"5\": [\n            \"#fef6b5\",\n            \"#ffd08e\",\n            \"#ffa679\",\n            \"#f67b77\",\n            \"#e15383\"\n        ],\n        \"6\": [\n            \"#fef6b5\",\n            \"#ffd795\",\n            \"#ffb77f\",\n            \"#fd9576\",\n            \"#f37378\",\n            \"#e15383\"\n        ],\n        \"7\": [\n            \"#fef6b5\",\n            \"#ffdd9a\",\n            \"#ffc285\",\n            \"#ffa679\",\n            \"#fa8a76\",\n            \"#f16d7a\",\n            \"#e15383\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Mint\": {\n        \"2\": [\n            \"#e4f1e1\",\n            \"#0d585f\"\n        ],\n        \"3\": [\n            \"#e4f1e1\",\n            \"#63a6a0\",\n            \"#0d585f\"\n        ],\n        \"4\": [\n            \"#e4f1e1\",\n            \"#89c0b6\",\n            \"#448c8a\",\n            \"#0d585f\"\n        ],\n        \"5\": [\n            \"#E4F1E1\",\n            \"#9CCDC1\",\n            \"#63A6A0\",\n            \"#337F7F\",\n            \"#0D585F\"\n        ],\n        \"6\": [\n            \"#e4f1e1\",\n            \"#abd4c7\",\n            \"#7ab5ad\",\n            \"#509693\",\n            \"#2c7778\",\n            \"#0d585f\"\n        ],\n        \"7\": [\n            \"#e4f1e1\",\n            \"#b4d9cc\",\n            \"#89c0b6\",\n            \"#63a6a0\",\n            \"#448c8a\",\n            \"#287274\",\n            \"#0d585f\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"BluGrn\": {\n        \"2\": [\n            \"#c4e6c3\",\n            \"#1d4f60\"\n        ],\n        \"3\": [\n            \"#c4e6c3\",\n            \"#4da284\",\n            \"#1d4f60\"\n        ],\n        \"4\": [\n            \"#c4e6c3\",\n            \"#6dbc90\",\n            \"#36877a\",\n            \"#1d4f60\"\n        ],\n        \"5\": [\n            \"#c4e6c3\",\n            \"#80c799\",\n            \"#4da284\",\n            \"#2d7974\",\n            \"#1d4f60\"\n        ],\n        \"6\": [\n            \"#c4e6c3\",\n            \"#8dce9f\",\n            \"#5fb28b\",\n            \"#3e927e\",\n            \"#297071\",\n            \"#1d4f60\"\n        ],\n        \"7\": [\n            \"#c4e6c3\",\n            \"#96d2a4\",\n            \"#6dbc90\",\n            \"#4da284\",\n            \"#36877a\",\n            \"#266b6e\",\n            \"#1d4f60\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"DarkMint\": {\n        \"2\": [\n            \"#d2fbd4\",\n            \"#123f5a\"\n        ],\n        \"3\": [\n            \"#d2fbd4\",\n            \"#559c9e\",\n            \"#123f5a\"\n        ],\n        \"4\": [\n            \"#d2fbd4\",\n            \"#7bbcb0\",\n            \"#3a7c89\",\n            \"#123f5a\"\n        ],\n        \"5\": [\n            \"#d2fbd4\",\n            \"#8eccb9\",\n            \"#559c9e\",\n            \"#2b6c7f\",\n            \"#123f5a\"\n        ],\n        \"6\": [\n            \"#d2fbd4\",\n            \"#9cd5be\",\n            \"#6cafa9\",\n            \"#458892\",\n            \"#266377\",\n            \"#123f5a\"\n        ],\n        \"7\": [\n            \"#d2fbd4\",\n            \"#a5dbc2\",\n            \"#7bbcb0\",\n            \"#559c9e\",\n            \"#3a7c89\",\n            \"#235d72\",\n            \"#123f5a\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Emrld\": {\n        \"2\": [\n            \"#d3f2a3\",\n            \"#074050\"\n        ],\n        \"3\": [\n            \"#d3f2a3\",\n            \"#4c9b82\",\n            \"#074050\"\n        ],\n        \"4\": [\n            \"#d3f2a3\",\n            \"#6cc08b\",\n            \"#217a79\",\n            \"#074050\"\n        ],\n        \"5\": [\n            \"#d3f2a3\",\n            \"#82d091\",\n            \"#4c9b82\",\n            \"#19696f\",\n            \"#074050\"\n        ],\n        \"6\": [\n            \"#d3f2a3\",\n            \"#8fda94\",\n            \"#60b187\",\n            \"#35877d\",\n            \"#145f69\",\n            \"#074050\"\n        ],\n        \"7\": [\n            \"#d3f2a3\",\n            \"#97e196\",\n            \"#6cc08b\",\n            \"#4c9b82\",\n            \"#217a79\",\n            \"#105965\",\n            \"#074050\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"ag_GrnYl\": {\n        \"2\": [\n            \"#245668\",\n            \"#EDEF5D\"\n        ],\n        \"3\": [\n            \"#245668\",\n            \"#39AB7E\",\n            \"#EDEF5D\"\n        ],\n        \"4\": [\n            \"#245668\",\n            \"#0D8F81\",\n            \"#6EC574\",\n            \"#EDEF5D\"\n        ],\n        \"5\": [\n            \"#245668\",\n            \"#04817E\",\n            \"#39AB7E\",\n            \"#8BD16D\",\n            \"#EDEF5D\"\n        ],\n        \"6\": [\n            \"#245668\",\n            \"#09787C\",\n            \"#1D9A81\",\n            \"#58BB79\",\n            \"#9DD869\",\n            \"#EDEF5D\"\n        ],\n        \"7\": [\n            \"#245668\",\n            \"#0F7279\",\n            \"#0D8F81\",\n            \"#39AB7E\",\n            \"#6EC574\",\n            \"#A9DC67\",\n            \"#EDEF5D\"\n        ],\n        \"tags\": [\n            \"aggregation\"\n        ]\n    },\n    \"BluYl\": {\n        \"2\": [\n            \"#f7feae\",\n            \"#045275\"\n        ],\n        \"3\": [\n            \"#f7feae\",\n            \"#46aea0\",\n            \"#045275\"\n        ],\n        \"4\": [\n            \"#f7feae\",\n            \"#7ccba2\",\n            \"#089099\",\n            \"#045275\"\n        ],\n        \"5\": [\n            \"#f7feae\",\n            \"#9bd8a4\",\n            \"#46aea0\",\n            \"#058092\",\n            \"#045275\"\n        ],\n        \"6\": [\n            \"#f7feae\",\n            \"#ace1a4\",\n            \"#68bfa1\",\n            \"#2a9c9c\",\n            \"#02778e\",\n            \"#045275\"\n        ],\n        \"7\": [\n            \"#f7feae\",\n            \"#b7e6a5\",\n            \"#7ccba2\",\n            \"#46aea0\",\n            \"#089099\",\n            \"#00718b\",\n            \"#045275\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Teal\": {\n        \"2\": [\n            \"#d1eeea\",\n            \"#2a5674\"\n        ],\n        \"3\": [\n            \"#d1eeea\",\n            \"#68abb8\",\n            \"#2a5674\"\n        ],\n        \"4\": [\n            \"#d1eeea\",\n            \"#85c4c9\",\n            \"#4f90a6\",\n            \"#2a5674\"\n        ],\n        \"5\": [\n            \"#d1eeea\",\n            \"#96d0d1\",\n            \"#68abb8\",\n            \"#45829b\",\n            \"#2a5674\"\n        ],\n        \"6\": [\n            \"#d1eeea\",\n            \"#a1d7d6\",\n            \"#79bbc3\",\n            \"#599bae\",\n            \"#3f7994\",\n            \"#2a5674\"\n        ],\n        \"7\": [\n            \"#d1eeea\",\n            \"#a8dbd9\",\n            \"#85c4c9\",\n            \"#68abb8\",\n            \"#4f90a6\",\n            \"#3b738f\",\n            \"#2a5674\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"TealGrn\": {\n        \"2\": [\n            \"#b0f2bc\",\n            \"#257d98\"\n        ],\n        \"3\": [\n            \"#b0f2bc\",\n            \"#4cc8a3\",\n            \"#257d98\"\n        ],\n        \"4\": [\n            \"#b0f2bc\",\n            \"#67dba5\",\n            \"#38b2a3\",\n            \"#257d98\"\n        ],\n        \"5\": [\n            \"#b0f2bc\",\n            \"#77e2a8\",\n            \"#4cc8a3\",\n            \"#31a6a2\",\n            \"#257d98\"\n        ],\n        \"6\": [\n            \"#b0f2bc\",\n            \"#82e6aa\",\n            \"#5bd4a4\",\n            \"#3fbba3\",\n            \"#2e9ea1\",\n            \"#257d98\"\n        ],\n        \"7\": [\n            \"#b0f2bc\",\n            \"#89e8ac\",\n            \"#67dba5\",\n            \"#4cc8a3\",\n            \"#38b2a3\",\n            \"#2c98a0\",\n            \"#257d98\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Purp\": {\n        \"2\": [\n            \"#f3e0f7\",\n            \"#63589f\"\n        ],\n        \"3\": [\n            \"#f3e0f7\",\n            \"#b998dd\",\n            \"#63589f\"\n        ],\n        \"4\": [\n            \"#f3e0f7\",\n            \"#d1afe8\",\n            \"#9f82ce\",\n            \"#63589f\"\n        ],\n        \"5\": [\n            \"#f3e0f7\",\n            \"#dbbaed\",\n            \"#b998dd\",\n            \"#9178c4\",\n            \"#63589f\"\n        ],\n        \"6\": [\n            \"#f3e0f7\",\n            \"#e0c2ef\",\n            \"#c8a5e4\",\n            \"#aa8bd4\",\n            \"#8871be\",\n            \"#63589f\"\n        ],\n        \"7\": [\n            \"#f3e0f7\",\n            \"#e4c7f1\",\n            \"#d1afe8\",\n            \"#b998dd\",\n            \"#9f82ce\",\n            \"#826dba\",\n            \"#63589f\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"PurpOr\": {\n        \"3\": [\n            \"#f9ddda\",\n            \"#ce78b3\",\n            \"#573b88\"\n        ],\n        \"4\": [\n            \"#f9ddda\",\n            \"#e597b9\",\n            \"#ad5fad\",\n            \"#573b88\"\n        ],\n        \"5\": [\n            \"#f9ddda\",\n            \"#eda8bd\",\n            \"#ce78b3\",\n            \"#9955a8\",\n            \"#573b88\"\n        ],\n        \"6\": [\n            \"#f9ddda\",\n            \"#f0b2c1\",\n            \"#dd8ab6\",\n            \"#bb69b0\",\n            \"#8c4fa4\",\n            \"#573b88\"\n        ],\n        \"7\": [\n            \"#f9ddda\",\n            \"#f2b9c4\",\n            \"#e597b9\",\n            \"#ce78b3\",\n            \"#ad5fad\",\n            \"#834ba0\",\n            \"#573b88\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Sunset\": {\n        \"2\": [\n            \"#f3e79b\",\n            \"#5c53a5\"\n        ],\n        \"3\": [\n            \"#f3e79b\",\n            \"#eb7f86\",\n            \"#5c53a5\"\n        ],\n        \"4\": [\n            \"#f3e79b\",\n            \"#f8a07e\",\n            \"#ce6693\",\n            \"#5c53a5\"\n        ],\n        \"5\": [\n            \"#f3e79b\",\n            \"#fab27f\",\n            \"#eb7f86\",\n            \"#b95e9a\",\n            \"#5c53a5\"\n        ],\n        \"6\": [\n            \"#f3e79b\",\n            \"#fabc82\",\n            \"#f59280\",\n            \"#dc6f8e\",\n            \"#ab5b9e\",\n            \"#5c53a5\"\n        ],\n        \"7\": [\n            \"#f3e79b\",\n            \"#fac484\",\n            \"#f8a07e\",\n            \"#eb7f86\",\n            \"#ce6693\",\n            \"#a059a0\",\n            \"#5c53a5\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"Magenta\": {\n        \"2\": [\n            \"#f3cbd3\",\n            \"#6c2167\"\n        ],\n        \"3\": [\n            \"#f3cbd3\",\n            \"#ca699d\",\n            \"#6c2167\"\n        ],\n        \"4\": [\n            \"#f3cbd3\",\n            \"#dd88ac\",\n            \"#b14d8e\",\n            \"#6c2167\"\n        ],\n        \"5\": [\n            \"#f3cbd3\",\n            \"#e498b4\",\n            \"#ca699d\",\n            \"#a24186\",\n            \"#6c2167\"\n        ],\n        \"6\": [\n            \"#f3cbd3\",\n            \"#e7a2b9\",\n            \"#d67ba5\",\n            \"#bc5894\",\n            \"#983a81\",\n            \"#6c2167\"\n        ],\n        \"7\": [\n            \"#f3cbd3\",\n            \"#eaa9bd\",\n            \"#dd88ac\",\n            \"#ca699d\",\n            \"#b14d8e\",\n            \"#91357d\",\n            \"#6c2167\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"SunsetDark\": {\n        \"2\": [\n            \"#fcde9c\",\n            \"#7c1d6f\"\n        ],\n        \"3\": [\n            \"#fcde9c\",\n            \"#e34f6f\",\n            \"#7c1d6f\"\n        ],\n        \"4\": [\n            \"#fcde9c\",\n            \"#f0746e\",\n            \"#dc3977\",\n            \"#7c1d6f\"\n        ],\n        \"5\": [\n            \"#fcde9c\",\n            \"#f58670\",\n            \"#e34f6f\",\n            \"#d72d7c\",\n            \"#7c1d6f\"\n        ],\n        \"6\": [\n            \"#fcde9c\",\n            \"#f89872\",\n            \"#ec666d\",\n            \"#df4273\",\n            \"#c5287b\",\n            \"#7c1d6f\"\n        ],\n        \"7\": [\n            \"#fcde9c\",\n            \"#faa476\",\n            \"#f0746e\",\n            \"#e34f6f\",\n            \"#dc3977\",\n            \"#b9257a\",\n            \"#7c1d6f\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"ag_Sunset\": {\n        \"2\": [\n            \"#4b2991\",\n            \"#edd9a3\"\n        ],\n        \"3\": [\n            \"#4b2991\",\n            \"#ea4f88\",\n            \"#edd9a3\"\n        ],\n        \"4\": [\n            \"#4b2991\",\n            \"#c0369d\",\n            \"#fa7876\",\n            \"#edd9a3\"\n        ],\n        \"5\": [\n            \"#4b2991\",\n            \"#a52fa2\",\n            \"#ea4f88\",\n            \"#fa9074\",\n            \"#edd9a3\"\n        ],\n        \"6\": [\n            \"#4b2991\",\n            \"#932da3\",\n            \"#d43f96\",\n            \"#f7667c\",\n            \"#f89f77\",\n            \"#edd9a3\"\n        ],\n        \"7\": [\n            \"#4b2991\",\n            \"#872ca2\",\n            \"#c0369d\",\n            \"#ea4f88\",\n            \"#fa7876\",\n            \"#f6a97a\",\n            \"#edd9a3\"\n        ],\n        \"tags\": [\n            \"aggregation\"\n        ]\n    },\n    \"BrwnYl\": {\n        \"2\": [\n            \"#ede5cf\",\n            \"#541f3f\"\n        ],\n        \"3\": [\n            \"#ede5cf\",\n            \"#c1766f\",\n            \"#541f3f\"\n        ],\n        \"4\": [\n            \"#ede5cf\",\n            \"#d39c83\",\n            \"#a65461\",\n            \"#541f3f\"\n        ],\n        \"5\": [\n            \"#ede5cf\",\n            \"#daaf91\",\n            \"#c1766f\",\n            \"#95455a\",\n            \"#541f3f\"\n        ],\n        \"6\": [\n            \"#ede5cf\",\n            \"#ddba9b\",\n            \"#cd8c7a\",\n            \"#b26166\",\n            \"#8a3c56\",\n            \"#541f3f\"\n        ],\n        \"7\": [\n            \"#ede5cf\",\n            \"#e0c2a2\",\n            \"#d39c83\",\n            \"#c1766f\",\n            \"#a65461\",\n            \"#813753\",\n            \"#541f3f\"\n        ],\n        \"tags\": [\n            \"quantitative\"\n        ]\n    },\n    \"ArmyRose\": {\n        \"2\": [\n            \"#929b4f\",\n            \"#db8195\"\n        ],\n        \"3\": [\n            \"#a3ad62\",\n            \"#fdfbe4\",\n            \"#df91a3\"\n        ],\n        \"4\": [\n            \"#929b4f\",\n            \"#d9dbaf\",\n            \"#f3d1ca\",\n            \"#db8195\"\n        ],\n        \"5\": [\n            \"#879043\",\n            \"#c1c68c\",\n            \"#fdfbe4\",\n            \"#ebb4b8\",\n            \"#d8758b\"\n        ],\n        \"6\": [\n            \"#7f883b\",\n            \"#b0b874\",\n            \"#e3e4be\",\n            \"#f6ddd1\",\n            \"#e4a0ac\",\n            \"#d66d85\"\n        ],\n        \"7\": [\n            \"#798234\",\n            \"#a3ad62\",\n            \"#d0d3a2\",\n            \"#fdfbe4\",\n            \"#f0c6c3\",\n            \"#df91a3\",\n            \"#d46780\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Fall\": {\n        \"2\": [\n            \"#3d5941\",\n            \"#ca562c\"\n        ],\n        \"3\": [\n            \"#3d5941\",\n            \"#f6edbd\",\n            \"#ca562c\"\n        ],\n        \"4\": [\n            \"#3d5941\",\n            \"#b5b991\",\n            \"#edbb8a\",\n            \"#ca562c\"\n        ],\n        \"5\": [\n            \"#3d5941\",\n            \"#96a07c\",\n            \"#f6edbd\",\n            \"#e6a272\",\n            \"#ca562c\"\n        ],\n        \"6\": [\n            \"#3d5941\",\n            \"#839170\",\n            \"#cecea2\",\n            \"#f1cf9e\",\n            \"#e19464\",\n            \"#ca562c\"\n        ],\n        \"7\": [\n            \"#3d5941\",\n            \"#778868\",\n            \"#b5b991\",\n            \"#f6edbd\",\n            \"#edbb8a\",\n            \"#de8a5a\",\n            \"#ca562c\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Geyser\": {\n        \"2\": [\n            \"#008080\",\n            \"#ca562c\"\n        ],\n        \"3\": [\n            \"#008080\",\n            \"#f6edbd\",\n            \"#ca562c\"\n        ],\n        \"4\": [\n            \"#008080\",\n            \"#b4c8a8\",\n            \"#edbb8a\",\n            \"#ca562c\"\n        ],\n        \"5\": [\n            \"#008080\",\n            \"#92b69e\",\n            \"#f6edbd\",\n            \"#e6a272\",\n            \"#ca562c\"\n        ],\n        \"6\": [\n            \"#008080\",\n            \"#7eab98\",\n            \"#ced7b1\",\n            \"#f1cf9e\",\n            \"#e19464\",\n            \"#ca562c\"\n        ],\n        \"7\": [\n            \"#008080\",\n            \"#70a494\",\n            \"#b4c8a8\",\n            \"#f6edbd\",\n            \"#edbb8a\",\n            \"#de8a5a\",\n            \"#ca562c\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Temps\": {\n        \"2\": [\n            \"#009392\",\n            \"#cf597e\"\n        ],\n        \"3\": [\n            \"#009392\",\n            \"#e9e29c\",\n            \"#cf597e\"\n        ],\n        \"4\": [\n            \"#009392\",\n            \"#9ccb86\",\n            \"#eeb479\",\n            \"#cf597e\"\n        ],\n        \"5\": [\n            \"#009392\",\n            \"#71be83\",\n            \"#e9e29c\",\n            \"#ed9c72\",\n            \"#cf597e\"\n        ],\n        \"6\": [\n            \"#009392\",\n            \"#52b684\",\n            \"#bcd48c\",\n            \"#edc783\",\n            \"#eb8d71\",\n            \"#cf597e\"\n        ],\n        \"7\": [\n            \"#009392\",\n            \"#39b185\",\n            \"#9ccb86\",\n            \"#e9e29c\",\n            \"#eeb479\",\n            \"#e88471\",\n            \"#cf597e\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"TealRose\": {\n        \"2\": [\n            \"#009392\",\n            \"#d0587e\"\n        ],\n        \"3\": [\n            \"#009392\",\n            \"#f1eac8\",\n            \"#d0587e\"\n        ],\n        \"4\": [\n            \"#009392\",\n            \"#91b8aa\",\n            \"#f1eac8\",\n            \"#dfa0a0\",\n            \"#d0587e\"\n        ],\n        \"5\": [\n            \"#009392\",\n            \"#91b8aa\",\n            \"#f1eac8\",\n            \"#dfa0a0\",\n            \"#d0587e\"\n        ],\n        \"6\": [\n            \"#009392\",\n            \"#72aaa1\",\n            \"#b1c7b3\",\n            \"#e5b9ad\",\n            \"#d98994\",\n            \"#d0587e\"\n        ],\n        \"7\": [\n            \"#009392\",\n            \"#72aaa1\",\n            \"#b1c7b3\",\n            \"#f1eac8\",\n            \"#e5b9ad\",\n            \"#d98994\",\n            \"#d0587e\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Tropic\": {\n        \"2\": [\n            \"#009B9E\",\n            \"#C75DAB\"\n        ],\n        \"3\": [\n            \"#009B9E\",\n            \"#F1F1F1\",\n            \"#C75DAB\"\n        ],\n        \"4\": [\n            \"#009B9E\",\n            \"#A7D3D4\",\n            \"#E4C1D9\",\n            \"#C75DAB\"\n        ],\n        \"5\": [\n            \"#009B9E\",\n            \"#7CC5C6\",\n            \"#F1F1F1\",\n            \"#DDA9CD\",\n            \"#C75DAB\"\n        ],\n        \"6\": [\n            \"#009B9E\",\n            \"#5DBCBE\",\n            \"#C6DFDF\",\n            \"#E9D4E2\",\n            \"#D99BC6\",\n            \"#C75DAB\"\n        ],\n        \"7\": [\n            \"#009B9E\",\n            \"#42B7B9\",\n            \"#A7D3D4\",\n            \"#F1F1F1\",\n            \"#E4C1D9\",\n            \"#D691C1\",\n            \"#C75DAB\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Earth\": {\n        \"2\": [\n            \"#A16928\",\n            \"#2887a1\"\n        ],\n        \"3\": [\n            \"#A16928\",\n            \"#edeac2\",\n            \"#2887a1\"\n        ],\n        \"4\": [\n            \"#A16928\",\n            \"#d6bd8d\",\n            \"#b5c8b8\",\n            \"#2887a1\"\n        ],\n        \"5\": [\n            \"#A16928\",\n            \"#caa873\",\n            \"#edeac2\",\n            \"#98b7b2\",\n            \"#2887a1\"\n        ],\n        \"6\": [\n            \"#A16928\",\n            \"#c29b64\",\n            \"#e0cfa2\",\n            \"#cbd5bc\",\n            \"#85adaf\",\n            \"#2887a1\"\n        ],\n        \"7\": [\n            \"#A16928\",\n            \"#bd925a\",\n            \"#d6bd8d\",\n            \"#edeac2\",\n            \"#b5c8b8\",\n            \"#79a7ac\",\n            \"#2887a1\"\n        ],\n        \"tags\": [\n            \"diverging\"\n        ]\n    },\n    \"Antique\": {\n        \"2\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#7C7C7C\"\n        ],\n        \"3\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#7C7C7C\"\n        ],\n        \"4\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#7C7C7C\"\n        ],\n        \"5\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#7C7C7C\"\n        ],\n        \"6\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#7C7C7C\"\n        ],\n        \"7\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#68855C\",\n            \"#7C7C7C\"\n        ],\n        \"8\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#68855C\",\n            \"#9C9C5E\",\n            \"#7C7C7C\"\n        ],\n        \"9\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#68855C\",\n            \"#9C9C5E\",\n            \"#A06177\",\n            \"#7C7C7C\"\n        ],\n        \"10\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#68855C\",\n            \"#9C9C5E\",\n            \"#A06177\",\n            \"#8C785D\",\n            \"#7C7C7C\"\n        ],\n        \"11\": [\n            \"#855C75\",\n            \"#D9AF6B\",\n            \"#AF6458\",\n            \"#736F4C\",\n            \"#526A83\",\n            \"#625377\",\n            \"#68855C\",\n            \"#9C9C5E\",\n            \"#A06177\",\n            \"#8C785D\",\n            \"#467378\",\n            \"#7C7C7C\"\n        ],\n        \"tags\": [\n            \"qualitative\"\n        ]\n    },\n    \"Bold\": {\n        \"2\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#A5AA99\"\n        ],\n        \"3\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#A5AA99\"\n        ],\n        \"4\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#A5AA99\"\n        ],\n        \"5\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#A5AA99\"\n        ],\n        \"6\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#A5AA99\"\n        ],\n        \"7\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#E68310\",\n            \"#A5AA99\"\n        ],\n        \"8\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#E68310\",\n            \"#008695\",\n            \"#A5AA99\"\n        ],\n        \"9\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#E68310\",\n            \"#008695\",\n            \"#CF1C90\",\n            \"#A5AA99\"\n        ],\n        \"10\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#E68310\",\n            \"#008695\",\n            \"#CF1C90\",\n            \"#f97b72\",\n            \"#A5AA99\"\n        ],\n        \"11\": [\n            \"#7F3C8D\",\n            \"#11A579\",\n            \"#3969AC\",\n            \"#F2B701\",\n            \"#E73F74\",\n            \"#80BA5A\",\n            \"#E68310\",\n            \"#008695\",\n            \"#CF1C90\",\n            \"#f97b72\",\n            \"#4b4b8f\",\n            \"#A5AA99\"\n        ],\n        \"tags\": [\n            \"qualitative\"\n        ]\n    },\n    \"Pastel\": {\n        \"2\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#B3B3B3\"\n        ],\n        \"3\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#B3B3B3\"\n        ],\n        \"4\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#B3B3B3\"\n        ],\n        \"5\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#B3B3B3\"\n        ],\n        \"6\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#B3B3B3\"\n        ],\n        \"7\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#FE88B1\",\n            \"#B3B3B3\"\n        ],\n        \"8\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#FE88B1\",\n            \"#C9DB74\",\n            \"#B3B3B3\"\n        ],\n        \"9\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#FE88B1\",\n            \"#C9DB74\",\n            \"#8BE0A4\",\n            \"#B3B3B3\"\n        ],\n        \"10\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#FE88B1\",\n            \"#C9DB74\",\n            \"#8BE0A4\",\n            \"#B497E7\",\n            \"#B3B3B3\"\n        ],\n        \"11\": [\n            \"#66C5CC\",\n            \"#F6CF71\",\n            \"#F89C74\",\n            \"#DCB0F2\",\n            \"#87C55F\",\n            \"#9EB9F3\",\n            \"#FE88B1\",\n            \"#C9DB74\",\n            \"#8BE0A4\",\n            \"#B497E7\",\n            \"#D3B484\",\n            \"#B3B3B3\"\n        ],\n        \"tags\": [\n            \"qualitative\"\n        ]\n    },\n    \"Prism\": {\n        \"2\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#666666\"\n        ],\n        \"3\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#666666\"\n        ],\n        \"4\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#666666\"\n        ],\n        \"5\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#666666\"\n        ],\n        \"6\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#666666\"\n        ],\n        \"7\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#E17C05\",\n            \"#666666\"\n        ],\n        \"8\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#E17C05\",\n            \"#CC503E\",\n            \"#666666\"\n        ],\n        \"9\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#E17C05\",\n            \"#CC503E\",\n            \"#94346E\",\n            \"#666666\"\n        ],\n        \"10\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#E17C05\",\n            \"#CC503E\",\n            \"#94346E\",\n            \"#6F4070\",\n            \"#666666\"\n        ],\n        \"11\": [\n            \"#5F4690\",\n            \"#1D6996\",\n            \"#38A6A5\",\n            \"#0F8554\",\n            \"#73AF48\",\n            \"#EDAD08\",\n            \"#E17C05\",\n            \"#CC503E\",\n            \"#94346E\",\n            \"#6F4070\",\n            \"#994E95\",\n            \"#666666\"\n        ],\n        \"tags\": [\n            \"qualitative\"\n        ]\n    },\n    \"Safe\": {\n        \"2\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#888888\"\n        ],\n        \"3\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#888888\"\n        ],\n        \"4\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#888888\"\n        ],\n        \"5\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#888888\"\n        ],\n        \"6\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#888888\"\n        ],\n        \"7\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#44AA99\",\n            \"#888888\"\n        ],\n        \"8\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#44AA99\",\n            \"#999933\",\n            \"#888888\"\n        ],\n        \"9\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#44AA99\",\n            \"#999933\",\n            \"#882255\",\n            \"#888888\"\n        ],\n        \"10\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#44AA99\",\n            \"#999933\",\n            \"#882255\",\n            \"#661100\",\n            \"#888888\"\n        ],\n        \"11\": [\n            \"#88CCEE\",\n            \"#CC6677\",\n            \"#DDCC77\",\n            \"#117733\",\n            \"#332288\",\n            \"#AA4499\",\n            \"#44AA99\",\n            \"#999933\",\n            \"#882255\",\n            \"#661100\",\n            \"#6699CC\",\n            \"#888888\"\n        ],\n        \"tags\": [\n            \"qualitative\",\n            \"colorblind\"\n        ]\n    },\n    \"Vivid\": {\n        \"2\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#A5AA99\"\n        ],\n        \"3\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#A5AA99\"\n        ],\n        \"4\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#A5AA99\"\n        ],\n        \"5\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#A5AA99\"\n        ],\n        \"6\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#A5AA99\"\n        ],\n        \"7\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#DAA51B\",\n            \"#A5AA99\"\n        ],\n        \"8\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#DAA51B\",\n            \"#2F8AC4\",\n            \"#A5AA99\"\n        ],\n        \"9\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#DAA51B\",\n            \"#2F8AC4\",\n            \"#764E9F\",\n            \"#A5AA99\"\n        ],\n        \"10\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#DAA51B\",\n            \"#2F8AC4\",\n            \"#764E9F\",\n            \"#ED645A\",\n            \"#A5AA99\"\n        ],\n        \"11\": [\n            \"#E58606\",\n            \"#5D69B1\",\n            \"#52BCA3\",\n            \"#99C945\",\n            \"#CC61B0\",\n            \"#24796C\",\n            \"#DAA51B\",\n            \"#2F8AC4\",\n            \"#764E9F\",\n            \"#ED645A\",\n            \"#CC3A8E\",\n            \"#A5AA99\"\n        ],\n        \"tags\": [\n            \"qualitative\"\n        ]\n    }\n};\n\nvar colorbrewer_tags = {\n  \"Blues\": { \"tags\": [\"quantitative\"] },\n  \"BrBG\": { \"tags\": [\"diverging\"] },\n  \"Greys\": { \"tags\": [\"quantitative\"] },\n  \"PiYG\": { \"tags\": [\"diverging\"] },\n  \"PRGn\": { \"tags\": [\"diverging\"] },\n  \"Purples\": { \"tags\": [\"quantitative\"] },\n  \"RdYlGn\": { \"tags\": [\"diverging\"] },\n  \"Spectral\": { \"tags\": [\"diverging\"] },\n  \"YlOrBr\": { \"tags\": [\"quantitative\"] },\n  \"YlGn\": { \"tags\": [\"quantitative\"] },\n  \"YlGnBu\": { \"tags\": [\"quantitative\"] },\n  \"YlOrRd\": { \"tags\": [\"quantitative\"] }\n}\n\nvar colorbrewer = require('colorbrewer');\n\n// augment colorbrewer with tags\nfor (var r in colorbrewer) {\n  var ramps = colorbrewer[r];\n  var augmentedRamps = {};\n  for (var i in ramps) {\n    augmentedRamps[i] = ramps[i];\n  }\n\n  if (r in colorbrewer_tags) {\n    augmentedRamps.tags = colorbrewer_tags[r].tags;\n  }\n\n  cartocolor['cb_' + r] = augmentedRamps;\n}\n\nif (typeof define === \"function\" && define.amd) {\n    define(cartocolor);\n} else if (typeof module === \"object\" && module.exports) {\n    module.exports = cartocolor;\n} else {\n    this.colorbrewer = cartocolor;\n}\n\n}();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/cartocolor/cartocolor.js\n// module id = 35\n// module chunks = 0","module.exports = require('./colorbrewer.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/colorbrewer/index.js\n// module id = 36\n// module chunks = 0","// This product includes color specifications and designs developed by Cynthia Brewer (http://colorbrewer.org/).\n// JavaScript specs as packaged in the D3 library (d3js.org). Please see license at http://colorbrewer.org/export/LICENSE.txt\n!function() {\n\nvar colorbrewer = {YlGn: {\n3: [\"#f7fcb9\",\"#addd8e\",\"#31a354\"],\n4: [\"#ffffcc\",\"#c2e699\",\"#78c679\",\"#238443\"],\n5: [\"#ffffcc\",\"#c2e699\",\"#78c679\",\"#31a354\",\"#006837\"],\n6: [\"#ffffcc\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#31a354\",\"#006837\"],\n7: [\"#ffffcc\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#005a32\"],\n8: [\"#ffffe5\",\"#f7fcb9\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#005a32\"],\n9: [\"#ffffe5\",\"#f7fcb9\",\"#d9f0a3\",\"#addd8e\",\"#78c679\",\"#41ab5d\",\"#238443\",\"#006837\",\"#004529\"]\n},YlGnBu: {\n3: [\"#edf8b1\",\"#7fcdbb\",\"#2c7fb8\"],\n4: [\"#ffffcc\",\"#a1dab4\",\"#41b6c4\",\"#225ea8\"],\n5: [\"#ffffcc\",\"#a1dab4\",\"#41b6c4\",\"#2c7fb8\",\"#253494\"],\n6: [\"#ffffcc\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#2c7fb8\",\"#253494\"],\n7: [\"#ffffcc\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#0c2c84\"],\n8: [\"#ffffd9\",\"#edf8b1\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#0c2c84\"],\n9: [\"#ffffd9\",\"#edf8b1\",\"#c7e9b4\",\"#7fcdbb\",\"#41b6c4\",\"#1d91c0\",\"#225ea8\",\"#253494\",\"#081d58\"]\n},GnBu: {\n3: [\"#e0f3db\",\"#a8ddb5\",\"#43a2ca\"],\n4: [\"#f0f9e8\",\"#bae4bc\",\"#7bccc4\",\"#2b8cbe\"],\n5: [\"#f0f9e8\",\"#bae4bc\",\"#7bccc4\",\"#43a2ca\",\"#0868ac\"],\n6: [\"#f0f9e8\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#43a2ca\",\"#0868ac\"],\n7: [\"#f0f9e8\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#08589e\"],\n8: [\"#f7fcf0\",\"#e0f3db\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#08589e\"],\n9: [\"#f7fcf0\",\"#e0f3db\",\"#ccebc5\",\"#a8ddb5\",\"#7bccc4\",\"#4eb3d3\",\"#2b8cbe\",\"#0868ac\",\"#084081\"]\n},BuGn: {\n3: [\"#e5f5f9\",\"#99d8c9\",\"#2ca25f\"],\n4: [\"#edf8fb\",\"#b2e2e2\",\"#66c2a4\",\"#238b45\"],\n5: [\"#edf8fb\",\"#b2e2e2\",\"#66c2a4\",\"#2ca25f\",\"#006d2c\"],\n6: [\"#edf8fb\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#2ca25f\",\"#006d2c\"],\n7: [\"#edf8fb\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#005824\"],\n8: [\"#f7fcfd\",\"#e5f5f9\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#005824\"],\n9: [\"#f7fcfd\",\"#e5f5f9\",\"#ccece6\",\"#99d8c9\",\"#66c2a4\",\"#41ae76\",\"#238b45\",\"#006d2c\",\"#00441b\"]\n},PuBuGn: {\n3: [\"#ece2f0\",\"#a6bddb\",\"#1c9099\"],\n4: [\"#f6eff7\",\"#bdc9e1\",\"#67a9cf\",\"#02818a\"],\n5: [\"#f6eff7\",\"#bdc9e1\",\"#67a9cf\",\"#1c9099\",\"#016c59\"],\n6: [\"#f6eff7\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#1c9099\",\"#016c59\"],\n7: [\"#f6eff7\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016450\"],\n8: [\"#fff7fb\",\"#ece2f0\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016450\"],\n9: [\"#fff7fb\",\"#ece2f0\",\"#d0d1e6\",\"#a6bddb\",\"#67a9cf\",\"#3690c0\",\"#02818a\",\"#016c59\",\"#014636\"]\n},PuBu: {\n3: [\"#ece7f2\",\"#a6bddb\",\"#2b8cbe\"],\n4: [\"#f1eef6\",\"#bdc9e1\",\"#74a9cf\",\"#0570b0\"],\n5: [\"#f1eef6\",\"#bdc9e1\",\"#74a9cf\",\"#2b8cbe\",\"#045a8d\"],\n6: [\"#f1eef6\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#2b8cbe\",\"#045a8d\"],\n7: [\"#f1eef6\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#034e7b\"],\n8: [\"#fff7fb\",\"#ece7f2\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#034e7b\"],\n9: [\"#fff7fb\",\"#ece7f2\",\"#d0d1e6\",\"#a6bddb\",\"#74a9cf\",\"#3690c0\",\"#0570b0\",\"#045a8d\",\"#023858\"]\n},BuPu: {\n3: [\"#e0ecf4\",\"#9ebcda\",\"#8856a7\"],\n4: [\"#edf8fb\",\"#b3cde3\",\"#8c96c6\",\"#88419d\"],\n5: [\"#edf8fb\",\"#b3cde3\",\"#8c96c6\",\"#8856a7\",\"#810f7c\"],\n6: [\"#edf8fb\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8856a7\",\"#810f7c\"],\n7: [\"#edf8fb\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#6e016b\"],\n8: [\"#f7fcfd\",\"#e0ecf4\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#6e016b\"],\n9: [\"#f7fcfd\",\"#e0ecf4\",\"#bfd3e6\",\"#9ebcda\",\"#8c96c6\",\"#8c6bb1\",\"#88419d\",\"#810f7c\",\"#4d004b\"]\n},RdPu: {\n3: [\"#fde0dd\",\"#fa9fb5\",\"#c51b8a\"],\n4: [\"#feebe2\",\"#fbb4b9\",\"#f768a1\",\"#ae017e\"],\n5: [\"#feebe2\",\"#fbb4b9\",\"#f768a1\",\"#c51b8a\",\"#7a0177\"],\n6: [\"#feebe2\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#c51b8a\",\"#7a0177\"],\n7: [\"#feebe2\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\"],\n8: [\"#fff7f3\",\"#fde0dd\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\"],\n9: [\"#fff7f3\",\"#fde0dd\",\"#fcc5c0\",\"#fa9fb5\",\"#f768a1\",\"#dd3497\",\"#ae017e\",\"#7a0177\",\"#49006a\"]\n},PuRd: {\n3: [\"#e7e1ef\",\"#c994c7\",\"#dd1c77\"],\n4: [\"#f1eef6\",\"#d7b5d8\",\"#df65b0\",\"#ce1256\"],\n5: [\"#f1eef6\",\"#d7b5d8\",\"#df65b0\",\"#dd1c77\",\"#980043\"],\n6: [\"#f1eef6\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#dd1c77\",\"#980043\"],\n7: [\"#f1eef6\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#91003f\"],\n8: [\"#f7f4f9\",\"#e7e1ef\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#91003f\"],\n9: [\"#f7f4f9\",\"#e7e1ef\",\"#d4b9da\",\"#c994c7\",\"#df65b0\",\"#e7298a\",\"#ce1256\",\"#980043\",\"#67001f\"]\n},OrRd: {\n3: [\"#fee8c8\",\"#fdbb84\",\"#e34a33\"],\n4: [\"#fef0d9\",\"#fdcc8a\",\"#fc8d59\",\"#d7301f\"],\n5: [\"#fef0d9\",\"#fdcc8a\",\"#fc8d59\",\"#e34a33\",\"#b30000\"],\n6: [\"#fef0d9\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#e34a33\",\"#b30000\"],\n7: [\"#fef0d9\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#990000\"],\n8: [\"#fff7ec\",\"#fee8c8\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#990000\"],\n9: [\"#fff7ec\",\"#fee8c8\",\"#fdd49e\",\"#fdbb84\",\"#fc8d59\",\"#ef6548\",\"#d7301f\",\"#b30000\",\"#7f0000\"]\n},YlOrRd: {\n3: [\"#ffeda0\",\"#feb24c\",\"#f03b20\"],\n4: [\"#ffffb2\",\"#fecc5c\",\"#fd8d3c\",\"#e31a1c\"],\n5: [\"#ffffb2\",\"#fecc5c\",\"#fd8d3c\",\"#f03b20\",\"#bd0026\"],\n6: [\"#ffffb2\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#f03b20\",\"#bd0026\"],\n7: [\"#ffffb2\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#b10026\"],\n8: [\"#ffffcc\",\"#ffeda0\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#b10026\"],\n9: [\"#ffffcc\",\"#ffeda0\",\"#fed976\",\"#feb24c\",\"#fd8d3c\",\"#fc4e2a\",\"#e31a1c\",\"#bd0026\",\"#800026\"]\n},YlOrBr: {\n3: [\"#fff7bc\",\"#fec44f\",\"#d95f0e\"],\n4: [\"#ffffd4\",\"#fed98e\",\"#fe9929\",\"#cc4c02\"],\n5: [\"#ffffd4\",\"#fed98e\",\"#fe9929\",\"#d95f0e\",\"#993404\"],\n6: [\"#ffffd4\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#d95f0e\",\"#993404\"],\n7: [\"#ffffd4\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#8c2d04\"],\n8: [\"#ffffe5\",\"#fff7bc\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#8c2d04\"],\n9: [\"#ffffe5\",\"#fff7bc\",\"#fee391\",\"#fec44f\",\"#fe9929\",\"#ec7014\",\"#cc4c02\",\"#993404\",\"#662506\"]\n},Purples: {\n3: [\"#efedf5\",\"#bcbddc\",\"#756bb1\"],\n4: [\"#f2f0f7\",\"#cbc9e2\",\"#9e9ac8\",\"#6a51a3\"],\n5: [\"#f2f0f7\",\"#cbc9e2\",\"#9e9ac8\",\"#756bb1\",\"#54278f\"],\n6: [\"#f2f0f7\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#756bb1\",\"#54278f\"],\n7: [\"#f2f0f7\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#4a1486\"],\n8: [\"#fcfbfd\",\"#efedf5\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#4a1486\"],\n9: [\"#fcfbfd\",\"#efedf5\",\"#dadaeb\",\"#bcbddc\",\"#9e9ac8\",\"#807dba\",\"#6a51a3\",\"#54278f\",\"#3f007d\"]\n},Blues: {\n3: [\"#deebf7\",\"#9ecae1\",\"#3182bd\"],\n4: [\"#eff3ff\",\"#bdd7e7\",\"#6baed6\",\"#2171b5\"],\n5: [\"#eff3ff\",\"#bdd7e7\",\"#6baed6\",\"#3182bd\",\"#08519c\"],\n6: [\"#eff3ff\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#3182bd\",\"#08519c\"],\n7: [\"#eff3ff\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#084594\"],\n8: [\"#f7fbff\",\"#deebf7\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#084594\"],\n9: [\"#f7fbff\",\"#deebf7\",\"#c6dbef\",\"#9ecae1\",\"#6baed6\",\"#4292c6\",\"#2171b5\",\"#08519c\",\"#08306b\"]\n},Greens: {\n3: [\"#e5f5e0\",\"#a1d99b\",\"#31a354\"],\n4: [\"#edf8e9\",\"#bae4b3\",\"#74c476\",\"#238b45\"],\n5: [\"#edf8e9\",\"#bae4b3\",\"#74c476\",\"#31a354\",\"#006d2c\"],\n6: [\"#edf8e9\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#31a354\",\"#006d2c\"],\n7: [\"#edf8e9\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#005a32\"],\n8: [\"#f7fcf5\",\"#e5f5e0\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#005a32\"],\n9: [\"#f7fcf5\",\"#e5f5e0\",\"#c7e9c0\",\"#a1d99b\",\"#74c476\",\"#41ab5d\",\"#238b45\",\"#006d2c\",\"#00441b\"]\n},Oranges: {\n3: [\"#fee6ce\",\"#fdae6b\",\"#e6550d\"],\n4: [\"#feedde\",\"#fdbe85\",\"#fd8d3c\",\"#d94701\"],\n5: [\"#feedde\",\"#fdbe85\",\"#fd8d3c\",\"#e6550d\",\"#a63603\"],\n6: [\"#feedde\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#e6550d\",\"#a63603\"],\n7: [\"#feedde\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#8c2d04\"],\n8: [\"#fff5eb\",\"#fee6ce\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#8c2d04\"],\n9: [\"#fff5eb\",\"#fee6ce\",\"#fdd0a2\",\"#fdae6b\",\"#fd8d3c\",\"#f16913\",\"#d94801\",\"#a63603\",\"#7f2704\"]\n},Reds: {\n3: [\"#fee0d2\",\"#fc9272\",\"#de2d26\"],\n4: [\"#fee5d9\",\"#fcae91\",\"#fb6a4a\",\"#cb181d\"],\n5: [\"#fee5d9\",\"#fcae91\",\"#fb6a4a\",\"#de2d26\",\"#a50f15\"],\n6: [\"#fee5d9\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#de2d26\",\"#a50f15\"],\n7: [\"#fee5d9\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#99000d\"],\n8: [\"#fff5f0\",\"#fee0d2\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#99000d\"],\n9: [\"#fff5f0\",\"#fee0d2\",\"#fcbba1\",\"#fc9272\",\"#fb6a4a\",\"#ef3b2c\",\"#cb181d\",\"#a50f15\",\"#67000d\"]\n},Greys: {\n3: [\"#f0f0f0\",\"#bdbdbd\",\"#636363\"],\n4: [\"#f7f7f7\",\"#cccccc\",\"#969696\",\"#525252\"],\n5: [\"#f7f7f7\",\"#cccccc\",\"#969696\",\"#636363\",\"#252525\"],\n6: [\"#f7f7f7\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#636363\",\"#252525\"],\n7: [\"#f7f7f7\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\"],\n8: [\"#ffffff\",\"#f0f0f0\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\"],\n9: [\"#ffffff\",\"#f0f0f0\",\"#d9d9d9\",\"#bdbdbd\",\"#969696\",\"#737373\",\"#525252\",\"#252525\",\"#000000\"]\n},PuOr: {\n3: [\"#f1a340\",\"#f7f7f7\",\"#998ec3\"],\n4: [\"#e66101\",\"#fdb863\",\"#b2abd2\",\"#5e3c99\"],\n5: [\"#e66101\",\"#fdb863\",\"#f7f7f7\",\"#b2abd2\",\"#5e3c99\"],\n6: [\"#b35806\",\"#f1a340\",\"#fee0b6\",\"#d8daeb\",\"#998ec3\",\"#542788\"],\n7: [\"#b35806\",\"#f1a340\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#998ec3\",\"#542788\"],\n8: [\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\"],\n9: [\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\"],\n10: [\"#7f3b08\",\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\",\"#2d004b\"],\n11: [\"#7f3b08\",\"#b35806\",\"#e08214\",\"#fdb863\",\"#fee0b6\",\"#f7f7f7\",\"#d8daeb\",\"#b2abd2\",\"#8073ac\",\"#542788\",\"#2d004b\"]\n},BrBG: {\n3: [\"#d8b365\",\"#f5f5f5\",\"#5ab4ac\"],\n4: [\"#a6611a\",\"#dfc27d\",\"#80cdc1\",\"#018571\"],\n5: [\"#a6611a\",\"#dfc27d\",\"#f5f5f5\",\"#80cdc1\",\"#018571\"],\n6: [\"#8c510a\",\"#d8b365\",\"#f6e8c3\",\"#c7eae5\",\"#5ab4ac\",\"#01665e\"],\n7: [\"#8c510a\",\"#d8b365\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#5ab4ac\",\"#01665e\"],\n8: [\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\"],\n9: [\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\"],\n10: [\"#543005\",\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\",\"#003c30\"],\n11: [\"#543005\",\"#8c510a\",\"#bf812d\",\"#dfc27d\",\"#f6e8c3\",\"#f5f5f5\",\"#c7eae5\",\"#80cdc1\",\"#35978f\",\"#01665e\",\"#003c30\"]\n},PRGn: {\n3: [\"#af8dc3\",\"#f7f7f7\",\"#7fbf7b\"],\n4: [\"#7b3294\",\"#c2a5cf\",\"#a6dba0\",\"#008837\"],\n5: [\"#7b3294\",\"#c2a5cf\",\"#f7f7f7\",\"#a6dba0\",\"#008837\"],\n6: [\"#762a83\",\"#af8dc3\",\"#e7d4e8\",\"#d9f0d3\",\"#7fbf7b\",\"#1b7837\"],\n7: [\"#762a83\",\"#af8dc3\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#7fbf7b\",\"#1b7837\"],\n8: [\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\"],\n9: [\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\"],\n10: [\"#40004b\",\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\",\"#00441b\"],\n11: [\"#40004b\",\"#762a83\",\"#9970ab\",\"#c2a5cf\",\"#e7d4e8\",\"#f7f7f7\",\"#d9f0d3\",\"#a6dba0\",\"#5aae61\",\"#1b7837\",\"#00441b\"]\n},PiYG: {\n3: [\"#e9a3c9\",\"#f7f7f7\",\"#a1d76a\"],\n4: [\"#d01c8b\",\"#f1b6da\",\"#b8e186\",\"#4dac26\"],\n5: [\"#d01c8b\",\"#f1b6da\",\"#f7f7f7\",\"#b8e186\",\"#4dac26\"],\n6: [\"#c51b7d\",\"#e9a3c9\",\"#fde0ef\",\"#e6f5d0\",\"#a1d76a\",\"#4d9221\"],\n7: [\"#c51b7d\",\"#e9a3c9\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#a1d76a\",\"#4d9221\"],\n8: [\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\"],\n9: [\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\"],\n10: [\"#8e0152\",\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\",\"#276419\"],\n11: [\"#8e0152\",\"#c51b7d\",\"#de77ae\",\"#f1b6da\",\"#fde0ef\",\"#f7f7f7\",\"#e6f5d0\",\"#b8e186\",\"#7fbc41\",\"#4d9221\",\"#276419\"]\n},RdBu: {\n3: [\"#ef8a62\",\"#f7f7f7\",\"#67a9cf\"],\n4: [\"#ca0020\",\"#f4a582\",\"#92c5de\",\"#0571b0\"],\n5: [\"#ca0020\",\"#f4a582\",\"#f7f7f7\",\"#92c5de\",\"#0571b0\"],\n6: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#d1e5f0\",\"#67a9cf\",\"#2166ac\"],\n7: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#67a9cf\",\"#2166ac\"],\n8: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\"],\n9: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\"],\n10: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"],\n11: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"]\n},RdGy: {\n3: [\"#ef8a62\",\"#ffffff\",\"#999999\"],\n4: [\"#ca0020\",\"#f4a582\",\"#bababa\",\"#404040\"],\n5: [\"#ca0020\",\"#f4a582\",\"#ffffff\",\"#bababa\",\"#404040\"],\n6: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#e0e0e0\",\"#999999\",\"#4d4d4d\"],\n7: [\"#b2182b\",\"#ef8a62\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#999999\",\"#4d4d4d\"],\n8: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\"],\n9: [\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\"],\n10: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\",\"#1a1a1a\"],\n11: [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#ffffff\",\"#e0e0e0\",\"#bababa\",\"#878787\",\"#4d4d4d\",\"#1a1a1a\"]\n},RdYlBu: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#91bfdb\"],\n4: [\"#d7191c\",\"#fdae61\",\"#abd9e9\",\"#2c7bb6\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#abd9e9\",\"#2c7bb6\"],\n6: [\"#d73027\",\"#fc8d59\",\"#fee090\",\"#e0f3f8\",\"#91bfdb\",\"#4575b4\"],\n7: [\"#d73027\",\"#fc8d59\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#91bfdb\",\"#4575b4\"],\n8: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\"],\n9: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\"],\n10: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\",\"#313695\"],\n11: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee090\",\"#ffffbf\",\"#e0f3f8\",\"#abd9e9\",\"#74add1\",\"#4575b4\",\"#313695\"]\n},Spectral: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#99d594\"],\n4: [\"#d7191c\",\"#fdae61\",\"#abdda4\",\"#2b83ba\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#abdda4\",\"#2b83ba\"],\n6: [\"#d53e4f\",\"#fc8d59\",\"#fee08b\",\"#e6f598\",\"#99d594\",\"#3288bd\"],\n7: [\"#d53e4f\",\"#fc8d59\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#99d594\",\"#3288bd\"],\n8: [\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\"],\n9: [\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\"],\n10: [\"#9e0142\",\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\",\"#5e4fa2\"],\n11: [\"#9e0142\",\"#d53e4f\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#e6f598\",\"#abdda4\",\"#66c2a5\",\"#3288bd\",\"#5e4fa2\"]\n},RdYlGn: {\n3: [\"#fc8d59\",\"#ffffbf\",\"#91cf60\"],\n4: [\"#d7191c\",\"#fdae61\",\"#a6d96a\",\"#1a9641\"],\n5: [\"#d7191c\",\"#fdae61\",\"#ffffbf\",\"#a6d96a\",\"#1a9641\"],\n6: [\"#d73027\",\"#fc8d59\",\"#fee08b\",\"#d9ef8b\",\"#91cf60\",\"#1a9850\"],\n7: [\"#d73027\",\"#fc8d59\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#91cf60\",\"#1a9850\"],\n8: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\"],\n9: [\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\"],\n10: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\",\"#006837\"],\n11: [\"#a50026\",\"#d73027\",\"#f46d43\",\"#fdae61\",\"#fee08b\",\"#ffffbf\",\"#d9ef8b\",\"#a6d96a\",\"#66bd63\",\"#1a9850\",\"#006837\"]\n},Accent: {\n3: [\"#7fc97f\",\"#beaed4\",\"#fdc086\"],\n4: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\"],\n5: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\"],\n6: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\"],\n7: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\",\"#bf5b17\"],\n8: [\"#7fc97f\",\"#beaed4\",\"#fdc086\",\"#ffff99\",\"#386cb0\",\"#f0027f\",\"#bf5b17\",\"#666666\"]\n},Dark2: {\n3: [\"#1b9e77\",\"#d95f02\",\"#7570b3\"],\n4: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\"],\n5: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\"],\n6: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\"],\n7: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\",\"#a6761d\"],\n8: [\"#1b9e77\",\"#d95f02\",\"#7570b3\",\"#e7298a\",\"#66a61e\",\"#e6ab02\",\"#a6761d\",\"#666666\"]\n},Paired: {\n3: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\"],\n4: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\"],\n5: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\"],\n6: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\"],\n7: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\"],\n8: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\"],\n9: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\"],\n10: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\"],\n11: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#ffff99\"],\n12: [\"#a6cee3\",\"#1f78b4\",\"#b2df8a\",\"#33a02c\",\"#fb9a99\",\"#e31a1c\",\"#fdbf6f\",\"#ff7f00\",\"#cab2d6\",\"#6a3d9a\",\"#ffff99\",\"#b15928\"]\n},Pastel1: {\n3: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\"],\n4: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\"],\n5: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\"],\n6: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\"],\n7: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\"],\n8: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\",\"#fddaec\"],\n9: [\"#fbb4ae\",\"#b3cde3\",\"#ccebc5\",\"#decbe4\",\"#fed9a6\",\"#ffffcc\",\"#e5d8bd\",\"#fddaec\",\"#f2f2f2\"]\n},Pastel2: {\n3: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\"],\n4: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\"],\n5: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\"],\n6: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\"],\n7: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\",\"#f1e2cc\"],\n8: [\"#b3e2cd\",\"#fdcdac\",\"#cbd5e8\",\"#f4cae4\",\"#e6f5c9\",\"#fff2ae\",\"#f1e2cc\",\"#cccccc\"]\n},Set1: {\n3: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\"],\n4: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\"],\n5: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\"],\n6: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\"],\n7: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\"],\n8: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\",\"#f781bf\"],\n9: [\"#e41a1c\",\"#377eb8\",\"#4daf4a\",\"#984ea3\",\"#ff7f00\",\"#ffff33\",\"#a65628\",\"#f781bf\",\"#999999\"]\n},Set2: {\n3: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\"],\n4: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\"],\n5: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\"],\n6: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\"],\n7: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\",\"#e5c494\"],\n8: [\"#66c2a5\",\"#fc8d62\",\"#8da0cb\",\"#e78ac3\",\"#a6d854\",\"#ffd92f\",\"#e5c494\",\"#b3b3b3\"]\n},Set3: {\n3: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\"],\n4: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\"],\n5: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\"],\n6: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\"],\n7: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\"],\n8: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\"],\n9: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\"],\n10: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\"],\n11: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\",\"#ccebc5\"],\n12: [\"#8dd3c7\",\"#ffffb3\",\"#bebada\",\"#fb8072\",\"#80b1d3\",\"#fdb462\",\"#b3de69\",\"#fccde5\",\"#d9d9d9\",\"#bc80bd\",\"#ccebc5\",\"#ffed6f\"]\n}};\n\nif (typeof define === \"function\" && define.amd) {\n    define(colorbrewer);\n} else if (typeof module === \"object\" && module.exports) {\n    module.exports = colorbrewer;\n} else {\n    this.colorbrewer = colorbrewer;\n}\n\n}();\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/colorbrewer/colorbrewer.js\n// module id = 37\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, getOrdinalFromIndex } from './utils';\n\nlet bucketUID = 0;\n\nexport default class Buckets extends Expression {\n\n    /**\n     * Given a property create \"sub-groups\" based on the given breakpoints.\n     *\n     *\n     * Imagine a traffic dataset with a speed property. We want to divide the roads in\n     * 3 buckets (slow, medium, fast) based on the speed using a different color each bucket.\n     *\n     *\n     * We´ll need:\n     *  - A {@link carto.style.expressions.ramp|ramp } to add a color for every bucket.\n     *  - A {@link carto.style.expressions.palettes|colorPalette } to define de color scheme.\n     *\n     *\n     * ```javascript\n     *  const s = carto.style.expressions;\n     *  const $speed = s.prop('speed');\n     *  const style = new carto.Style({\n     *  color: s.ramp(\n     *      s.buckets($speed, 30, 80, 120),\n     *      s.palettes.PRISM),\n     * });\n     * ```\n     *\n     * Using the buckets `expression` we divide the dataset in 3 buckets according to the speed:\n     *  - From 0 to 29\n     *  - From 30 to 79\n     *  - From 80 to 120\n     *\n     * Values lower than 0 will be in the first bucket and values higher than 120 will be in the third one.\n     *\n     * This expression can be used for categorical properties, imagine the previous example with the data already\n     * procesed in a new categorical `procesedSpeed` column:\n     *\n     * ```javascript\n     *  const s = carto.style.expressions;\n     *  const $procesedSpeed = s.prop('procesedSpeed');\n     *  const style = new carto.Style({\n     *  color: s.ramp(\n     *      s.buckets($procesedSpeed, 'slow', 'medium', 'high'),\n     *      s.palettes.PRISM),\n     * });\n     * ```\n     *\n     * @param {carto.style.expressions.property} property - The property to be evaluated and interpolated\n     * @param {...carto.style.expressions.expression} breakpoints - Numeric expression containing the different breakpoints.\n     * @return {carto.style.expressions.expression}\n     *\n     * @memberof carto.style.expressions\n     * @name buckets\n     * @function\n     * @api\n     */\n    constructor(input, ...args) {\n        input = implicitCast(input);\n        args = args.map(implicitCast);\n\n        let looseType = undefined;\n        if (input.type) {\n            if (input.type != 'float' && input.type != 'category') {\n                throw new Error(`buckets(): invalid first parameter type\\n\\t'input' type was ${input.type}`);\n            }\n            looseType = input.type;\n        }\n        args.map((arg, index) => {\n            if (arg.type) {\n                if (looseType && looseType != arg.type) {\n                    throw new Error(`buckets(): invalid ${getOrdinalFromIndex(index)} parameter type` +\n                        `\\n\\texpected type was ${looseType}\\n\\tactual type was ${arg.type}`);\n                } else if (arg.type != 'float' && arg.type != 'category') {\n                    throw new Error(`buckets(): invalid ${getOrdinalFromIndex(index)} parameter type\\n\\ttype was ${arg.type}`);\n                }\n            }\n        });\n\n        let children = {\n            input\n        };\n        args.map((arg, index) => children[`arg${index}`] = arg);\n        super(children);\n        this.bucketUID = bucketUID++;\n        this.numCategories = args.length + 1;\n        this.args = args;\n        this.type = 'category';\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n        this.othersBucket = this.input.type == 'category';\n\n        const input = this.input;\n        if (input.type != 'float' && input.type != 'category') {\n            throw new Error(`buckets(): invalid first parameter type\\n\\t'input' type was ${input.type}`);\n        }\n        this.args.map((arg, index) => {\n            if (input.type != arg.type) {\n                throw new Error(`buckets(): invalid ${getOrdinalFromIndex(index)} parameter type` +\n                    `\\n\\texpected type was ${input.type}\\n\\tactual type was ${arg.type}`);\n            } else if (arg.type != 'float' && arg.type != 'category') {\n                throw new Error(`buckets(): invalid ${getOrdinalFromIndex(index)} parameter type\\n\\ttype was ${arg.type}`);\n            }\n        });\n    }\n    _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n        const childSources = this.childrenNames.map(name => this[name]._applyToShaderSource(uniformIDMaker, propertyTIDMaker));\n        let childInlines = {};\n        childSources.map((source, index) => childInlines[this.childrenNames[index]] = source.inline);\n        const funcName = `buckets${this.bucketUID}`;\n        const cmp = this.input.type == 'category' ? '==' : '<';\n        const elif = (_, index) =>\n            `${index > 0 ? 'else' : ''} if (x${cmp}(${childInlines[`arg${index}`]})){\n                return ${index}.;\n            }`;\n        const funcBody = this.args.map(elif).join('');\n        const preface = `float ${funcName}(float x){\n            ${funcBody}\n            return ${this.numCategories - 1}.;\n        }`;\n\n        return {\n            preface: childSources.map(s => s.preface).reduce((a, b) => a + b, '') + preface,\n            inline: `${funcName}(${childInlines.input})`\n        };\n    }\n    eval(feature) {\n        const v = this.input.eval(feature);\n        let i;\n        for (i = 0; i < this.args.length; i++) {\n            if (this.input.type == 'category' && v == this.args[i].eval(feature)) {\n                return i;\n            } else if (this.input.type == 'float' && v < this.args[i].eval(feature)) {\n                return i;\n            }\n        }\n        return i;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/buckets.js\n// module id = 38\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, checkLooseType, checkType, checkExpression } from './utils';\n\nexport default class CIELab extends Expression {\n    constructor(l, a, b) {\n        l = implicitCast(l);\n        a = implicitCast(a);\n        b = implicitCast(b);\n\n        checkExpression('cielab', 'l', 0, l);\n        checkExpression('cielab', 'a', 1, a);\n        checkExpression('blend', 'b', 2, b);\n        checkLooseType('cielab', 'l', 0, 'float', l);\n        checkLooseType('cielab', 'a', 1, 'float', a);\n        checkLooseType('cielab', 'b', 2, 'float', b);\n\n        super({ l: l, a: a, b: b });\n        this.type = 'color';\n    }\n    _compile(meta) {\n        super._compile(meta);\n\n        checkType('cielab', 'l', 0, 'float', this.l);\n        checkType('cielab', 'a', 1, 'float', this.a);\n        checkType('cielab', 'b', 2, 'float', this.b);\n\n        this._setGenericGLSL(inline =>\n            `vec4(xyztosrgb(cielabtoxyz(\n                vec3(\n                    clamp(${inline.l}, 0., 100.),\n                    clamp(${inline.a}, -128., 128.),\n                    clamp(${inline.b}, -128., 128.)\n                )\n            )), 1)`\n            , `\n        #ifndef cielabtoxyz_fn\n        #define cielabtoxyz_fn\n\n        const mat3 XYZ_2_RGB = (mat3(\n            3.2404542,-1.5371385,-0.4985314,\n           -0.9692660, 1.8760108, 0.0415560,\n            0.0556434,-0.2040259, 1.0572252\n       ));\n       const float SRGB_GAMMA = 1.0 / 2.2;\n\n       vec3 rgb_to_srgb_approx(vec3 rgb) {\n        return pow(rgb, vec3(SRGB_GAMMA));\n    }\n        float f1(float t){\n            const float sigma = 6./29.;\n            if (t>sigma){\n                return t*t*t;\n            }else{\n                return 3.*sigma*sigma*(t-4./29.);\n            }\n        }\n        vec3 cielabtoxyz(vec3 c) {\n            const float xn = 95.047/100.;\n            const float yn = 100./100.;\n            const float zn = 108.883/100.;\n            return vec3(xn*f1((c.x+16.)/116.  + c.y/500. ),\n                        yn*f1((c.x+16.)/116.),\n                        zn*f1((c.x+16.)/116.  - c.z/200. )\n                    );\n        }\n        vec3 xyztorgb(vec3 c){\n            return c *XYZ_2_RGB;\n        }\n\n        vec3 xyztosrgb(vec3 c) {\n            return rgb_to_srgb_approx(xyztorgb(c));\n        }\n        #endif\n        `);\n    }\n    // TODO EVAL\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/CIELab.js\n// module id = 39\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, checkExpression } from './utils';\n\nexport default class HSV extends Expression {\n    /**\n     * @description Color constructor for Hue Saturation Value (HSV) color space\n     * @param {*} hue   hue is the color hue, the coordinates goes from 0 to 1 and is cyclic, i.e.: 0.5=1.5=2.5=-0.5\n     * @param {*} saturation saturation of the color in the [0,1] range\n     * @param {*} value value (brightness) of the color in the [0,1] range\n     */\n    constructor(h, s, v) {\n        h = implicitCast(h);\n        s = implicitCast(s);\n        v = implicitCast(v);\n\n        checkType('h', 0, h);\n        checkType('s', 1, s);\n        checkType('v', 2, v);\n\n        super({ h: h, s: s, v: v });\n        this.type = 'color';\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n        checkType('h', 0, this.h);\n        checkType('s', 1, this.s);\n        checkType('v', 2, this.v);\n        const normalize = (v, hue = false) => {\n            if (v.type == 'category') {\n                return `/${hue ? v.numCategories + 1 : v.numCategories}.`;\n            }\n            return '';\n        };\n        super._setGenericGLSL(inline =>\n            `vec4(hsv2rgb(vec3(${inline.h}${normalize(this.h, true)}, clamp(${inline.s}${normalize(this.s)}, 0.,1.), clamp(${inline.v}${normalize(this.v)}, 0.,1.))), 1)`\n            , `\n    #ifndef HSV2RGB\n    #define HSV2RGB\n    vec3 hsv2rgb(vec3 c) {\n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n    }\n    #endif\n    `);\n    }\n    // TODO eval\n}\n\nfunction checkType(parameterName, parameterIndex, parameter) {\n    checkExpression('hsv', parameterName, parameterIndex, parameter);\n    if (parameter.type != 'float' && parameter.type != 'category' && parameter.type !== undefined) {\n        throw new Error(`hsv(): invalid parameter\\n\\t${parameterName} type was: '${parameter.type}'`);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/hsv.js\n// module id = 40\n// module chunks = 0","import Expression from './expression';\nimport { checkExpression, checkLooseType, implicitCast, checkType } from './utils';\n\n/**\n* Linearly interpolates the value of a given property between min and max.\n*\n* @param {carto.style.expressions.property} property - The property to be evaluated and interpolated\n* @param {carto.style.expressions.expression} min - Numeric or date expression pointing to the lower limit\n* @param {carto.style.expressions.expression} max - Numeric or date expression pointing to the higher limit\n* @return {carto.style.expressions.expression}\n*\n* @example <caption> Display points with a different color depending on the `category` property. </caption>\n* const s = carto.style.expressions;\n* const style = new carto.Style({\n*  color: s.ramp(s.linear(s.prop('speed', 10, 100), PRISM),\n* });\n*\n* @memberof carto.style.expressions\n* @name ramp\n* @function\n* @api\n*/\nexport default class Linear extends Expression {\n    constructor(input, min, max) {\n        input = implicitCast(input);\n        min = implicitCast(min);\n        max = implicitCast(max);\n\n        checkExpression('linear', 'input', 0, input);\n        checkExpression('linear', 'min', 1, min);\n        checkExpression('linear', 'max', 2, max);\n\n        super({ input, min, max });\n\n        if (this.min.type != 'time') {\n            checkLooseType('linear', 'input', 0, 'float', this.input);\n            checkLooseType('linear', 'min', 1, 'float', this.min);\n            checkLooseType('linear', 'max', 2, 'float', this.max);\n        }\n        this.type = 'float';\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n\n        if (this.input.type == 'date') {\n            const min = this.min.eval().getTime();\n            const max = this.max.eval().getTime();\n\n            const inputMin = metadata.columns.find(c => c.name == this.input.name).min.getTime();\n            const inputMax = metadata.columns.find(c => c.name == this.input.name).max.getTime();\n            const inputDiff = inputMax - inputMin;\n\n            const smin = (min - inputMin) / inputDiff;\n            const smax = (max - inputMin) / inputDiff;\n            this.inlineMaker = (inline) => `((${inline.input}-${smin.toFixed(20)})/(${(smax - smin).toFixed(20)}))`;\n\n        } else {\n            checkType('linear', 'input', 0, 'float', this.input);\n            checkType('linear', 'min', 1, 'float', this.min);\n            checkType('linear', 'max', 2, 'float', this.max);\n\n            this.inlineMaker = (inline) => `((${inline.input}-${inline.min})/(${inline.max}-${inline.min}))`;\n        }\n    }\n    eval(feature) {\n        const v = this.input.eval(feature);\n        const min = this.min.eval(feature);\n        const max = this.max.eval(feature);\n        return (v - min) / (max - min);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/linear.js\n// module id = 41\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, clamp } from './utils';\n\n// TODO type checking\nexport default class Near extends Expression {\n    /**\n     * @description Near returns zero for inputs that are far away from center.\n     * This can be useful for filtering out features by setting their size to zero.\n     *\n     *       _____\n     * _____/     \\_____\n     *\n     * @param {*} input\n     * @param {*} center\n     * @param {*} threshold size of the allowed distance between input and center that is filtered in (returning one)\n     * @param {*} falloff size of the distance to be used as a falloff to linearly interpolate between zero and one\n     */\n    constructor(input, center, threshold, falloff) {\n        input = implicitCast(input);\n        center = implicitCast(center);\n        threshold = implicitCast(threshold);\n        falloff = implicitCast(falloff);\n\n        super({ input: input, center: center, threshold: threshold, falloff: falloff });\n    }\n    _compile(meta) {\n        super._compile(meta);\n        if (this.input.type != 'float' || this.center.type != 'float' || this.threshold.type != 'float' || this.falloff.type != 'float') {\n            throw new Error('Near(): invalid parameter type');\n        }\n        this.type = 'float';\n        this.inlineMaker = (inline) =>\n            `(1.-clamp((abs(${inline.input}-${inline.center})-${inline.threshold})/${inline.falloff},0., 1.))`;\n    }\n    eval(feature) {\n        const input = this.input.eval(feature);\n        const center = this.center.eval(feature);\n        const threshold = this.threshold.eval(feature);\n        const falloff = this.falloff.eval(feature);\n        return 1. - clamp((Math.abs(input - center) - threshold) / falloff, 0, 1);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/near.js\n// module id = 42\n// module chunks = 0","import Expression from './expression';\nimport { float } from '../functions';\n\nexport default class Now extends Expression {\n    /**\n     * @description get the current timestamp\n     */\n    constructor() {\n        super({ now: float(0) });\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n        this.type = 'float';\n        super.inlineMaker = inline => inline.now;\n    }\n    _preDraw(...args) {\n        this.now._preDraw(...args);\n    }\n    _setTimestamp(timestamp){\n        this.now.expr = timestamp;\n    }\n    isAnimated() {\n        return true;\n    }\n    eval(){\n        return this.now.expr;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/now.js\n// module id = 43\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, hexToRgb, checkLooseType, checkExpression, checkType } from './utils';\n\nexport default class Ramp extends Expression {\n    /**\n    * Create a color ramp based on input property.\n    *\n    * This expression will asign a color to every possible value in the property.\n    * If there are more values than colors in the palette, new colors will be generated by linear interpolation.\n    *\n    * @param {carto.style.expressions.expression} input - The input expression to give a color\n    * @param {carto.style.expressions.palettes} palette - The color palette that is going to be used\n    * @return {carto.style.expressions.expression}\n    *\n    * @example <caption> Display points with a different color depending on the `category` property. (We assume category has discrete values) </caption>\n    * const s = carto.style.expressions;\n    * const style = new carto.Style({\n    *  color: s.ramp(s.prop('category'), PRISM),\n    * });\n    *\n    * @example <caption> Display points with a different color depending on the `speed` property. (We assume category has continuos numeric values)</caption>\n    * const s = carto.style.expressions;\n    * const style = new carto.Style({\n    *  color: s.ramp(s.prop('speed'), PRISM),\n    * });\n    *\n    * @memberof carto.style.expressions\n    * @name ramp\n    * @function\n    * @api\n    */\n    constructor(input, palette, ...args) {\n        if (args.length > 0) {\n            throw new Error('ramp(input, palette) only accepts two parameters');\n        }\n        input = implicitCast(input);\n        palette = implicitCast(palette);\n\n        checkExpression('ramp', 'input', 0, input);\n        checkLooseType('ramp', 'input', 0, ['float', 'category'], input);\n        checkType('ramp', 'palette', 1, 'palette', palette);\n\n        super({ input: input });\n        this.minKey = 0;\n        this.maxKey = 1;\n        this.palette = palette;\n        this.type = 'color';\n    }\n    _compile(meta) {\n        super._compile(meta);\n        checkType('ramp', 'input', 0, ['float', 'category'], this.input);\n        if (this.input.type == 'category') {\n            this.maxKey = this.input.numCategories - 1;\n        }\n    }\n    _free(gl) {\n        gl.deleteTexture(this.texture);\n    }\n    _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n        this._UID = uniformIDMaker();\n        const input = this.input._applyToShaderSource(uniformIDMaker, propertyTIDMaker);\n        return {\n            preface: input.preface + `\n        uniform sampler2D texRamp${this._UID};\n        uniform float keyMin${this._UID};\n        uniform float keyWidth${this._UID};\n        `,\n            inline: `texture2D(texRamp${this._UID}, vec2((${input.inline}-keyMin${this._UID})/keyWidth${this._UID}, 0.5)).rgba`\n        };\n    }\n    _getColorsFromPalette(input, palette) {\n        if (palette.type == 'palette') {\n            let colors;\n            if (input.numCategories) {\n                // If we are not gonna pop the others we don't need to get the extra color\n                const subPalette = (palette.tags.includes('qualitative') && !input.othersBucket) ? input.numCategories : input.numCategories - 1;\n                if (palette.subPalettes[subPalette]) {\n                    colors = palette.subPalettes[subPalette];\n                } else {\n                    // More categories than palettes, new colors will be created by linear interpolation\n                    colors = palette.getLongestSubPalette();\n                }\n            } else {\n                colors = palette.getLongestSubPalette();\n            }\n            // We need to remove the 'others' color if the palette has it (it is a qualitative palette) and if the input doesn't have a 'others' bucket\n            if (palette.tags.includes('qualitative') && !input.othersBucket) {\n                colors = colors.slice(0, colors.length - 1);\n            }\n            return colors;\n        } else {\n            return palette;\n        }\n    }\n    _postShaderCompile(program, gl) {\n        if (!this.init) {\n            this.init = true;\n            this.texture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, this.texture);\n            const level = 0;\n            const internalFormat = gl.RGBA;\n            const width = 256;\n            const height = 1;\n            const border = 0;\n            const srcFormat = gl.RGBA;\n            const srcType = gl.UNSIGNED_BYTE;\n            const pixel = new Uint8Array(4 * width);\n            const colors = this._getColorsFromPalette(this.input, this.palette);\n            // console.log(this.input.numCategories, this.input.othersBucket, colors, this);\n            for (var i = 0; i < width; i++) {\n                const vlowRaw = colors[Math.floor(i / width * (colors.length - 1))];\n                const vhighRaw = colors[Math.ceil(i / width * (colors.length - 1))];\n                const vlow = [hexToRgb(vlowRaw).r, hexToRgb(vlowRaw).g, hexToRgb(vlowRaw).b, 255];\n                const vhigh = [hexToRgb(vhighRaw).r, hexToRgb(vhighRaw).g, hexToRgb(vhighRaw).b, 255];\n                const m = i / width * (colors.length - 1) - Math.floor(i / width * (colors.length - 1));\n                const v = vlow.map((low, index) => low * (1. - m) + vhigh[index] * m);\n                pixel[4 * i + 0] = v[0];\n                pixel[4 * i + 1] = v[1];\n                pixel[4 * i + 2] = v[2];\n                pixel[4 * i + 3] = v[3];\n            }\n            gl.texImage2D(gl.TEXTURE_2D, level, internalFormat,\n                width, height, border, srcFormat, srcType,\n                pixel);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        }\n        this.input._postShaderCompile(program, gl);\n        this._texLoc = gl.getUniformLocation(program, `texRamp${this._UID}`);\n        this._keyMinLoc = gl.getUniformLocation(program, `keyMin${this._UID}`);\n        this._keyWidthLoc = gl.getUniformLocation(program, `keyWidth${this._UID}`);\n    }\n    _preDraw(drawMetadata, gl) {\n        this.input._preDraw(drawMetadata, gl);\n        gl.activeTexture(gl.TEXTURE0 + drawMetadata.freeTexUnit);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.uniform1i(this._texLoc, drawMetadata.freeTexUnit);\n        gl.uniform1f(this._keyMinLoc, (this.minKey));\n        gl.uniform1f(this._keyWidthLoc, (this.maxKey) - (this.minKey));\n        drawMetadata.freeTexUnit++;\n    }\n    // TODO eval\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/ramp.js\n// module id = 44\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, checkLooseType, checkType } from './utils';\n\n//TODO refactor to uniformcolor, write color (plain, literal)\n\n/**\n *\n * Evaluates to a rgba color.\n *\n * @param {carto.style.expressions.number|number} r - The amount of red in the color\n * @param {carto.style.expressions.number|number} g - The amount of red in the color\n * @param {carto.style.expressions.number|number} b - The amount of red in the color\n * @param {carto.style.expressions.number|number} a - The alpha value of the color\n * @return {carto.style.expressions.rgba}\n *\n * @example <caption>Display blue points.</caption>\n * const s = carto.style.expressions;\n * const $type = s.property('type');\n * const style = new carto.Style({\n *  color: s.rgba(0, 1, 0, 1);\n * });\n *\n * @memberof carto.style.expressions\n * @name rgba\n * @function\n * @api\n */\nexport default class RGBA extends Expression {\n    /**\n     * @description RGBA color constructor\n     * @param {*} r red component in the [0,1] range\n     * @param {*} g green component in the [0,1] range\n     * @param {*} b blue component in the [0,1] range\n     * @param {*} a alpha/opacity component in the [0,1] range\n     */\n    constructor(r, g, b, a) {\n        [r, g, b, a] = [r, g, b, a].map(implicitCast);\n        checkLooseType('rgba', 'r', 0, 'float', r);\n        checkLooseType('rgba', 'g', 1, 'float', g);\n        checkLooseType('rgba', 'b', 2, 'float', b);\n        checkLooseType('rgba', 'a', 3, 'float', a);\n        super({ r, g, b, a });\n        this.type = 'color';\n    }\n    _compile(meta) {\n        super._compile(meta);\n        checkType('rgba', 'r', 0, 'float', this.r);\n        checkType('rgba', 'g', 1, 'float', this.g);\n        checkType('rgba', 'b', 2, 'float', this.b);\n        checkType('rgba', 'a', 3, 'float', this.a);\n        this.inlineMaker = inline => `vec4(${inline.r}, ${inline.g}, ${inline.b}, ${inline.a})`;\n    }\n    // TODO eval\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/rgba.js\n// module id = 45\n// module chunks = 0","import Expression from './expression';\nimport { float } from '../functions';\nimport { checkLooseType, checkType } from './utils';\n\n/**\n *\n * Override the input color opacity\n *\n * @param {number} x - A number to be warped in a numeric expression\n * @return {carto.style.expressions.Expression} numeric expression\n *\n * @example <caption>Creating a number expression.</caption>\n * const s = carto.style.expressions;\n * const style = new carto.Style({\n *  width: s.number(15);  // Elements will have width 15\n * });\n *\n * @memberof carto.style.expressions\n * @name number\n * @function\n * @api\n */\nexport default class Opacity extends Expression {\n    /**\n     * @description Override the input color opacity\n     * @param {*} color input color\n     * @param {*} opacity new opacity\n     */\n    constructor(a, b) {\n        if (Number.isFinite(b)) {\n            b = float(b);\n        }\n        checkType('opacity', 'color', 0, 'color', a);\n        checkLooseType('opacity', 'opacity', 1, 'float', b);\n        super({ a: a, b: b });\n        this.type = 'color';\n    }\n    _compile(meta) {\n        super._compile(meta);\n        checkType('opacity', 'opacity', 1, 'float', this.b);\n        this.inlineMaker = inlines => `vec4((${inlines.a}).rgb, ${inlines.b})`;\n    }\n    // TODO eval\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/opacity.js\n// module id = 46\n// module chunks = 0","import Expression from './expression';\n\nexport default class Top extends Expression {\n    constructor(property, buckets) {\n        // TODO 'cat'\n        super({ property: property });\n        // TODO improve type check\n        this.buckets = buckets; //TODO force fixed literal\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n        if (this.property.type != 'category') {\n            throw new Error(`top() first argument must be of type category, but it is of type '${this.property.type}'`);\n        }\n        this.type = 'category';\n        this.numCategories = this.buckets + 1;\n        this.othersBucket = true;\n        this._meta = metadata;\n    }\n    _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n        this._UID = uniformIDMaker();\n        const property = this.property._applyToShaderSource(uniformIDMaker, propertyTIDMaker);\n        return {\n            preface: property.preface + `uniform sampler2D topMap${this._UID};\\n`,\n            inline: `(255.*texture2D(topMap${this._UID}, vec2(${property.inline}/1024., 0.5)).a)`\n        };\n    }\n    eval(feature) {\n        const p = this.property.eval(feature);\n        const metaColumn = this._meta.columns.find(c => c.name == this.property.name);\n        let ret;\n        metaColumn.categoryNames.map((name, i) => {\n            if (i==p){\n                ret = i < this.buckets? i+1:0;\n            }\n        });\n        return ret;\n    }\n    _postShaderCompile(program, gl) {\n        if (!this.init) {\n            if (this.buckets > this.property.numCategories) {\n                this.buckets = this.property.numCategories;\n            }\n            this.init = true;\n            this.texture = gl.createTexture();\n            gl.bindTexture(gl.TEXTURE_2D, this.texture);\n            const width = 1024;\n            let pixels = new Uint8Array(4 * width);\n            const metaColumn = this._meta.columns.find(c => c.name == this.property.name);\n            metaColumn.categoryNames.map((name, i) => {\n                if (i < this.buckets) {\n                    pixels[4 * this._meta.categoryIDs[name] + 3] = (i + 1);\n                }\n            });\n            gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA,\n                width, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE,\n                pixels);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n            gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n        }\n        this.property._postShaderCompile(program);\n        this._texLoc = gl.getUniformLocation(program, `topMap${this._UID}`);\n    }\n    _preDraw(drawMetadata, gl) {\n        this.property._preDraw(drawMetadata);\n        gl.activeTexture(gl.TEXTURE0 + drawMetadata.freeTexUnit);\n        gl.bindTexture(gl.TEXTURE_2D, this.texture);\n        gl.uniform1i(this._texLoc, drawMetadata.freeTexUnit);\n        drawMetadata.freeTexUnit++;\n    }\n    //TODO _free\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/top.js\n// module id = 47\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast } from './utils';\n\n\n// TODO should this expression be removed?\nexport default class XYZ extends Expression {\n    constructor(x, y, z) {\n        x = implicitCast(x);\n        y = implicitCast(y);\n        z = implicitCast(z);\n        super({ x: x, y: y, z: z });\n        // TODO improve type check\n    }\n    _compile(meta) {\n        super._compile(meta);\n        if (this.x.type != 'float' || this.y.type != 'float' || this.z.type != 'float') {\n            throw new Error('XYZ() invalid parameters');\n        }\n        this.type = 'color';\n        this._setGenericGLSL(inline =>\n            `vec4(xyztosrgb((\n                vec3(\n                    clamp(${inline.x}, -100000., 10000.),\n                    clamp(${inline.y}, -12800., 12800.),\n                    clamp(${inline.z}, -12800., 12800.)\n                )\n            )), 1)`\n            , `\n        #ifndef cielabtoxyz_fn\n        #define cielabtoxyz_fn\n\n        const mat3 XYZ_2_RGB = (mat3(\n            3.2404542,-1.5371385,-0.4985314,\n           -0.9692660, 1.8760108, 0.0415560,\n            0.0556434,-0.2040259, 1.0572252\n       ));\n       const mat3 XYZ_2_RGB_T = (mat3(\n        3.2404542,-0.9692660,0.0556434,\n        -1.5371385, 1.8760108, -0.2040259,\n        -0.4985314,0.0415560, 1.0572252\n   ));\n       const float SRGB_GAMMA = 1.0 / 2.2;\n\n       vec3 rgb_to_srgb_approx(vec3 rgb) {\n        return pow(rgb, vec3(SRGB_GAMMA));\n    }\n        float f1(float t){\n            const float sigma = 6./29.;\n            if (t>sigma){\n                return t*t*t;\n            }else{\n                return 3.*sigma*sigma*(t-4./29.);\n            }\n        }\n        vec3 cielabtoxyz(vec3 c) {\n            const float xn = 95.047;\n            const float yn = 100.;\n            const float zn = 108.883;\n            return vec3(xn*f1((c.x+16.)/116.  + c.y/500. ),\n                        yn*f1((c.x+16.)/116.),\n                        zn*f1((c.x+16.)/116.  - c.z/200. )\n                    );\n        }\n        vec3 xyztorgb(vec3 c){\n            return c * XYZ_2_RGB;\n        }\n\n        vec3 xyztosrgb(vec3 c) {\n            return rgb_to_srgb_approx(xyztorgb(c));\n        }\n        #endif\n        `);\n    }\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/xyz.js\n// module id = 48\n// module chunks = 0","import Expression from './expression';\nimport { float } from '../functions';\n\nexport default class Zoom extends Expression {\n    /**\n     * @description get the current zoom level\n     */\n    constructor() {\n        super({ zoom: float(0) });\n    }\n    _compile(metadata) {\n        super._compile(metadata);\n        this.type = 'float';\n        super.inlineMaker = inline => inline.zoom;\n    }\n    _preDraw(drawMetadata, gl) {\n        this.zoom.expr = drawMetadata.zoom;\n        this.zoom._preDraw(drawMetadata, gl);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/zoom.js\n// module id = 49\n// module chunks = 0","import Expression from './expression';\n\nexport default class Time extends Expression {\n    constructor(date) {\n        if (!(date instanceof Date)) {\n            throw new Error('time(): invalid date parameter');\n        }\n        super({});\n        // TODO improve type check\n        this.type = 'time';\n        this.date = date;\n        this.inlineMaker = () => undefined;\n    }\n    isAnimated() {\n        return false;\n    }\n    eval() {\n        return this.date;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/time.js\n// module id = 50\n// module chunks = 0","import Expression from './expression';\nimport { float } from '../functions';\nimport { checkNumber, checkInstance, checkType } from './utils';\nimport Property from './property';\n\nlet quantilesUID = 0;\n\nfunction genQuantiles(global) {\n    return class Quantiles extends Expression {\n        constructor(input, buckets) {\n            checkInstance('quantiles', 'input', 0, Property, input);\n            checkNumber('quantiles', 'buckets', 1, buckets);\n\n            let children = {\n                input\n            };\n            let breakpoints = [];\n            for (let i = 0; i < buckets - 1; i++) {\n                children[`arg${i}`] = float(i * 10);\n                breakpoints.push(children[`arg${i}`]);\n            }\n            super(children);\n            this.quantilesUID = quantilesUID++;\n            this.numCategories = buckets;\n            this.buckets = buckets;\n            this.breakpoints = breakpoints;\n            this.type = 'category';\n        }\n        _compile(metadata) {\n            super._compile(metadata);\n            checkType('quantiles', 'input', 0, 'float', this.input);\n            if (global) {\n                const copy = metadata.sample.map(s => s[this.input.name]);\n                copy.sort((x, y) => x - y);\n                this.breakpoints.map((breakpoint, index) => {\n                    const p = (index + 1) / this.buckets;\n                    breakpoint.expr = copy[Math.floor(p * copy.length)];\n                });\n            }\n        }\n        _getDrawMetadataRequirements() {\n            return { columns: [this.input.name] };\n        }\n        _applyToShaderSource(uniformIDMaker, propertyTIDMaker) {\n            const childSources = this.childrenNames.map(name => this[name]._applyToShaderSource(uniformIDMaker, propertyTIDMaker));\n            let childInlines = {};\n            childSources.map((source, index) => childInlines[this.childrenNames[index]] = source.inline);\n            const funcName = `quantiles${this.quantilesUID}`;\n            const elif = (_, index) =>\n                `${index > 0 ? 'else' : ''} if (x<(${childInlines[`arg${index}`]})){\n            return ${index.toFixed(2)};\n        }`;\n            const funcBody = this.breakpoints.map(elif).join('');\n            const preface = `float ${funcName}(float x){\n        ${funcBody}\n        return ${this.breakpoints.length.toFixed(1)};\n    }`;\n            return {\n                preface: childSources.map(s => s.preface).reduce((a, b) => a + b, '') + preface,\n                inline: `${funcName}(${childInlines.input})`\n            };\n        }\n        eval(feature) {\n            const input = this.input.eval(feature);\n            const q = this.breakpoints.findIndex(br => input <= br);\n            return q;\n        }\n        _preDraw(drawMetadata, gl) {\n            const column = drawMetadata.columns.find(c => c.name == this.input.name);\n            let i = 0;\n            const total = column.accumHistogram[column.histogramBuckets - 1];\n            const r = Math.random();\n            let brs = [];\n\n            // TODO OPT: this could be faster with binary search\n            if (!global) {\n                this.breakpoints.map((breakpoint, index) => {\n                    for (i; i < column.histogramBuckets; i++) {\n                        if (column.accumHistogram[i] >= (index + 1) / this.buckets * total) {\n                            break;\n                        }\n                    }\n                    const percentileValue = i / column.histogramBuckets * (column.max - column.min) + column.min;\n                    brs.push(percentileValue);\n                    breakpoint.expr = percentileValue;\n                });\n            }\n            if (r > 0.99) {\n                console.log(this.breakpoints.map(br => br.expr));\n            }\n            super._preDraw(drawMetadata, gl);\n        }\n        getBreakpointList() {\n            return this.breakpoints.map(br => br.expr);\n        }\n    };\n}\n\nexport const Quantiles = genQuantiles(false);\nexport const GlobalQuantiles = genQuantiles(true);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/quantiles.js\n// module id = 51\n// module chunks = 0","import Expression from './expression';\nimport { implicitCast, DEFAULT, clamp } from './utils';\nimport { floatDiv, floatMod, now, linear, globalMin, globalMax } from '../functions';\nimport Property from './property';\n\nconst DEFAULT_FADE = 0.15;\n\n/**\n * Create a Torque FadeIn/FadeOut configuration\n *\n * @param {carto.style.expression.expression.number|number} param1 expression of type number or Number\n * @param {carto.style.expression.expression.number|number} param2 expression of type number or Number\n * @return {carto.style.expressions.fade}\n *\n * @example <caption> fadeIn of 0.1 seconds, fadeOut of 0.3 seconds </caption>\n * const s = carto.style.expressions;\n * new carto.Style({\n *  filter: s.torque($day, 40, s.fade(0.1, 0.3))\n * });\n *\n * @example <caption>   fadeIn and fadeOut of 0.5 seconds </caption>\n * const s = carto.style.expressions;\n * new carto.Style({\n *  filter: s.torque($day, 40, s.fade(0.5))\n * });\n *\n * @memberof carto.style.expressions\n * @name fade\n * @function\n*/\nexport class Fade extends Expression {\n    constructor(param1 = DEFAULT, param2 = DEFAULT) {\n        let fadeIn = param1;\n        let fadeOut = param2;\n        if (param1 == DEFAULT) {\n            fadeIn = DEFAULT_FADE;\n        }\n        if (param2 == DEFAULT) {\n            fadeOut = fadeIn;\n        }\n        fadeIn = implicitCast(fadeIn);\n        fadeOut = implicitCast(fadeOut);\n        // TODO improve type check\n        super({ fadeIn, fadeOut });\n        this.type = 'fade';\n        this.inlineMaker = (inline) => ({\n            in: inline.fadeIn,\n            out: inline.fadeOut,\n        });\n    }\n}\n\n/**\n * Create an animated temporal filter (torque)\n *\n * @param {carto.style.expression.expression} input input to base the temporal filter,\n * if input is a property, the beginning and end of the animation will be determined by the minimum and maximum timestamps of the property on the dataset,\n * this can be problematic if outliers are present. Otherwise input must be a number expression in which 0 means beginning of the animation and 1 means end.\n * @param {Number} duration duration of the animation in seconds\n * @param {carto.style.expression.fade} fade fadeIn/fadeOut configuration\n * @return {carto.style.expressions.torque}\n *\n * @example <caption> Temporal map by $day, with a duration of 40 seconds, fadeIn of 0.1 seconds and fadeOut of 0.3 seconds </caption>\n * new carto.Style(`width:    2\n * color:     ramp(linear(AVG($temp), 0,30), tealrose)\n * filter:       torque($day, 40, fade(0.1, 0.3))`);\n *\n * @memberof carto.style.expressions\n * @name torque\n * @function\n*/\nexport class Torque extends Expression {\n    constructor(input, duration = 10, fade = new Fade()) {\n        if (!Number.isFinite(duration)) {\n            throw new Error('Torque(): invalid second parameter, duration.');\n        }\n        if (input instanceof Property) {\n            input = linear(input, globalMin(input), globalMax(input));\n        }\n        const _cycle = floatDiv(floatMod(now(), duration), duration);\n        super({ input, _cycle, fade });\n        // TODO improve type check\n        this.duration = duration;\n    }\n    _compile(meta) {\n        super._compile(meta);\n        if (this.input.type != 'float') {\n            throw new Error('Torque(): invalid first parameter, input.');\n        } else if (this.fade.type != 'fade') {\n            throw new Error('Torque(): invalid third parameter, fade.');\n        }\n        this.type = 'float';\n\n        this.inlineMaker = (inline) =>\n            `(1.- clamp(abs(${inline.input}-${inline._cycle})*${this.duration.toFixed(20)}/(${inline.input}>${inline._cycle}? ${inline.fade.in}: ${inline.fade.out}), 0.,1.) )`;\n    }\n    getSimTime() {\n        if (!(this.input.min.eval() instanceof Date)){\n            return null;\n        }\n\n        const c = this._cycle.eval(); //from 0 to 1\n\n        const min = this.input.min.eval(); //Date\n        const max = this.input.max.eval();\n\n        const tmin = min.getTime();\n        const tmax = max.getTime();\n        const m = c;\n        const tmix = tmax * m + (1 - m) * tmin;\n\n        const date = new Date();\n        date.setTime(tmix);\n        return date;\n\n    }\n    eval(feature) {\n        const input = this.input.eval(feature);\n        const cycle = this._cycle.eval(feature);\n        const duration = this.duration;\n        const fadeIn = this.fade.fadeIn.eval(feature);\n        const fadeOut = this.fade.fadeOut.eval(feature);\n        return 1 - clamp(Math.abs(input - cycle) * duration / (input > cycle ? fadeIn : fadeOut), 0, 1);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/torque.js\n// module id = 52\n// module chunks = 0","import Expression from './expression';\nimport { float } from '../functions';\n\nexport const ViewportMax = generateAggregattion('max');\nexport const ViewportMin = generateAggregattion('min');\nexport const ViewportAvg = generateAggregattion('avg');\nexport const ViewportSum = generateAggregattion('sum');\nexport const ViewportCount = generateAggregattion('count');\n\nexport const GlobalMax = generateAggregattion('max', true);\nexport const GlobalMin = generateAggregattion('min', true);\nexport const GlobalAvg = generateAggregattion('avg', true);\nexport const GlobalSum = generateAggregattion('sum', true);\nexport const GlobalCount = generateAggregattion('count', true);\n\nexport const ViewportPercentile = generatePercentile();\nexport const GlobalPercentile = generatePercentile(true);\n\nfunction generateAggregattion(metadataPropertyName, global) {\n    return class Aggregattion extends Expression {\n        /**\n         * @jsapi\n         * @param {*} property\n         */\n        constructor(property) {\n            super({ value: float(0) });\n            this.property = property;\n        }\n        _compile(metadata) {\n            console.log(metadata);\n            super._compile(metadata);\n            // TODO improve type check\n            this.property._compile(metadata);\n            this.type = 'float';\n            super.inlineMaker = inline => inline.value;\n            if (global) {\n                this.value.expr = metadata.columns.find(c => c.name == this.property.name)[metadataPropertyName];\n            }\n        }\n        _getMinimumNeededSchema() {\n            return this.property._getMinimumNeededSchema();\n        }\n        _getDrawMetadataRequirements() {\n            if (!global) {\n                return { columns: [this.property.name] };\n            } else {\n                return { columns: [] };\n            }\n        }\n        _preDraw(drawMetadata, gl) {\n            const column = drawMetadata.columns.find(c => c.name == this.property.name);\n            if (!global) {\n                this.value.expr = column[metadataPropertyName];\n            }\n            if (Math.random() > 0.999) {\n                console.log(metadataPropertyName, this.property.name, this.value.expr);\n            }\n            this.value._preDraw(drawMetadata, gl);\n        }\n        eval() {\n            return this.value.expr;\n        }\n    };\n}\n\nfunction generatePercentile(global) {\n    return class Percentile extends Expression {\n        /**\n         * @jsapi\n         * @param {*} property\n         */\n        constructor(property, percentile) {\n            if (!Number.isFinite(percentile)) {\n                throw new Error('Percentile must be a fixed literal number');\n            }\n            super({ value: float(0) });\n            // TODO improve type check\n            this.property = property;\n            this.percentile = percentile;\n        }\n        _compile(metadata) {\n            super._compile(metadata);\n            this.property._compile(metadata);\n            this.type = 'float';\n            super.inlineMaker = inline => inline.value;\n            if (global) {\n                const copy = metadata.sample.map(s => s[this.property.name]);\n                copy.sort((x, y) => x - y);\n                const p = this.percentile / 100;\n                this.value.expr = copy[Math.floor(p * copy.length)];\n            }\n        }\n        _getMinimumNeededSchema() {\n            return this.property._getMinimumNeededSchema();\n        }\n        _getDrawMetadataRequirements() {\n            if (!global) {\n                return { columns: [this.property.name] };\n            } else {\n                return { columns: [] };\n            }\n        }\n        _preDraw(drawMetadata, gl) {\n            if (!global) {\n                const column = drawMetadata.columns.find(c => c.name == this.property.name);\n                const total = column.accumHistogram[column.histogramBuckets - 1];\n                // TODO OPT: this could be faster with binary search\n                for (var i = 0; i < column.histogramBuckets; i++) {\n                    if (column.accumHistogram[i] >= this.percentile / 100 * total) {\n                        break;\n                    }\n                }\n                const br = i / column.histogramBuckets * (column.max - column.min) + column.min;\n                this.value.expr = br;\n            }\n\n            if (Math.random() > 0.99) {\n                console.log(`percentile${this.percentile}`, this.property.name, this.value.expr);\n            }\n            this.value._preDraw(drawMetadata, gl);\n        }\n        eval() {\n            return this.value.expr;\n        }\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/viewportAggregation.js\n// module id = 53\n// module chunks = 0","import Expression from './expression';\nimport { checkInstance } from './utils';\n\nexport class Width extends Expression {\n    constructor() {\n        super({});\n        this.type = 'propertyReference';\n    }\n}\n\nexport class Asc extends Expression {\n    constructor(by) {\n        super({});\n        checkInstance('asc', 'by', 0, Width, by);\n        this.type = 'orderer';\n    }\n}\n\nexport class Desc extends Expression {\n    constructor(by) {\n        super({});\n        checkInstance('asc', 'by', 0, Width, by);\n        this.type = 'orderer';\n    }\n}\n\nexport class NoOrder extends Expression {\n    constructor() {\n        super({});\n        this.type = 'orderer';\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/expressions/ordering.js\n// module id = 54\n// module chunks = 0","import Base from './base';\nimport { Dataframe } from '../../core/renderer';\nimport * as rsys from '../../client/rsys';\nimport * as util from '../util';\nimport CartoValidationError from '../error-handling/carto-validation-error';\nimport Metadata from '../../core/metadata';\n\nconst SAMPLE_TARGET_SIZE = 1000;\n\nexport default class GeoJSON extends Base {\n\n    /**\n     * Create a carto.source.GeoJSON.\n     *\n     * @param {object} data - A GeoJSON data object\n     *\n     * @example\n     * new carto.source.GeoJSON({\n     *   \"type\": \"Feature\",\n     *   \"geometry\": {\n     *     \"type\": \"Point\",\n     *     \"coordinates\": [ 0, 0 ]\n     *   },\n     *   \"properties\": {\n     *     \"cartodb_id\": 1\n     *   }\n     * });\n     *\n     * @fires CartoError\n     *\n     * @constructor GeoJSON\n     * @extends carto.source.Base\n     * @memberof carto.source\n     * @api\n     */\n    constructor(data) {\n        super();\n        this._checkData(data);\n\n        this._type = ''; // Point, LineString, MultiLineString, Polygon, MultiPolygon\n        this._categoryStringToIDMap = {};\n        this._numCategories = 0;\n        this._numFields = [];\n        this._catFields = [];\n        this._features = this._getFeatures(data);\n        this._metadata = this._computeMetadata();\n\n        this._loaded = false;\n    }\n\n    bindLayer(addDataframe, removeDataframe) {\n        this._addDataframe = addDataframe;\n        this._removeDataframe = removeDataframe;\n    }\n\n    requestMetadata() {\n        return Promise.resolve(this._metadata);\n    }\n\n    requestData() {\n        if (this._loaded) {\n            return;\n        }\n        this._loaded = true;\n        const dataframe = new Dataframe({\n            active: true,\n            center: { x: 0, y: 0 },\n            geom: this._decodeGeometry(),\n            properties: this._decodeProperties(),\n            scale: 1,\n            size: this._features.length,\n            type: this._getDataframeType(this._type)\n        });\n        this._addDataframe(dataframe);\n    }\n\n    _checkData(data) {\n        if (util.isUndefined(data)) {\n            throw new CartoValidationError('source', 'dataRequired');\n        }\n        if (!util.isObject(data)) {\n            throw new CartoValidationError('source', 'dataObjectRequired');\n        }\n    }\n\n    _getFeatures(data) {\n        if (data.type === 'FeatureCollection') {\n            return data.features || [];\n        } else if (data.type === 'Feature') {\n            return [data];\n        }\n        else {\n            throw new CartoValidationError('source', 'nonValidGeoJSONData');\n        }\n    }\n\n    _computeMetadata() {\n        const categoryIDs = {};\n        const columns = [];\n        const sample = [];\n        const featureCount = this._features.length;\n\n        for (var i = 0; i < this._features.length; i++) {\n            const properties = this._features[i].properties;\n            Object.keys(properties).map(name => {\n                const value = properties[name];\n                Number.isFinite(value) ?\n                    this._addNumericPropertyToMetadata(name, value, columns) :\n                    this._addCategoryPropertyToMetadata(name, value, columns);\n            });\n            this._sampleFeatureOnMetadata(properties, sample, this._features.length);\n        }\n        this._numFields.map(name => {\n            const column = columns.find(c => c.name == name);\n            column.avg = column.sum / column.count;\n        });\n        this._catFields.map(name => {\n            const column = columns.find(c => c.name == name);\n            column.categoryNames.map(name => categoryIDs[name] = this._getCategoryIDFromString(name));\n        });\n\n        this._metadata = new Metadata(categoryIDs, columns, featureCount, sample);\n        return this._metadata;\n    }\n\n    _sampleFeatureOnMetadata(feature, sample, featureCount) {\n        if (featureCount > SAMPLE_TARGET_SIZE) {\n            const sampling = SAMPLE_TARGET_SIZE / featureCount;\n            if (Math.random() > sampling) {\n                return;\n            }\n        }\n        sample.push(feature);\n    }\n\n    _addNumericPropertyToMetadata(propertyName, value, columns) {\n        if (this._catFields.includes(propertyName)) {\n            throw new Error(`Unsupported GeoJSON: the property '${propertyName}' has different types in different features.`);\n        }\n        if (!this._numFields.includes(propertyName)) {\n            this._numFields.push(propertyName);\n            columns.push({\n                name: propertyName,\n                type: 'float',\n                min: Number.POSITIVE_INFINITY,\n                max: Number.NEGATIVE_INFINITY,\n                avg: Number.NaN,\n                sum: 0,\n                count: 0\n            });\n        }\n        const column = columns.find(c => c.name == propertyName);\n        column.min = Math.min(column.min, value);\n        column.max = Math.max(column.max, value);\n        column.sum += value;\n        column.count++;\n    }\n    _addCategoryPropertyToMetadata(propertyName, value, columns) {\n        if (this._numFields.includes(propertyName)) {\n            throw new Error(`Unsupported GeoJSON: the property '${propertyName}' has different types in different features.`);\n        }\n        if (!this._catFields.includes(propertyName)) {\n            this._catFields.push(propertyName);\n            columns.push({\n                name: propertyName,\n                type: 'category',\n                categoryNames: [],\n                categoryCounts: [],\n            });\n        }\n        const column = columns.find(c => c.name == propertyName);\n        if (!column.categoryNames.includes(value)) {\n            column.categoryNames.push(value);\n            column.categoryCounts.push(0);\n        }\n        column.categoryCounts[column.categoryNames.indexOf(value)]++;\n    }\n\n    _decodeProperties() {\n        const properties = {};\n        this._numFields.concat(this._catFields).map(name => {\n            // The dataframe expects to have a padding of 1024, adding 1024 empty values assures this condition is met            \n            properties[name] = new Float32Array(this._features.length + 1024);\n        });\n        for (var i = 0; i < this._features.length; i++) {\n            const f = this._features[i];\n\n            this._catFields.map(name => {\n                properties[name][i] = this._getCategoryIDFromString(f.properties[name]);\n            });\n            this._numFields.map(name => {\n                properties[name][i] = Number(f.properties[name]);\n            });\n            // TODO support date / timestamp properties\n        }\n        return properties;\n    }\n\n    _getCategoryIDFromString(category) {\n        if (this._categoryStringToIDMap[category] !== undefined) {\n            return this._categoryStringToIDMap[category];\n        }\n        this._categoryStringToIDMap[category] = this._numCategories;\n        this._numCategories++;\n        return this._categoryStringToIDMap[category];\n    }\n\n    _getDataframeType(type) {\n        switch (type) {\n            case 'Point':\n                return 'point';\n            case 'LineString':\n            case 'MultiLineString':\n                return 'line';\n            case 'Polygon':\n            case 'MultiPolygon':\n                return 'polygon';\n            default:\n                return '';\n        }\n    }\n\n    _decodeGeometry() {\n        let geometry = null;\n        const numFeatures = this._features.length;\n        for (let i = 0; i < numFeatures; i++) {\n            const feature = this._features[i];\n            if (feature.type === 'Feature') {\n                const type = feature.geometry.type;\n                const coordinates = feature.geometry.coordinates;\n                if (!this._type) {\n                    this._type = type;\n                } else if (this._type !== type) {\n                    throw new CartoValidationError('source', `multipleFeatureTypes[${this._type}, ${type}]`);\n                }\n                if (type === 'Point') {\n                    if (!geometry) {\n                        geometry = new Float32Array(numFeatures * 2);\n                    }\n                    const point = this._computePointGeometry(coordinates);\n                    geometry[2 * i + 0] = point.x;\n                    geometry[2 * i + 1] = point.y;\n                }\n                else if (type === 'LineString') {\n                    if (!geometry) {\n                        geometry = [];\n                    }\n                    const line = this._computeLineStringGeometry(coordinates);\n                    geometry.push([line]);\n                }\n                else if (type === 'MultiLineString') {\n                    if (!geometry) {\n                        geometry = [];\n                    }\n                    const multiline = this._computeMultiLineStringGeometry(coordinates);\n                    geometry.push(multiline);\n                }\n                else if (type === 'Polygon') {\n                    if (!geometry) {\n                        geometry = [];\n                    }\n                    const polygon = this._computePolygonGeometry(coordinates);\n                    geometry.push([polygon]);\n                }\n                else if (type === 'MultiPolygon') {\n                    if (!geometry) {\n                        geometry = [];\n                    }\n                    const multipolygon = this._computeMultiPolygonGeometry(coordinates);\n                    geometry.push(multipolygon);\n                }\n            }\n        }\n        return geometry;\n    }\n\n    _computePointGeometry(data) {\n        const lat = data[1];\n        const lng = data[0];\n        const wm = util.projectToWebMercator({ lat, lng });\n        return rsys.wToR(wm.x, wm.y, { scale: util.WM_R, center: { x: 0, y: 0 } });\n    }\n\n    _computeLineStringGeometry(data) {\n        let line = [];\n        for (let i = 0; i < data.length; i++) {\n            const point = this._computePointGeometry(data[i]);\n            line.push(point.x, point.y);\n        }\n        return line;\n    }\n\n    _computeMultiLineStringGeometry(data) {\n        let multiline = [];\n        for (let i = 0; i < data.length; i++) {\n            let line = this._computeLineStringGeometry(data[i]);\n            if (line.length > 0) {\n                multiline.push(line);\n            }\n        }\n        return multiline;\n    }\n\n    _computePolygonGeometry(data) {\n        let polygon = {\n            flat: [],\n            holes: []\n        };\n        let holeIndex = 0;\n        for (let i = 0; i < data.length; i++) {\n            for (let j = 0; j < data[i].length; j++) {\n                const point = this._computePointGeometry(data[i][j]);\n                polygon.flat.push(point.x, point.y);\n            }\n            if (!this._isClockWise(data[i])) {\n                if (i > 0) {\n                    holeIndex += data[i - 1].length;\n                    polygon.holes.push(holeIndex);\n                } else {\n                    throw new CartoValidationError('source', 'firstPolygonExternal');\n                }\n            }\n        }\n        return polygon;\n    }\n\n    _computeMultiPolygonGeometry(data) {\n        let multipolygon = [];\n        for (let i = 0; i < data.length; i++) {\n            let polygon = this._computePolygonGeometry(data[i]);\n            if (polygon.flat.length > 0) {\n                multipolygon.push(polygon);\n            }\n        }\n        return multipolygon;\n    }\n\n    _isClockWise(vertices) {\n        let total = 0;\n        let pt1 = vertices[0], pt2;\n        for (let i = 0; i < vertices.length - 1; i++) {\n            pt2 = vertices[i + 1];\n            total += (pt2[1] - pt1[1]) * (pt2[0] + pt1[0]);\n            pt1 = pt2;\n        }\n        return total >= 0;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/source/geojson.js\n// module id = 55\n// module chunks = 0","import * as point from './point';\nimport * as tris from './tris';\nimport * as line from './lines';\nexport { point, tris, line };\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/renderer/index.js\n// module id = 56\n// module chunks = 0","//TODO performance optimization: direct stroke/color/widths from uniform instead of texture read when possible\n\n/*\n    Antialiasing\n\n    I think that the current antialiasing method is correct.\n    It is certainly fast since it uses the distance to the circumference.\n    The results have been checked against a reference 4x4 sampling method.\n\n    The vertex shader is responsible for the oversizing of the points to \"enable\" conservative rasterization.\n    See https://developer.nvidia.com/content/dont-be-conservative-conservative-rasterization\n    This oversizing requires a change of the coordinate space that must be reverted in the fragment shader.\n    This is done with `sizeNormalizer`.\n\n\n    Debugging antialiasing is hard. I'm gonna leave here a few helpers:\n\n    float referenceAntialias(vec2 p){\n        float alpha=0.;\n        for (float x=-0.75; x<1.; x+=0.5){\n            for (float y=-0.75; y<1.; y+=0.5){\n                vec2 p2 = p + vec2(x,y)*dp;\n                if (length(p2)<1.){\n                    alpha+=1.;\n                }\n            }\n        }\n        return alpha/16.;\n    }\n    float noAntialias(vec2 p){\n        if (length(p)<1.){\n            return 1.;\n        }\n        return 0.;\n    }\n\n    Use this to check that the affected antiliased pixels are ok:\n\n    if (c.a==1.||c.a==0.){\n        gl_FragColor = vec4(1,0,0,1);\n        return;\n    }\n\n */\n\nexport const VS = `\n\nprecision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform vec2 vertexScale;\nuniform vec2 vertexOffset;\nuniform float orderMinWidth;\nuniform float orderMaxWidth;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D colorStrokeTex;\nuniform sampler2D strokeWidthTex;\nuniform sampler2D filterTex;\n//TODO order bucket texture\n\nvarying highp vec4 color;\nvarying highp vec4 stroke;\nvarying highp float dp;\nvarying highp float sizeNormalizer;\nvarying highp float fillScale;\nvarying highp float strokeScale;\n\nvoid main(void) {\n    color = texture2D(colorTex, featureID);\n    stroke = texture2D(colorStrokeTex, featureID);\n    float filtering = texture2D(filterTex, featureID).a;\n    color.a *= filtering;\n    stroke.a *= filtering;\n\n    float size = 64.*texture2D(widthTex, featureID).a;\n    float fillSize = size;\n    float strokeSize = 64.*texture2D(strokeWidthTex, featureID).a;\n    size+=strokeSize*0.5;\n    fillScale=size/fillSize;\n    strokeScale=size/max(0.001, (fillSize-strokeSize*0.5));\n    if (fillScale==strokeScale){\n        stroke.a=0.;\n    }\n    gl_PointSize = size+2.;\n    dp = 1.0/(size+1.);\n    sizeNormalizer = (size+1.)/(size);\n\n    vec4 p = vec4(vertexScale*vertexPosition-vertexOffset, 0.5, 1.);\n    if (size==0. || (stroke.a==0. && color.a==0.) || size<orderMinWidth || size>orderMaxWidth){\n        p.x=10000.;\n    }\n    gl_Position  = p;\n}`;\n\nexport const FS = `\nprecision highp float;\n\nvarying lowp vec4 color;\nvarying lowp vec4 stroke;\nvarying highp float dp;\nvarying highp float sizeNormalizer;\nvarying highp float fillScale;\nvarying highp float strokeScale;\n\nfloat distanceAntialias(vec2 p){\n    return 1. - smoothstep(1.-dp*1.4142, 1.+dp*1.4142, length(p));\n}\n\n\nvoid main(void) {\n    vec2 p = (2.*gl_PointCoord-vec2(1.))*sizeNormalizer;\n    vec4 c = color;\n\n    vec4 s = stroke;\n\n    c.a *= distanceAntialias(p*fillScale);\n    c.rgb*=c.a;\n\n    s.a *= distanceAntialias(p);\n    s.a *= 1.-distanceAntialias((strokeScale)*p);\n    s.rgb*=s.a;\n\n    c=s+(1.-s.a)*c;\n\n    gl_FragColor = c;\n}`;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/renderer/point.js\n// module id = 57\n// module chunks = 0","export const VS = `\n\nprecision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\n\nuniform vec2 vertexScale;\nuniform vec2 vertexOffset;\n\nuniform sampler2D colorTex;\nuniform sampler2D filterTex;\n\nvarying highp vec4 color;\n\n\nvoid main(void) {\n    vec4 c = texture2D(colorTex, featureID);\n    float filtering = texture2D(filterTex, featureID).a;\n    c.a *= filtering;\n    vec4 p = vec4(vertexScale*vertexPosition-vertexOffset, 0.5, 1.);\n    if (c.a==0.){\n        p.x=10000.;\n    }\n    color = vec4(c.rgb*c.a, c.a);\n    gl_Position  = p;\n}`;\n\nexport const FS = `\nprecision highp float;\n\nvarying highp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}`;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/renderer/tris.js\n// module id = 58\n// module chunks = 0","export const VS = `\n\nprecision highp float;\n\nattribute vec2 vertexPosition;\nattribute vec2 featureID;\nattribute vec2 normal;\n\nuniform vec2 vertexScale;\nuniform vec2 vertexOffset;\nuniform vec2 normalScale;\n\nuniform sampler2D colorTex;\nuniform sampler2D widthTex;\nuniform sampler2D filterTex;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    color = texture2D(colorTex, featureID);\n    float filtering = texture2D(filterTex, featureID).a;\n    color.a *= filtering;\n    color.rgb *= color.a;\n    float size = 64.*texture2D(widthTex, featureID).a;\n\n    vec4 p = vec4(vertexScale*(vertexPosition)+normalScale*normal*size-vertexOffset, 0.5, 1.);\n    if (size==0. || color.a==0.){\n        p.x=10000.;\n    }\n    gl_Position  = p;\n}`;\n\nexport const FS = `\nprecision highp float;\n\nvarying lowp vec4 color;\n\nvoid main(void) {\n    gl_FragColor = color;\n}`;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/renderer/lines.js\n// module id = 59\n// module chunks = 0","//TODO Discuss size scaling constant, maybe we need to remap using an exponential map\n\nexport const VS = `\n\nprecision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n`;\n\nexport const FS = `\n\nprecision highp float;\n\nvarying  vec2 uv;\n\n$PREFACE\n\nuniform sampler2D property0;\nuniform sampler2D property1;\nuniform sampler2D property2;\nuniform sampler2D property3;\n\nvoid main(void) {\n    // TODO texture reads should be dynamic to improve Texture Unit utilization\n    float p0=texture2D(property0, uv).a;\n    float p1=texture2D(property1, uv).a;\n    float p2=texture2D(property2, uv).a;\n    float p3=texture2D(property3, uv).a;\n    gl_FragColor = $INLINE;\n}\n`;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/styler/index.js\n// module id = 60\n// module chunks = 0","\nexport const VS = `\n\nprecision highp float;\nattribute vec2 vertex;\n\nvarying  vec2 uv;\n\nvoid main(void) {\n    uv = vertex*0.5+vec2(0.5);\n    gl_Position = vec4(vertex, 0.5, 1.);\n}\n`;\n\nexport const FS = `\n\nprecision highp float;\n\nvarying  vec2 uv;\n\nuniform sampler2D aaTex;\n\nvoid main(void) {\n    vec4 aa = texture2D(aaTex, uv);\n    gl_FragColor = aa;\n}\n`;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/aaBlender.js\n// module id = 61\n// module chunks = 0","/** \n * To avoid recompiling the shaders we keep a shader cache.\n * We need a different shader per webgl context so we use a 2 level cache where at the first level\n * the webgl context is the key and at the second level the shader code is the cache key.\n */\nexport default class ShaderCache {\n    constructor() {\n        this.caches = new WeakMap();\n    }\n\n    get(gl, shadercode) {\n        if (this.caches.has(gl)) {\n            let cache = this.caches.get(gl);\n            if (cache[shadercode]) {\n                return cache[shadercode];\n            }\n        }\n    }\n\n    set(gl, shadercode, shader) {\n        if (this.caches.has(gl)) {\n            let cache = this.caches.get(gl);\n            cache[shadercode] = shader;\n        } else {\n            let cache = new WeakMap;\n            cache[shadercode] = shader;\n            this.caches.set(gl, cache);\n        }\n    }\n\n    has(gl, shadercode) {\n        return this.get(gl, shadercode) !== undefined;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/shaders/shader-cache.js\n// module id = 62\n// module chunks = 0","import * as earcut from 'earcut';\n\n\n// Decode a tile geometry\n// If the geometry type is 'point' it will pass trough the geom (the vertex array)\n// If the geometry type is 'polygon' it will triangulate the polygon list (geom)\n//      geom will be a list of polygons in which each polygon will have a flat array of vertices and a list of holes indices\n//      Example:\n/*         let geom = [\n                {\n                    flat: [\n                        0.,0., 1.,0., 1.,1., 0.,1., 0.,0, //A square\n                        0.25,0.25, 0.75,0.25, 0.75,0.75, 0.25,0.75, 0.25,0.25//A small square\n                    ]\n                    holes: [5]\n                }\n            ]\n*/\n// If the geometry type is 'line' it will generate the appropriate zero-sized, vertex-shader expanded triangle list with mitter joints.\n// The geom will be an array of coordinates in this case\nexport function decodeGeom(geomType, geom) {\n    if (geomType == 'point') {\n        return decodePoint(geom);\n    }\n    if (geomType == 'polygon') {\n        return decodePolygon(geom);\n    }\n    if (geomType == 'line') {\n        return decodeLine(geom);\n    }\n    throw new Error(`Unimplemented geometry type: '${geomType}'`);\n}\n\nfunction decodePoint(geometry) {\n    return {\n        geometry: geometry,\n        breakpointList: []\n    };\n}\n\n\nfunction decodePolygon(geometry) {\n    let vertexArray = []; //Array of triangle vertices\n    let breakpointList = []; // Array of indices (to vertexArray) that separate each feature\n    geometry.map(feature => {\n        feature.map(polygon => {\n            const triangles = earcut(polygon.flat, polygon.holes);\n            triangles.map(index => {\n                vertexArray.push(polygon.flat[2 * index]);\n                vertexArray.push(polygon.flat[2 * index + 1]);\n            });\n        });\n        breakpointList.push(vertexArray.length);\n    });\n    return {\n        geometry: new Float32Array(vertexArray),\n        breakpointList\n    };\n}\n\nfunction decodeLine(geom) {\n    let normals = [];\n    let geometry = [];\n    let breakpointList = []; // Array of indices (to vertexArray) that separate each feature\n    geom.map(feature => {\n        feature.map(lineString => {\n            // Create triangulation\n            \n            for (let i = 0; i < lineString.length - 2; i += 2) {\n                const a = [lineString[i + 0], lineString[i + 1]];\n                const b = [lineString[i + 2], lineString[i + 3]];\n                const normal = getLineNormal(b, a);\n                let na = normal;\n                let nb = normal;\n                \n                if (i > 0) {\n                    const prev = [lineString[i - 2], lineString[i - 1]];\n                    na = getJointNormal(prev, a, b) || na;\n                }\n                if (i < lineString.length - 4) {\n                    const next = [lineString[i + 4], lineString[i + 5]];\n                    nb = getJointNormal(a, b, next) || nb;\n                }\n\n                // First triangle\n    \n                normals.push(-na[0], -na[1]);\n                normals.push(na[0], na[1]);\n                normals.push(-nb[0], -nb[1]);\n    \n                geometry.push(a[0], a[1]);\n                geometry.push(a[0], a[1]);\n                geometry.push(b[0], b[1]);\n\n                // Second triangle\n    \n                normals.push(na[0], na[1]);\n                normals.push(nb[0], nb[1]);\n                normals.push(-nb[0], -nb[1]);\n    \n                geometry.push(a[0], a[1]);\n                geometry.push(b[0], b[1]);\n                geometry.push(b[0], b[1]);\n            }\n        });\n        breakpointList.push(geometry.length);\n    });\n    return {\n        geometry: new Float32Array(geometry),\n        breakpointList,\n        normals: new Float32Array(normals)\n    };\n}\n\nfunction getLineNormal(a, b) {\n    const dx = b[0] - a[0];\n    const dy = b[1] - a[1];\n    return normalize([-dy, dx]);\n}\n\nfunction getJointNormal(a, b, c) {\n    const u = normalize([a[0] - b[0], a[1] - b[1]]);\n    const v = normalize([c[0] - b[0], c[1] - b[1]]);\n    const sin = - u[1] * v[0] + u[0] * v[1];\n    if (sin !== 0) {\n        return [(u[0] + v[0]) / sin, (u[1] + v[1]) / sin];\n    }\n}\n\nfunction normalize(v) {\n    const s = Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n    return [v[0] / s, v[1] / s];\n}\n\nexport default { decodeGeom };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/decoder.js\n// module id = 63\n// module chunks = 0","'use strict';\n\nmodule.exports = earcut;\nmodule.exports.default = earcut;\n\nfunction earcut(data, holeIndices, dim) {\n\n    dim = dim || 2;\n\n    var hasHoles = holeIndices && holeIndices.length,\n        outerLen = hasHoles ? holeIndices[0] * dim : data.length,\n        outerNode = linkedList(data, 0, outerLen, dim, true),\n        triangles = [];\n\n    if (!outerNode) return triangles;\n\n    var minX, minY, maxX, maxY, x, y, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = maxX = data[0];\n        minY = maxY = data[1];\n\n        for (var i = dim; i < outerLen; i += dim) {\n            x = data[i];\n            y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 1 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    var i, last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (i = start; i < end; i += dim) last = insertNode(i, data[i], data[i + 1], last);\n    } else {\n        for (i = end - dim; i >= start; i -= dim) last = insertNode(i, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    var p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    var stop = ear,\n        prev, next;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        prev = ear.prev;\n        next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            // cut off the triangle\n            triangles.push(prev.i / dim);\n            triangles.push(ear.i / dim);\n            triangles.push(next.i / dim);\n\n            removeNode(ear);\n\n            // skipping the next vertice leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(ear, triangles, dim);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    var p = ear.next.next;\n\n    while (p !== ear.prev) {\n        if (pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    var a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // triangle bbox; min & max are calculated like this for speed\n    var minTX = a.x < b.x ? (a.x < c.x ? a.x : c.x) : (b.x < c.x ? b.x : c.x),\n        minTY = a.y < b.y ? (a.y < c.y ? a.y : c.y) : (b.y < c.y ? b.y : c.y),\n        maxTX = a.x > b.x ? (a.x > c.x ? a.x : c.x) : (b.x > c.x ? b.x : c.x),\n        maxTY = a.y > b.y ? (a.y > c.y ? a.y : c.y) : (b.y > c.y ? b.y : c.y);\n\n    // z-order range for the current triangle bbox;\n    var minZ = zOrder(minTX, minTY, minX, minY, invSize),\n        maxZ = zOrder(maxTX, maxTY, minX, minY, invSize);\n\n    var p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p !== ear.prev && p !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n !== ear.prev && n !== ear.next &&\n            pointInTriangle(a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y) &&\n            area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles, dim) {\n    var p = start;\n    do {\n        var a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i / dim);\n            triangles.push(p.i / dim);\n            triangles.push(b.i / dim);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return p;\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    var a = start;\n    do {\n        var b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                var c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize);\n                earcutLinked(c, triangles, dim, minX, minY, invSize);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    var queue = [],\n        i, len, start, end, list;\n\n    for (i = 0, len = holeIndices.length; i < len; i++) {\n        start = holeIndices[i] * dim;\n        end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareX);\n\n    // process holes from left to right\n    for (i = 0; i < queue.length; i++) {\n        eliminateHole(queue[i], outerNode);\n        outerNode = filterPoints(outerNode, outerNode.next);\n    }\n\n    return outerNode;\n}\n\nfunction compareX(a, b) {\n    return a.x - b.x;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole(hole, outerNode) {\n    outerNode = findHoleBridge(hole, outerNode);\n    if (outerNode) {\n        var b = splitPolygon(outerNode, hole);\n        filterPoints(b, b.next);\n    }\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    var p = outerNode,\n        hx = hole.x,\n        hy = hole.y,\n        qx = -Infinity,\n        m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    do {\n        if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            var x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                if (x === hx) {\n                    if (hy === p.y) return p;\n                    if (hy === p.next.y) return p.next;\n                }\n                m = p.x < p.next.x ? p : p.next;\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    if (hx === qx) return m.prev; // hole touches outer segment; pick lower endpoint\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    var stop = m,\n        mx = m.x,\n        my = m.y,\n        tanMin = Infinity,\n        tan;\n\n    p = m.next;\n\n    while (p !== stop) {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if ((tan < tanMin || (tan === tanMin && p.x > m.x)) && locallyInside(p, hole)) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    }\n\n    return m;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    var p = start;\n    do {\n        if (p.z === null) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    var i, p, q, e, tail, numMerges, pSize, qSize,\n        inSize = 1;\n\n    do {\n        p = list;\n        list = null;\n        tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            q = p;\n            pSize = 0;\n            for (i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = 32767 * (x - minX) * invSize;\n    y = 32767 * (y - minY) * invSize;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    var p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) - (ax - px) * (cy - py) >= 0 &&\n           (ax - px) * (by - py) - (bx - px) * (ay - py) >= 0 &&\n           (bx - px) * (cy - py) - (cx - px) * (by - py) >= 0;\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) &&\n           locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b);\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    if ((equals(p1, q1) && equals(p2, q2)) ||\n        (equals(p1, q2) && equals(p2, q1))) return true;\n    return area(p1, q1, p2) > 0 !== area(p1, q1, q2) > 0 &&\n           area(p2, q2, p1) > 0 !== area(p2, q2, q1) > 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    var p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    var p = a,\n        inside = false,\n        px = (a.x + b.x) / 2,\n        py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    var a2 = new Node(a.i, a.x, a.y),\n        b2 = new Node(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    var p = new Node(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction Node(i, x, y) {\n    // vertice index in coordinates array\n    this.i = i;\n\n    // vertex coordinates\n    this.x = x;\n    this.y = y;\n\n    // previous and next vertice nodes in a polygon ring\n    this.prev = null;\n    this.next = null;\n\n    // z-order curve value\n    this.z = null;\n\n    // previous and next nodes in z-order\n    this.prevZ = null;\n    this.nextZ = null;\n\n    // indicates whether this is a steiner point\n    this.steiner = false;\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nearcut.deviation = function (data, holeIndices, dim, triangles) {\n    var hasHoles = holeIndices && holeIndices.length;\n    var outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    var polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (var i = 0, len = holeIndices.length; i < len; i++) {\n            var start = holeIndices[i] * dim;\n            var end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    var trianglesArea = 0;\n    for (i = 0; i < triangles.length; i += 3) {\n        var a = triangles[i] * dim;\n        var b = triangles[i + 1] * dim;\n        var c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n};\n\nfunction signedArea(data, start, end, dim) {\n    var sum = 0;\n    for (var i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nearcut.flatten = function (data) {\n    var dim = data[0][0].length,\n        result = {vertices: [], holes: [], dimensions: dim},\n        holeIndex = 0;\n\n    for (var i = 0; i < data.length; i++) {\n        for (var j = 0; j < data[i].length; j++) {\n            for (var d = 0; d < dim; d++) result.vertices.push(data[i][j][d]);\n        }\n        if (i > 0) {\n            holeIndex += data[i - 1].length;\n            result.holes.push(holeIndex);\n        }\n    }\n    return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/earcut/src/earcut.js\n// module id = 64\n// module chunks = 0","import * as ERROR_LIST from './error-list';\n\nconst UNEXPECTED_ERROR = 'unexpected error';\nconst GENERIC_ORIGIN = 'generic';\n\n/**\n * Represents an error in the carto library.\n *\n * @typedef {object} CartoError\n * @property {string} message - A short error description\n * @property {string} name - The name of the error \"CartoError\"\n * @property {string} origin - Where the error was originated: 'validation'\n * @property {object} originalError - An object containing the internal/original error\n * @property {object} stack - Error stack trace\n * @property {string} type - Error type\n * @api\n */\nclass CartoError extends Error {\n    /**\n     * Build a cartoError from a generic error.\n     * @constructor\n     *\n     * @return {CartoError} A well formed object representing the error.\n     */\n    constructor(error) {\n        super((error && error.message) || UNEXPECTED_ERROR);\n\n        this.name = 'CartoError';\n        this.originalError = error;\n        // this.stack = (new Error()).stack;\n        this.type = (error && error.type) || '';\n        this.origin = (error && error.origin) || GENERIC_ORIGIN;\n\n        // Add extra fields\n        var extraFields = this._getExtraFields();\n        this.message = extraFields.friendlyMessage;\n    }\n\n    _getExtraFields() {\n        const errorList = this._getErrorList();\n        for (let key in errorList) {\n            const error = errorList[key];\n            if (!(error.messageRegex instanceof RegExp)) {\n                throw new Error(`MessageRegex on ${key} is not a RegExp.`);\n            }\n            if (error.messageRegex.test(this.message)) {\n                return {\n                    friendlyMessage: this._replaceRegex(error)\n                };\n            }\n        }\n\n        // When cartoError not found return generic values\n        return {\n            friendlyMessage: this.message || ''\n        };\n    }\n\n    _getErrorList() {\n        return ERROR_LIST[this.origin] && ERROR_LIST[this.origin][this.type];\n    }\n\n    /**\n     * Replace $0 with the proper paramter in the listedError regex to build a friendly message.\n     */\n    _replaceRegex (error) {\n        if (!error.friendlyMessage) {\n            return this.message;\n        }\n        var match = this.message && this.message.match(error.messageRegex);\n        if (match && match.length > 1) {\n            return error.friendlyMessage.replace('$0', match[1]);\n        }\n        return error.friendlyMessage;\n    }\n}\n\nexport { CartoError };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/error-handling/carto-error.js\n// module id = 65\n// module chunks = 0","const validation = {\n    layer: {\n        'id-required': {\n            messageRegex: /idRequired/,\n            friendlyMessage: '`id` property required.'\n        },\n        'id-string-required': {\n            messageRegex: /idStringRequired/,\n            friendlyMessage: '`id` property must be a string.'\n        },\n        'non-valid-id': {\n            messageRegex: /nonValidId/,\n            friendlyMessage: '`id` property must be not empty.'\n        },\n        'source-required': {\n            messageRegex: /sourceRequired/,\n            friendlyMessage: '`source` property required.'\n        },\n        'non-valid-source': {\n            messageRegex: /nonValidSource/,\n            friendlyMessage: 'The given object is not a valid source. See \"carto.source.Base\".'\n        },\n        'style-required': {\n            messageRegex: /styleRequired/,\n            friendlyMessage: '`style` property required.'\n        },\n        'non-valid-style': {\n            messageRegex: /nonValidStyle/,\n            friendlyMessage: 'The given object is not a valid style. See \"carto.Style\".'\n        }\n    },\n    setup: {\n        'auth-required': {\n            messageRegex: /authRequired/,\n            friendlyMessage: '`auth` property is required.'\n        },\n        'auth-object-required': {\n            messageRegex: /authObjectRequired/,\n            friendlyMessage: '`auth` property must be an object.'\n        },\n        'api-key-required': {\n            messageRegex: /apiKeyRequired/,\n            friendlyMessage: '`apiKey` property is required.'\n        },\n        'api-key-string-required': {\n            messageRegex: /apiKeyStringRequired/,\n            friendlyMessage: '`apiKey` property must be a string.'\n        },\n        'non-valid-api-key': {\n            messageRegex: /nonValidApiKey/,\n            friendlyMessage: '`apiKey` property must be not empty.'\n        },\n        'username-required': {\n            messageRegex: /usernameRequired/,\n            friendlyMessage: '`username` property is required.'\n        },\n        'username-string-required': {\n            messageRegex: /usernameStringRequired/,\n            friendlyMessage: '`username` property must be a string.'\n        },\n        'non-valid-username': {\n            messageRegex: /nonValidUsername/,\n            friendlyMessage: '`username` property must be not empty.'\n        },\n        'config-object-required': {\n            messageRegex: /configObjectRequired/,\n            friendlyMessage: '`config` property must be an object.'\n        },\n        'server-url-string-required': {\n            messageRegex: /serverURLStringRequired/,\n            friendlyMessage: '`serverURL` property must be a string.'\n        }\n    },\n    source: {\n        'non-valid-server-url': {\n            messageRegex: /nonValidServerURL/,\n            friendlyMessage: '`serverURL` property is not a valid URL.'\n        },\n        'table-name-required': {\n            messageRegex: /tableNameRequired/,\n            friendlyMessage: '`tableName` property is required.'\n        },\n        'table-name-string-required': {\n            messageRegex: /tableNameStringRequired$/,\n            friendlyMessage: '`tableName` property must be a string.'\n        },\n        'non-valid-table-name': {\n            messageRegex: /nonValidTableName$/,\n            friendlyMessage: '`tableName` property must be not empty.'\n        },\n        'query-required': {\n            messageRegex: /queryRequired/,\n            friendlyMessage: '`query` property is required.'\n        },\n        'query-string-required': {\n            messageRegex: /queryStringRequired$/,\n            friendlyMessage: '`query` property must be a string.'\n        },\n        'non-valid-query': {\n            messageRegex: /nonValidQuery$/,\n            friendlyMessage: '`query` property must be not empty.'\n        },\n        'non-valid-sql-query': {\n            messageRegex: /nonValidSQLQuery$/,\n            friendlyMessage: '`query` property must be a SQL query.'\n        },\n        'data-required': {\n            messageRegex: /dataRequired/,\n            friendlyMessage: '`data` property is required.'\n        },\n        'data-object-required': {\n            messageRegex: /dataObjectRequired$/,\n            friendlyMessage: '`data` property must be an object.'\n        },\n        'non-valid-geojson-data': {\n            messageRegex: /nonValidGeoJSONData$/,\n            friendlyMessage: '`data` property must be a GeoJSON object.'\n        },\n        'multiple-feature-types': {\n            messageRegex: /multipleFeatureTypes\\[(.+)\\]$/,\n            friendlyMessage: 'multiple types not supported: $0.'\n        },\n        'first-polygon-external': {\n            messageRegex: /firstPolygonExternal$/,\n            friendlyMessage: 'first polygon ring must be external.'\n        }\n    },\n    style: {\n        'non-valid-definition': {\n            messageRegex: /nonValidDefinition$/,\n            friendlyMessage: 'style definition should be a styleSpec object or a valid style string.'\n        },\n        'non-valid-expression': {\n            messageRegex: /nonValidExpression\\[(.+)\\]$/,\n            friendlyMessage: '`$0` parameter is not a valid style Expresion.'\n        },\n        'resolution-number-required': {\n            messageRegex: /resolutionNumberRequired$/,\n            friendlyMessage: '`resolution` must be a number.'\n        }\n    }\n};\n\nexport { validation };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/error-handling/error-list.js\n// module id = 66\n// module chunks = 0","import * as util from '../util';\nimport BaseWindshaft from './base-windshaft';\nimport CartoValidationError from '../error-handling/carto-validation-error';\n\n\nexport default class Dataset extends BaseWindshaft {\n\n    /**\n     * A dataset defines the data that will be displayed in a layer and is equivalent\n     * to a table in the server.\n     * \n     * If you have a table named `european_cities` in your CARTO account you could load all the\n     * data in a layer using a `carto.Dataset`. \n     * \n     * If you want to load data applying a SQL query see {@link carto.source.SQL|carto.source.SQL}.\n     * \n     * Since tables in the server are protected you must provide valid credentials in order to get access to the data.\n     * This can be done {@link carto.setDefaultAuth|setting the default auth} in the carto object or providing an `auth` \n     * object with your username and apiKey.\n     * \n     * If your server is not hosted by CARTO you must add a third parameter that includes the serverURL.\n     *\n     * @param {string} tableName - The name of an existing table\n     * @param {object} auth\n     * @param {string} auth.apiKey - API key used to authenticate against CARTO\n     * @param {string} auth.user - Name of the user\n     * @param {object} config\n     * @param {string} [config.serverURL='https://{user}.carto.com'] - URL of the CARTO Maps API server\n     *\n     * @example\n     * new carto.source.Dataset('european_cities', {\n     *   apiKey: 'YOUR_API_KEY_HERE',\n     *   user: 'YOUR_USERNAME_HERE'\n     * });\n     *\n     * @fires CartoError\n     *\n     * @constructor Dataset\n     * @extends carto.source.Base\n     * @memberof carto.source\n     * @api\n     */\n    constructor(tableName, auth, config) {\n        super();\n        this._checkTableName(tableName);\n        this._tableName = tableName;\n        this.initialize(auth, config);\n    }\n\n    _checkTableName(tableName) {\n        if (util.isUndefined(tableName)) {\n            throw new CartoValidationError('source', 'tableNameRequired');\n        }\n        if (!util.isString(tableName)) {\n            throw new CartoValidationError('source', 'tableNameStringRequired');\n        }\n        if (tableName === '') {\n            throw new CartoValidationError('source', 'nonValidTableName');\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/source/dataset.js\n// module id = 67\n// module chunks = 0","import * as R from '../core/renderer';\nimport * as rsys from './rsys';\nimport Dataframe from '../core/dataframe';\nimport * as Protobuf from 'pbf';\nimport * as LRU from 'lru-cache';\nimport * as windshaftFiltering from './windshaft-filtering';\nimport { VectorTile } from '@mapbox/vector-tile';\nimport Metadata from '../core/metadata';\n\nconst SAMPLE_ROWS = 1000;\nconst MIN_FILTERING = 2000000;\n\n// Get dataframes <- MVT <- Windshaft\n// Get metadata\n// Instantiate map Windshaft\n// Requrest SQL API (temp)\n// Cache dataframe\n\nexport default class Windshaft {\n\n    constructor(source) {\n        this._source = source;\n\n        this._requestGroupID = 0;\n        this._oldDataframes = [];\n        this._MNS = null;\n        this._promiseMNS = null;\n        this._categoryStringToIDMap = {};\n        this._numCategories = 0;\n        const lruOptions = {\n            max: 1000\n            // TODO improve cache length heuristic\n            , length: function () { return 1; }\n            , dispose: (key, promise) => {\n                promise.then(dataframe => {\n                    if (!dataframe.empty) {\n                        dataframe.free();\n                        this._removeDataframe(dataframe);\n                    }\n                });\n            }\n            , maxAge: 1000 * 60 * 60\n        };\n        this.cache = LRU(lruOptions);\n        this.inProgressInstantiations = {};\n    }\n\n    _bindLayer(addDataframe, removeDataframe, dataLoadedCallback) {\n        this._addDataframe = addDataframe;\n        this._removeDataframe = removeDataframe;\n        this._dataLoadedCallback = dataLoadedCallback;\n    }\n\n    _getInstantiationID(MNS, resolution, filtering) {\n        return JSON.stringify({\n            MNS,\n            resolution,\n            filtering: this.metadata && this.metadata.featureCount > MIN_FILTERING ? filtering : null\n        });\n    }\n\n    /**\n     * Should be called whenever the style changes (even if metadata is not going to be used)\n     * This not only computes metadata: it also updates the map (instantiates) for the new style if needed\n     * Returns  a promise to a Metadata\n     * @param {*} viewport\n     * @param {*} MNS\n     * @param {*} addDataframe\n     * @param {*} styleDataframe\n     */\n    async getMetadata(style) {\n        const MNS = style.getMinimumNeededSchema();\n        const resolution = style.getResolution();\n        const filtering = windshaftFiltering.getFiltering(style);\n        if (this._needToInstantiate(MNS, resolution, filtering)) {\n            await this._instantiate(MNS, resolution, filtering);\n        }\n        return this.metadata;\n    }\n\n    getData(viewport) {\n        if (this._isInstantiated()) {\n            const tiles = rsys.rTiles(viewport);\n            this._getTiles(tiles);\n        }\n    }\n\n\n    _getTiles(tiles) {\n        this._requestGroupID++;\n        var completedTiles = [];\n        var needToComplete = tiles.length;\n        const requestGroupID = this._requestGroupID;\n        tiles.forEach(t => {\n            const { x, y, z } = t;\n            this.getDataframe(x, y, z).then(dataframe => {\n                if (dataframe.empty) {\n                    needToComplete--;\n                } else {\n                    completedTiles.push(dataframe);\n                }\n                if (completedTiles.length == needToComplete && requestGroupID == this._requestGroupID) {\n                    this._oldDataframes.map(d => d.active = false);\n                    completedTiles.map(d => d.active = true);\n                    this._oldDataframes = completedTiles;\n                    this._dataLoadedCallback();\n                }\n            });\n        });\n    }\n\n    /**\n     * Check if the map needs to be reinstantiated\n     * This happens:\n     *  - When the minimun required schema changed.\n     *  - When the resolution changed.\n     *  - When the filter conditions changed and the dataset should be server-filtered.\n     */\n    _needToInstantiate(MNS, resolution, filtering) {\n        return !R.schema.equals(this._MNS, MNS) || resolution != this.resolution || (JSON.stringify(filtering) != JSON.stringify(this.filtering) && this.metadata.featureCount > MIN_FILTERING);\n    }\n\n    _isInstantiated() {\n        return !!this.metadata;\n    }\n\n    _getCategoryIDFromString(category) {\n        if (this._categoryStringToIDMap[category] !== undefined) {\n            return this._categoryStringToIDMap[category];\n        }\n        this._categoryStringToIDMap[category] = this._numCategories;\n        this._numCategories++;\n        return this._categoryStringToIDMap[category];\n    }\n\n\n    async _instantiateUncached(MNS, resolution, filters) {\n        const conf = this._getConfig();\n        const agg = await this._generateAggregation(MNS, resolution);\n        let select = this._buildSelectClause(MNS);\n        let aggSQL = this._buildQuery(select);\n\n        const query = `(${aggSQL}) AS tmp`;\n        const metadata = await this._getMetadata(query, MNS, conf);\n\n        select = this._buildSelectClause(MNS, metadata.columns.filter(c => c.type == 'date').map(c => c.name));\n        // If the number of features is higher than the minimun, enable server filtering.\n        if (metadata.featureCount > MIN_FILTERING) {\n            aggSQL = `SELECT ${select.filter((item, pos) => select.indexOf(item) == pos).join()} FROM ${this._source._query ? `(${this._source._query}) as _cdb_query_wrapper` : this._source._tableName} ${windshaftFiltering.getSQLWhere(filters)}`;\n        } else {\n            aggSQL = this._buildQuery(select);\n        }\n\n        const urlTemplate = await this._getUrlPromise(query, conf, agg, aggSQL);\n        this._oldDataframes = [];\n        this.cache.reset();\n        this.urlTemplate = urlTemplate;\n        this.metadata = metadata;\n        this._MNS = MNS;\n        this.filtering = filters;\n        this.resolution = resolution;\n\n        // Store instantiation\n        return metadata;\n    }\n    async _instantiate(MNS, resolution, filters) {\n        if (this.inProgressInstantiations[this._getInstantiationID(MNS, resolution, filters)]) {\n            return this.inProgressInstantiations[this._getInstantiationID(MNS, resolution, filters)];\n        }\n        console.log(this._getInstantiationID(MNS, resolution, filters));\n        const promise = this._instantiateUncached(MNS, resolution, filters);\n        this.inProgressInstantiations[this._getInstantiationID(MNS, resolution, filters)] = promise;\n        return promise;\n    }\n\n    _generateAggregation(MRS, resolution) {\n        let aggregation = {\n            columns: {},\n            dimensions: {},\n            placement: 'centroid',\n            resolution: resolution,\n            threshold: 1,\n        };\n\n        MRS.columns\n            .forEach(name => {\n                if (name.startsWith('_cdb_agg_')) {\n                    aggregation.columns[name] = {\n                        aggregate_function: getAggFN(name),\n                        aggregated_column: getBase(name)\n                    };\n                } else {\n                    aggregation.dimensions[name] = name;\n                }\n            });\n\n        return aggregation;\n    }\n\n    _buildSelectClause(MRS, dateFields = []) {\n        return MRS.columns.map(name => name.startsWith('_cdb_agg_') ? getBase(name) : name).map(\n            name => dateFields.includes(name) ? name + '::text' : name\n        )\n            .concat(['the_geom', 'the_geom_webmercator']);\n    }\n\n    _buildQuery(select) {\n        return `SELECT ${select.filter((item, pos) => select.indexOf(item) == pos).join()} FROM ${this._source._query ? `(${this._source._query}) as _cdb_query_wrapper` : this._source._tableName}`;\n    }\n\n    _getConfig() {\n        // for local environments, which require direct access to Maps and SQL API ports, end the configured URL with \"{local}\"\n        return {\n            apiKey: this._source._apiKey,\n            username: this._source._username,\n            mapsServerURL: this._source._serverURL.maps,\n            sqlServerURL: this._source._serverURL.sql\n        };\n    }\n\n    free() {\n        this.cache.reset();\n    }\n\n    _generateDataFrame(rs, geometry, properties, size, type) {\n        const dataframe = new Dataframe({\n            active: false,\n            center: rs.center,\n            geom: geometry,\n            properties: properties,\n            scale: rs.scale,\n            size: size,\n            type: type,\n        });\n\n        return dataframe;\n    }\n\n    async _getUrlPromise(query, conf, agg, aggSQL) {\n        const LAYER_INDEX = 0;\n        this.geomType = await this.getGeometryType(query, conf);\n\n        if (this.geomType != 'point') {\n            agg = false;\n        }\n\n        const mapConfigAgg = {\n            buffersize: {\n                'mvt': 0\n            },\n            layers: [\n                {\n                    type: 'mapnik',\n                    options: {\n                        sql: aggSQL,\n                        aggregation: agg\n                    }\n                }\n            ]\n        };\n        const response = await fetch(endpoint(conf), this._getRequestConfig(mapConfigAgg));\n        const layergroup = await response.json();\n        this._subdomains = layergroup.cdn_url ? layergroup.cdn_url.templates.https.subdomains : [];\n        return getLayerUrl(layergroup, LAYER_INDEX, conf);\n    }\n\n    _getRequestConfig(mapConfigAgg) {\n        return {\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(mapConfigAgg),\n        };\n    }\n\n    getDataframe(x, y, z) {\n        const id = `${x},${y},${z}`;\n        const c = this.cache.get(id);\n        if (c) {\n            return c;\n        }\n        const promise = this.requestDataframe(x, y, z);\n        this.cache.set(id, promise);\n        return promise;\n    }\n\n    requestDataframe(x, y, z) {\n        const mvt_extent = 4096;\n\n        return fetch(this._getTileUrl(x, y, z))\n            .then(rawData => rawData.arrayBuffer())\n            .then(response => {\n\n                if (response.byteLength == 0 || response == 'null') {\n                    return { empty: true };\n                }\n                var tile = new VectorTile(new Protobuf(response));\n                const mvtLayer = tile.layers[Object.keys(tile.layers)[0]];\n                var fieldMap = {};\n\n                const numFields = [];\n                const catFields = [];\n                const dateFields = [];\n                this._MNS.columns.map(name => {\n                    const basename = name.startsWith('_cdb_agg_') ? getBase(name) : name;\n                    const type = this.metadata.columns.find(c => c.name == basename).type;\n                    if (type == 'category') {\n                        catFields.push(name);\n                    } else if (type == 'float') {\n                        numFields.push(name);\n                    } else if (type == 'date') {\n                        dateFields.push(name);\n                    } else {\n                        throw new Error(`Column type '${type}' not supported`);\n                    }\n\n                });\n                catFields.map((name, i) => fieldMap[name] = i);\n                numFields.map((name, i) => fieldMap[name] = i + catFields.length);\n                dateFields.map((name, i) => fieldMap[name] = i + catFields.length + numFields.length);\n\n                const { points, featureGeometries, properties } = this._decodeMVTLayer(mvtLayer, this.metadata, mvt_extent, catFields, numFields, dateFields);\n\n                var rs = rsys.getRsysFromTile(x, y, z);\n                let dataframeProperties = {};\n                Object.keys(fieldMap).map((name, pid) => {\n                    dataframeProperties[name] = properties[pid];\n                });\n                let dataFrameGeometry = this.geomType == 'point' ? points : featureGeometries;\n                const dataframe = this._generateDataFrame(rs, dataFrameGeometry, dataframeProperties, mvtLayer.length, this.geomType);\n                this._addDataframe(dataframe);\n                return dataframe;\n            });\n    }\n\n    _getTileUrl(x, y, z) {\n        return this.urlTemplate.replace('{x}', x).replace('{y}', y).replace('{z}', z).replace('{s}', this._getSubdomain(x, y));\n    }\n\n    _getSubdomain(x, y) {\n        // Reference https://github.com/Leaflet/Leaflet/blob/v1.3.1/src/layer/tile/TileLayer.js#L214-L217\n        return this._subdomains[Math.abs(x + y) % this._subdomains.length];\n    }\n\n    _decodePolygons(geom, featureGeometries, mvt_extent) {\n        let polygon = null;\n        let geometry = [];\n        /*\n            All this clockwise non-sense is needed because the MVT decoder dont decode the MVT fully.\n            It doesn't distinguish between internal polygon rings (which defines holes) or external ones, which defines more polygons (mulipolygons)\n            See:\n                https://github.com/mapbox/vector-tile-spec/tree/master/2.1\n                https://en.wikipedia.org/wiki/Shoelace_formula\n        */\n        for (let j = 0; j < geom.length; j++) {\n            //if exterior\n            //   push current polygon & set new empty\n            //else=> add index to holes\n            if (isClockWise(geom[j])) {\n                if (polygon) {\n                    geometry.push(polygon);\n                }\n                polygon = {\n                    flat: [],\n                    holes: []\n                };\n            } else {\n                if (j == 0) {\n                    throw new Error('Invalid MVT tile: first polygon ring MUST be external');\n                }\n                polygon.holes.push(polygon.flat.length / 2);\n            }\n            for (let k = 0; k < geom[j].length; k++) {\n                polygon.flat.push(2 * geom[j][k].x / mvt_extent - 1.);\n                polygon.flat.push(2 * (1. - geom[j][k].y / mvt_extent) - 1.);\n            }\n        }\n        //if current polygon is not empty=> push it\n        if (polygon && polygon.flat.length > 0) {\n            geometry.push(polygon);\n        }\n        featureGeometries.push(geometry);\n    }\n\n    _decodeLines(geom, featureGeometries, mvt_extent) {\n        let geometry = [];\n        geom.map(l => {\n            let line = [];\n            l.map(point => {\n                line.push(2 * point.x / mvt_extent - 1, 2 * (1 - point.y / mvt_extent) - 1);\n            });\n            geometry.push(line);\n        });\n        featureGeometries.push(geometry);\n    }\n\n    _decodeMVTLayer(mvtLayer, metadata, mvt_extent, catFields, numFields, datesField) {\n        var properties = [new Float32Array(mvtLayer.length + 1024), new Float32Array(mvtLayer.length + 1024), new Float32Array(mvtLayer.length + 1024), new Float32Array(mvtLayer.length + 1024)];\n        if (this.geomType == 'point') {\n            var points = new Float32Array(mvtLayer.length * 2);\n        }\n        let featureGeometries = [];\n        for (var i = 0; i < mvtLayer.length; i++) {\n            const f = mvtLayer.feature(i);\n            const geom = f.loadGeometry();\n            if (this.geomType == 'point') {\n                points[2 * i + 0] = 2 * (geom[0][0].x) / mvt_extent - 1.;\n                points[2 * i + 1] = 2 * (1. - (geom[0][0].y) / mvt_extent) - 1.;\n            } else if (this.geomType == 'polygon') {\n                this._decodePolygons(geom, featureGeometries, mvt_extent);\n            } else if (this.geomType == 'line') {\n                this._decodeLines(geom, featureGeometries, mvt_extent);\n            } else {\n                throw new Error(`Unimplemented geometry type: '${this.geomType}'`);\n            }\n\n            catFields.map((name, index) => {\n                properties[index][i] = this._getCategoryIDFromString(f.properties[name]);\n            });\n            numFields.map((name, index) => {\n                properties[index + catFields.length][i] = Number(f.properties[name]);\n            });\n            datesField.map((name, index) => {\n                const d = Date.parse(f.properties[name]);\n                if (Number.isNaN(d)) {\n                    throw new Error('invalid MVT date');\n                }\n                const metadataColumn = metadata.columns.find(c => c.name == name);\n                const min = metadataColumn.min;\n                const max = metadataColumn.max;\n                const n = (d - min) / (max.getTime() - min.getTime());\n                properties[index + catFields.length + numFields.length][i] = n;\n            });\n        }\n\n        return { properties, points, featureGeometries };\n    }\n\n    async _getMetadata(query, proto, conf) {\n        //Get column names and types with a limit 0\n        //Get min,max,sum and count of numerics\n        //for each category type\n        //Get category names and counts by grouping by\n        //Assign ids\n\n        const [{ numerics, categories, dates }, featureCount] = await Promise.all([\n            this._getColumnTypes(query, conf),\n            this.getFeatureCount(query, conf)]);\n\n        const sampling = Math.min(SAMPLE_ROWS / featureCount, 1);\n\n        const [sample, numericsTypes, datesTypes, categoriesTypes] = await Promise.all([\n            this.getSample(conf, sampling),\n            this.getNumericTypes(numerics, query, conf),\n            this.getDatesTypes(dates, query, conf),\n            this.getCategoryTypes(categories, query, conf)]);\n\n        const columns = [];\n        numerics.forEach((name, index) => columns.push(numericsTypes[index]));\n        dates.forEach((name, index) => columns.push(datesTypes[index]));\n\n        const categoryIDs = {};\n        categories.map((name, index) => {\n            const t = categoriesTypes[index];\n            t.categoryNames.map(name => categoryIDs[name] = this._getCategoryIDFromString(name));\n            columns.push(t);\n        });\n        const metadata = new Metadata(categoryIDs, columns, featureCount, sample);\n        console.log(metadata);\n        return metadata;\n    }\n\n    /**\n     * Return an object with the names of the columns clasified by type.\n     */\n    async _getColumnTypes(query, conf) {\n        const fields = await this.getColumnTypes(query, conf);\n        let numerics = [];\n        let categories = [];\n        let dates = [];\n        Object.keys(fields).map(name => {\n            const type = fields[name].type;\n            if (type == 'number') {\n                numerics.push(name);\n            } else if (type == 'string') {\n                categories.push(name);\n            } else if (type == 'date') {\n                dates.push(name);\n            } else if (type != 'geometry') {\n                throw new Error(`Unsuportted type ${type}`);\n            }\n        });\n\n        return { numerics, categories, dates };\n    }\n\n    async getSample(conf, sampling) {\n        let q;\n        if (this._source._tableName) {\n            q = `SELECT * FROM ${this._source._tableName} TABLESAMPLE BERNOULLI (${100 * sampling}) REPEATABLE (0);`;\n        } else {\n            // Fallback to random() since 'TABLESAMPLE BERNOULLI' is not supported on queries\n            q = `WITH _rndseed as (SELECT setseed(0.5))\n                    SELECT * FROM (${this._source._query}) as _cdb_query_wrapper WHERE random() < ${sampling};`;\n        }\n\n        const response = await getSQL(q, conf);\n        const json = await response.json();\n        console.log(json);\n        return json.rows;\n    }\n\n    // Returns the total feature count, including possibly filtered features\n    async getFeatureCount(query, conf) {\n        const q = `SELECT COUNT(*) FROM ${query};`;\n        const response = await getSQL(q, conf);\n        const json = await response.json();\n        return json.rows[0].count;\n    }\n\n    async getColumnTypes(query, conf) {\n        const columnListQuery = `select * from ${query} limit 0;`;\n        const response = await getSQL(columnListQuery, conf);\n        const json = await response.json();\n        return json.fields;\n    }\n\n    async getGeometryType(query, conf) {\n        const columnListQuery = `SELECT ST_GeometryType(the_geom) AS type FROM ${query} WHERE the_geom IS NOT NULL LIMIT 1;`;\n        const response = await getSQL(columnListQuery, conf);\n        const json = await response.json();\n        const type = json.rows[0].type;\n        switch (type) {\n            case 'ST_MultiPolygon':\n                return 'polygon';\n            case 'ST_Point':\n                return 'point';\n            case 'ST_MultiLineString':\n                return 'line';\n            default:\n                throw new Error(`Unimplemented geometry type ''${type}'`);\n        }\n    }\n\n    async getNumericTypes(names, query, conf) {\n        const aggFns = ['min', 'max', 'sum', 'avg'];\n        const numericsSelect = names.map(name =>\n            aggFns.map(fn => `${fn}(${name}) AS ${name}_${fn}`)\n        ).concat(['COUNT(*)']).join();\n        const numericsQuery = `SELECT ${numericsSelect} FROM ${query};`;\n        const response = await getSQL(numericsQuery, conf);\n        const json = await response.json();\n        return names.map(name => {\n            return {\n                name,\n                type: 'float',\n                min: json.rows[0][`${name}_min`],\n                max: json.rows[0][`${name}_max`],\n                avg: json.rows[0][`${name}_avg`],\n                sum: json.rows[0][`${name}_sum`],\n            };\n        }\n        );\n    }\n\n    _getDateFromStr(str) {\n        if (Number.isNaN(Date.parse(str))) {\n            throw new Error(`Invalid date: '${str}'`);\n        }\n        return new Date(str);\n    }\n\n    async getDatesTypes(names, query, conf) {\n        if (names.length == 0) {\n            return [];\n        }\n        const aggFns = ['min', 'max'];\n        const datesSelect = names.map(name =>\n            aggFns.map(fn => `${fn}(${name}) AS ${name}_${fn}`)\n        ).join();\n        const numericsQuery = `SELECT ${datesSelect} FROM ${query};`;\n        const response = await getSQL(numericsQuery, conf);\n        const json = await response.json();\n        return names.map(name => {\n            return {\n                name,\n                type: 'date',\n                min: this._getDateFromStr(json.rows[0][`${name}_min`]),\n                max: this._getDateFromStr(json.rows[0][`${name}_max`]),\n            };\n        }\n        );\n    }\n\n    async getCategoryTypes(names, query, conf) {\n        return Promise.all(names.map(async name => {\n            const catQuery = `SELECT COUNT(*), ${name} AS name FROM ${query} GROUP BY ${name} ORDER BY COUNT(*) DESC;`;\n            const response = await getSQL(catQuery, conf);\n            const json = await response.json();\n            let counts = [];\n            let names = [];\n            json.rows.map(row => {\n                counts.push(row.count);\n                names.push(row.name);\n            });\n            return {\n                name,\n                type: 'category',\n                categoryNames: names,\n                categoryCounts: counts\n            };\n        }));\n    }\n}\n\n\nfunction isClockWise(vertices) {\n    let a = 0;\n    for (let i = 0; i < vertices.length; i++) {\n        let j = (i + 1) % vertices.length;\n        a += vertices[i].x * vertices[j].y;\n        a -= vertices[j].x * vertices[i].y;\n    }\n    return a > 0;\n}\n\nfunction getBase(name) {\n    return name.replace(/_cdb_agg_[a-zA-Z0-9]+_/g, '');\n}\n\nfunction getAggFN(name) {\n    let s = name.substr('_cdb_agg_'.length);\n    return s.substr(0, s.indexOf('_'));\n}\n\nconst endpoint = (conf, path = '') => {\n    let url = `${conf.mapsServerURL}/api/v1/map`;\n    if (path) {\n        url += '/' + path;\n    }\n    url = authURL(url, conf);\n    return url;\n};\n\nfunction getLayerUrl(layergroup, layerIndex, conf) {\n    if (layergroup.cdn_url && layergroup.cdn_url.templates) {\n        const urlTemplates = layergroup.cdn_url.templates.https;\n        return authURL(`${urlTemplates.url}/${conf.username}/api/v1/map/${layergroup.layergroupid}/${layerIndex}/{z}/{x}/{y}.mvt`, conf);\n    }\n    return endpoint(conf, `${layergroup.layergroupid}/${layerIndex}/{z}/{x}/{y}.mvt`);\n}\n\nfunction getSQL(query, conf) {\n    let url = `${conf.sqlServerURL}/api/v2/sql?q=` + encodeURIComponent(query);\n    url = authURL(url, conf);\n    return fetch(url);\n}\n\nfunction authURL(url, conf) {\n    if (conf.apiKey) {\n        const sep = url.includes('?') ? '&' : '?';\n        url += sep + 'api_key=' + encodeURIComponent(conf.apiKey);\n    }\n    return url;\n}\n\n/**\n * Responsabilities: get tiles, decode tiles, return dataframe promises, optionally: cache, coalesce all layer with a source engine, return bound dataframes\n */\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/windshaft.js\n// module id = 68\n// module chunks = 0","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pbf/index.js\n// module id = 69\n// module chunks = 0","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/ieee754/index.js\n// module id = 70\n// module chunks = 0","'use strict'\n\nmodule.exports = LRUCache\n\n// This will be a proper iterable 'Map' in engines that support it,\n// or a fakey-fake PseudoMap in older versions.\nvar Map = require('pseudomap')\nvar util = require('util')\n\n// A linked list to keep track of recently-used-ness\nvar Yallist = require('yallist')\n\n// use symbols if possible, otherwise just _props\nvar hasSymbol = typeof Symbol === 'function'\nvar makeSymbol\nif (hasSymbol) {\n  makeSymbol = function (key) {\n    return Symbol.for(key)\n  }\n} else {\n  makeSymbol = function (key) {\n    return '_' + key\n  }\n}\n\nvar MAX = makeSymbol('max')\nvar LENGTH = makeSymbol('length')\nvar LENGTH_CALCULATOR = makeSymbol('lengthCalculator')\nvar ALLOW_STALE = makeSymbol('allowStale')\nvar MAX_AGE = makeSymbol('maxAge')\nvar DISPOSE = makeSymbol('dispose')\nvar NO_DISPOSE_ON_SET = makeSymbol('noDisposeOnSet')\nvar LRU_LIST = makeSymbol('lruList')\nvar CACHE = makeSymbol('cache')\n\nfunction naiveLength () { return 1 }\n\n// lruList is a yallist where the head is the youngest\n// item, and the tail is the oldest.  the list contains the Hit\n// objects as the entries.\n// Each Hit object has a reference to its Yallist.Node.  This\n// never changes.\n//\n// cache is a Map (or PseudoMap) that matches the keys to\n// the Yallist.Node object.\nfunction LRUCache (options) {\n  if (!(this instanceof LRUCache)) {\n    return new LRUCache(options)\n  }\n\n  if (typeof options === 'number') {\n    options = { max: options }\n  }\n\n  if (!options) {\n    options = {}\n  }\n\n  var max = this[MAX] = options.max\n  // Kind of weird to have a default max of Infinity, but oh well.\n  if (!max ||\n      !(typeof max === 'number') ||\n      max <= 0) {\n    this[MAX] = Infinity\n  }\n\n  var lc = options.length || naiveLength\n  if (typeof lc !== 'function') {\n    lc = naiveLength\n  }\n  this[LENGTH_CALCULATOR] = lc\n\n  this[ALLOW_STALE] = options.stale || false\n  this[MAX_AGE] = options.maxAge || 0\n  this[DISPOSE] = options.dispose\n  this[NO_DISPOSE_ON_SET] = options.noDisposeOnSet || false\n  this.reset()\n}\n\n// resize the cache when the max changes.\nObject.defineProperty(LRUCache.prototype, 'max', {\n  set: function (mL) {\n    if (!mL || !(typeof mL === 'number') || mL <= 0) {\n      mL = Infinity\n    }\n    this[MAX] = mL\n    trim(this)\n  },\n  get: function () {\n    return this[MAX]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'allowStale', {\n  set: function (allowStale) {\n    this[ALLOW_STALE] = !!allowStale\n  },\n  get: function () {\n    return this[ALLOW_STALE]\n  },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'maxAge', {\n  set: function (mA) {\n    if (!mA || !(typeof mA === 'number') || mA < 0) {\n      mA = 0\n    }\n    this[MAX_AGE] = mA\n    trim(this)\n  },\n  get: function () {\n    return this[MAX_AGE]\n  },\n  enumerable: true\n})\n\n// resize the cache when the lengthCalculator changes.\nObject.defineProperty(LRUCache.prototype, 'lengthCalculator', {\n  set: function (lC) {\n    if (typeof lC !== 'function') {\n      lC = naiveLength\n    }\n    if (lC !== this[LENGTH_CALCULATOR]) {\n      this[LENGTH_CALCULATOR] = lC\n      this[LENGTH] = 0\n      this[LRU_LIST].forEach(function (hit) {\n        hit.length = this[LENGTH_CALCULATOR](hit.value, hit.key)\n        this[LENGTH] += hit.length\n      }, this)\n    }\n    trim(this)\n  },\n  get: function () { return this[LENGTH_CALCULATOR] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'length', {\n  get: function () { return this[LENGTH] },\n  enumerable: true\n})\n\nObject.defineProperty(LRUCache.prototype, 'itemCount', {\n  get: function () { return this[LRU_LIST].length },\n  enumerable: true\n})\n\nLRUCache.prototype.rforEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].tail; walker !== null;) {\n    var prev = walker.prev\n    forEachStep(this, fn, walker, thisp)\n    walker = prev\n  }\n}\n\nfunction forEachStep (self, fn, node, thisp) {\n  var hit = node.value\n  if (isStale(self, hit)) {\n    del(self, node)\n    if (!self[ALLOW_STALE]) {\n      hit = undefined\n    }\n  }\n  if (hit) {\n    fn.call(thisp, hit.value, hit.key, self)\n  }\n}\n\nLRUCache.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this[LRU_LIST].head; walker !== null;) {\n    var next = walker.next\n    forEachStep(this, fn, walker, thisp)\n    walker = next\n  }\n}\n\nLRUCache.prototype.keys = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.key\n  }, this)\n}\n\nLRUCache.prototype.values = function () {\n  return this[LRU_LIST].toArray().map(function (k) {\n    return k.value\n  }, this)\n}\n\nLRUCache.prototype.reset = function () {\n  if (this[DISPOSE] &&\n      this[LRU_LIST] &&\n      this[LRU_LIST].length) {\n    this[LRU_LIST].forEach(function (hit) {\n      this[DISPOSE](hit.key, hit.value)\n    }, this)\n  }\n\n  this[CACHE] = new Map() // hash of items by key\n  this[LRU_LIST] = new Yallist() // list of items in order of use recency\n  this[LENGTH] = 0 // length of items in the list\n}\n\nLRUCache.prototype.dump = function () {\n  return this[LRU_LIST].map(function (hit) {\n    if (!isStale(this, hit)) {\n      return {\n        k: hit.key,\n        v: hit.value,\n        e: hit.now + (hit.maxAge || 0)\n      }\n    }\n  }, this).toArray().filter(function (h) {\n    return h\n  })\n}\n\nLRUCache.prototype.dumpLru = function () {\n  return this[LRU_LIST]\n}\n\nLRUCache.prototype.inspect = function (n, opts) {\n  var str = 'LRUCache {'\n  var extras = false\n\n  var as = this[ALLOW_STALE]\n  if (as) {\n    str += '\\n  allowStale: true'\n    extras = true\n  }\n\n  var max = this[MAX]\n  if (max && max !== Infinity) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  max: ' + util.inspect(max, opts)\n    extras = true\n  }\n\n  var maxAge = this[MAX_AGE]\n  if (maxAge) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  maxAge: ' + util.inspect(maxAge, opts)\n    extras = true\n  }\n\n  var lc = this[LENGTH_CALCULATOR]\n  if (lc && lc !== naiveLength) {\n    if (extras) {\n      str += ','\n    }\n    str += '\\n  length: ' + util.inspect(this[LENGTH], opts)\n    extras = true\n  }\n\n  var didFirst = false\n  this[LRU_LIST].forEach(function (item) {\n    if (didFirst) {\n      str += ',\\n  '\n    } else {\n      if (extras) {\n        str += ',\\n'\n      }\n      didFirst = true\n      str += '\\n  '\n    }\n    var key = util.inspect(item.key).split('\\n').join('\\n  ')\n    var val = { value: item.value }\n    if (item.maxAge !== maxAge) {\n      val.maxAge = item.maxAge\n    }\n    if (lc !== naiveLength) {\n      val.length = item.length\n    }\n    if (isStale(this, item)) {\n      val.stale = true\n    }\n\n    val = util.inspect(val, opts).split('\\n').join('\\n  ')\n    str += key + ' => ' + val\n  })\n\n  if (didFirst || extras) {\n    str += '\\n'\n  }\n  str += '}'\n\n  return str\n}\n\nLRUCache.prototype.set = function (key, value, maxAge) {\n  maxAge = maxAge || this[MAX_AGE]\n\n  var now = maxAge ? Date.now() : 0\n  var len = this[LENGTH_CALCULATOR](value, key)\n\n  if (this[CACHE].has(key)) {\n    if (len > this[MAX]) {\n      del(this, this[CACHE].get(key))\n      return false\n    }\n\n    var node = this[CACHE].get(key)\n    var item = node.value\n\n    // dispose of the old one before overwriting\n    // split out into 2 ifs for better coverage tracking\n    if (this[DISPOSE]) {\n      if (!this[NO_DISPOSE_ON_SET]) {\n        this[DISPOSE](key, item.value)\n      }\n    }\n\n    item.now = now\n    item.maxAge = maxAge\n    item.value = value\n    this[LENGTH] += len - item.length\n    item.length = len\n    this.get(key)\n    trim(this)\n    return true\n  }\n\n  var hit = new Entry(key, value, len, now, maxAge)\n\n  // oversized objects fall out of cache automatically.\n  if (hit.length > this[MAX]) {\n    if (this[DISPOSE]) {\n      this[DISPOSE](key, value)\n    }\n    return false\n  }\n\n  this[LENGTH] += hit.length\n  this[LRU_LIST].unshift(hit)\n  this[CACHE].set(key, this[LRU_LIST].head)\n  trim(this)\n  return true\n}\n\nLRUCache.prototype.has = function (key) {\n  if (!this[CACHE].has(key)) return false\n  var hit = this[CACHE].get(key).value\n  if (isStale(this, hit)) {\n    return false\n  }\n  return true\n}\n\nLRUCache.prototype.get = function (key) {\n  return get(this, key, true)\n}\n\nLRUCache.prototype.peek = function (key) {\n  return get(this, key, false)\n}\n\nLRUCache.prototype.pop = function () {\n  var node = this[LRU_LIST].tail\n  if (!node) return null\n  del(this, node)\n  return node.value\n}\n\nLRUCache.prototype.del = function (key) {\n  del(this, this[CACHE].get(key))\n}\n\nLRUCache.prototype.load = function (arr) {\n  // reset the cache\n  this.reset()\n\n  var now = Date.now()\n  // A previous serialized cache has the most recent items first\n  for (var l = arr.length - 1; l >= 0; l--) {\n    var hit = arr[l]\n    var expiresAt = hit.e || 0\n    if (expiresAt === 0) {\n      // the item was created without expiration in a non aged cache\n      this.set(hit.k, hit.v)\n    } else {\n      var maxAge = expiresAt - now\n      // dont add already expired items\n      if (maxAge > 0) {\n        this.set(hit.k, hit.v, maxAge)\n      }\n    }\n  }\n}\n\nLRUCache.prototype.prune = function () {\n  var self = this\n  this[CACHE].forEach(function (value, key) {\n    get(self, key, false)\n  })\n}\n\nfunction get (self, key, doUse) {\n  var node = self[CACHE].get(key)\n  if (node) {\n    var hit = node.value\n    if (isStale(self, hit)) {\n      del(self, node)\n      if (!self[ALLOW_STALE]) hit = undefined\n    } else {\n      if (doUse) {\n        self[LRU_LIST].unshiftNode(node)\n      }\n    }\n    if (hit) hit = hit.value\n  }\n  return hit\n}\n\nfunction isStale (self, hit) {\n  if (!hit || (!hit.maxAge && !self[MAX_AGE])) {\n    return false\n  }\n  var stale = false\n  var diff = Date.now() - hit.now\n  if (hit.maxAge) {\n    stale = diff > hit.maxAge\n  } else {\n    stale = self[MAX_AGE] && (diff > self[MAX_AGE])\n  }\n  return stale\n}\n\nfunction trim (self) {\n  if (self[LENGTH] > self[MAX]) {\n    for (var walker = self[LRU_LIST].tail;\n         self[LENGTH] > self[MAX] && walker !== null;) {\n      // We know that we're about to delete this one, and also\n      // what the next least recently used key will be, so just\n      // go ahead and set it now.\n      var prev = walker.prev\n      del(self, walker)\n      walker = prev\n    }\n  }\n}\n\nfunction del (self, node) {\n  if (node) {\n    var hit = node.value\n    if (self[DISPOSE]) {\n      self[DISPOSE](hit.key, hit.value)\n    }\n    self[LENGTH] -= hit.length\n    self[CACHE].delete(hit.key)\n    self[LRU_LIST].removeNode(node)\n  }\n}\n\n// classy, since V8 prefers predictable objects.\nfunction Entry (key, value, length, now, maxAge) {\n  this.key = key\n  this.value = value\n  this.length = length\n  this.now = now\n  this.maxAge = maxAge || 0\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/lru-cache/index.js\n// module id = 71\n// module chunks = 0","if (process.env.npm_package_name === 'pseudomap' &&\n    process.env.npm_lifecycle_script === 'test')\n  process.env.TEST_PSEUDOMAP = 'true'\n\nif (typeof Map === 'function' && !process.env.TEST_PSEUDOMAP) {\n  module.exports = Map\n} else {\n  module.exports = require('./pseudomap')\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pseudomap/map.js\n// module id = 72\n// module chunks = 0","var hasOwnProperty = Object.prototype.hasOwnProperty\n\nmodule.exports = PseudoMap\n\nfunction PseudoMap (set) {\n  if (!(this instanceof PseudoMap)) // whyyyyyyy\n    throw new TypeError(\"Constructor PseudoMap requires 'new'\")\n\n  this.clear()\n\n  if (set) {\n    if ((set instanceof PseudoMap) ||\n        (typeof Map === 'function' && set instanceof Map))\n      set.forEach(function (value, key) {\n        this.set(key, value)\n      }, this)\n    else if (Array.isArray(set))\n      set.forEach(function (kv) {\n        this.set(kv[0], kv[1])\n      }, this)\n    else\n      throw new TypeError('invalid argument')\n  }\n}\n\nPseudoMap.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  Object.keys(this._data).forEach(function (k) {\n    if (k !== 'size')\n      fn.call(thisp, this._data[k].value, this._data[k].key)\n  }, this)\n}\n\nPseudoMap.prototype.has = function (k) {\n  return !!find(this._data, k)\n}\n\nPseudoMap.prototype.get = function (k) {\n  var res = find(this._data, k)\n  return res && res.value\n}\n\nPseudoMap.prototype.set = function (k, v) {\n  set(this._data, k, v)\n}\n\nPseudoMap.prototype.delete = function (k) {\n  var res = find(this._data, k)\n  if (res) {\n    delete this._data[res._index]\n    this._data.size--\n  }\n}\n\nPseudoMap.prototype.clear = function () {\n  var data = Object.create(null)\n  data.size = 0\n\n  Object.defineProperty(this, '_data', {\n    value: data,\n    enumerable: false,\n    configurable: true,\n    writable: false\n  })\n}\n\nObject.defineProperty(PseudoMap.prototype, 'size', {\n  get: function () {\n    return this._data.size\n  },\n  set: function (n) {},\n  enumerable: true,\n  configurable: true\n})\n\nPseudoMap.prototype.values =\nPseudoMap.prototype.keys =\nPseudoMap.prototype.entries = function () {\n  throw new Error('iterators are not implemented in this version')\n}\n\n// Either identical, or both NaN\nfunction same (a, b) {\n  return a === b || a !== a && b !== b\n}\n\nfunction Entry (k, v, i) {\n  this.key = k\n  this.value = v\n  this._index = i\n}\n\nfunction find (data, k) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k))\n      return data[key]\n  }\n}\n\nfunction set (data, k, v) {\n  for (var i = 0, s = '_' + k, key = s;\n       hasOwnProperty.call(data, key);\n       key = s + i++) {\n    if (same(data[key].key, k)) {\n      data[key].value = v\n      return\n    }\n  }\n  data.size++\n  data[key] = new Entry(k, v, key)\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/pseudomap/pseudomap.js\n// module id = 73\n// module chunks = 0","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/util/util.js\n// module id = 74\n// module chunks = 0","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 75\n// module chunks = 0","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/util/support/isBufferBrowser.js\n// module id = 76\n// module chunks = 0","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/util/node_modules/inherits/inherits_browser.js\n// module id = 77\n// module chunks = 0","module.exports = Yallist\n\nYallist.Node = Node\nYallist.create = Yallist\n\nfunction Yallist (list) {\n  var self = this\n  if (!(self instanceof Yallist)) {\n    self = new Yallist()\n  }\n\n  self.tail = null\n  self.head = null\n  self.length = 0\n\n  if (list && typeof list.forEach === 'function') {\n    list.forEach(function (item) {\n      self.push(item)\n    })\n  } else if (arguments.length > 0) {\n    for (var i = 0, l = arguments.length; i < l; i++) {\n      self.push(arguments[i])\n    }\n  }\n\n  return self\n}\n\nYallist.prototype.removeNode = function (node) {\n  if (node.list !== this) {\n    throw new Error('removing node which does not belong to this list')\n  }\n\n  var next = node.next\n  var prev = node.prev\n\n  if (next) {\n    next.prev = prev\n  }\n\n  if (prev) {\n    prev.next = next\n  }\n\n  if (node === this.head) {\n    this.head = next\n  }\n  if (node === this.tail) {\n    this.tail = prev\n  }\n\n  node.list.length--\n  node.next = null\n  node.prev = null\n  node.list = null\n}\n\nYallist.prototype.unshiftNode = function (node) {\n  if (node === this.head) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var head = this.head\n  node.list = this\n  node.next = head\n  if (head) {\n    head.prev = node\n  }\n\n  this.head = node\n  if (!this.tail) {\n    this.tail = node\n  }\n  this.length++\n}\n\nYallist.prototype.pushNode = function (node) {\n  if (node === this.tail) {\n    return\n  }\n\n  if (node.list) {\n    node.list.removeNode(node)\n  }\n\n  var tail = this.tail\n  node.list = this\n  node.prev = tail\n  if (tail) {\n    tail.next = node\n  }\n\n  this.tail = node\n  if (!this.head) {\n    this.head = node\n  }\n  this.length++\n}\n\nYallist.prototype.push = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    push(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.unshift = function () {\n  for (var i = 0, l = arguments.length; i < l; i++) {\n    unshift(this, arguments[i])\n  }\n  return this.length\n}\n\nYallist.prototype.pop = function () {\n  if (!this.tail) {\n    return undefined\n  }\n\n  var res = this.tail.value\n  this.tail = this.tail.prev\n  if (this.tail) {\n    this.tail.next = null\n  } else {\n    this.head = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.shift = function () {\n  if (!this.head) {\n    return undefined\n  }\n\n  var res = this.head.value\n  this.head = this.head.next\n  if (this.head) {\n    this.head.prev = null\n  } else {\n    this.tail = null\n  }\n  this.length--\n  return res\n}\n\nYallist.prototype.forEach = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.head, i = 0; walker !== null; i++) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.next\n  }\n}\n\nYallist.prototype.forEachReverse = function (fn, thisp) {\n  thisp = thisp || this\n  for (var walker = this.tail, i = this.length - 1; walker !== null; i--) {\n    fn.call(thisp, walker.value, i, this)\n    walker = walker.prev\n  }\n}\n\nYallist.prototype.get = function (n) {\n  for (var i = 0, walker = this.head; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.next\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.getReverse = function (n) {\n  for (var i = 0, walker = this.tail; walker !== null && i < n; i++) {\n    // abort out of the list early if we hit a cycle\n    walker = walker.prev\n  }\n  if (i === n && walker !== null) {\n    return walker.value\n  }\n}\n\nYallist.prototype.map = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.head; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.next\n  }\n  return res\n}\n\nYallist.prototype.mapReverse = function (fn, thisp) {\n  thisp = thisp || this\n  var res = new Yallist()\n  for (var walker = this.tail; walker !== null;) {\n    res.push(fn.call(thisp, walker.value, this))\n    walker = walker.prev\n  }\n  return res\n}\n\nYallist.prototype.reduce = function (fn, initial) {\n  var acc\n  var walker = this.head\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.head) {\n    walker = this.head.next\n    acc = this.head.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = 0; walker !== null; i++) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.next\n  }\n\n  return acc\n}\n\nYallist.prototype.reduceReverse = function (fn, initial) {\n  var acc\n  var walker = this.tail\n  if (arguments.length > 1) {\n    acc = initial\n  } else if (this.tail) {\n    walker = this.tail.prev\n    acc = this.tail.value\n  } else {\n    throw new TypeError('Reduce of empty list with no initial value')\n  }\n\n  for (var i = this.length - 1; walker !== null; i--) {\n    acc = fn(acc, walker.value, i)\n    walker = walker.prev\n  }\n\n  return acc\n}\n\nYallist.prototype.toArray = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.head; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.next\n  }\n  return arr\n}\n\nYallist.prototype.toArrayReverse = function () {\n  var arr = new Array(this.length)\n  for (var i = 0, walker = this.tail; walker !== null; i++) {\n    arr[i] = walker.value\n    walker = walker.prev\n  }\n  return arr\n}\n\nYallist.prototype.slice = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = 0, walker = this.head; walker !== null && i < from; i++) {\n    walker = walker.next\n  }\n  for (; walker !== null && i < to; i++, walker = walker.next) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.sliceReverse = function (from, to) {\n  to = to || this.length\n  if (to < 0) {\n    to += this.length\n  }\n  from = from || 0\n  if (from < 0) {\n    from += this.length\n  }\n  var ret = new Yallist()\n  if (to < from || to < 0) {\n    return ret\n  }\n  if (from < 0) {\n    from = 0\n  }\n  if (to > this.length) {\n    to = this.length\n  }\n  for (var i = this.length, walker = this.tail; walker !== null && i > to; i--) {\n    walker = walker.prev\n  }\n  for (; walker !== null && i > from; i--, walker = walker.prev) {\n    ret.push(walker.value)\n  }\n  return ret\n}\n\nYallist.prototype.reverse = function () {\n  var head = this.head\n  var tail = this.tail\n  for (var walker = head; walker !== null; walker = walker.prev) {\n    var p = walker.prev\n    walker.prev = walker.next\n    walker.next = p\n  }\n  this.head = tail\n  this.tail = head\n  return this\n}\n\nfunction push (self, item) {\n  self.tail = new Node(item, self.tail, null, self)\n  if (!self.head) {\n    self.head = self.tail\n  }\n  self.length++\n}\n\nfunction unshift (self, item) {\n  self.head = new Node(item, null, self.head, self)\n  if (!self.tail) {\n    self.tail = self.head\n  }\n  self.length++\n}\n\nfunction Node (value, prev, next, list) {\n  if (!(this instanceof Node)) {\n    return new Node(value, prev, next, list)\n  }\n\n  this.list = list\n  this.value = value\n\n  if (prev) {\n    prev.next = this\n    this.prev = prev\n  } else {\n    this.prev = null\n  }\n\n  if (next) {\n    next.prev = this\n    this.next = next\n  } else {\n    this.next = null\n  }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/yallist/yallist.js\n// module id = 78\n// module chunks = 0","import { And } from '../core/style/expressions/binary';\nimport { In, Nin } from '../core/style/expressions/belongs';\nimport Between from '../core/style/expressions/between';\nimport Category from '../core/style/expressions/category';\nimport Float from '../core/style/expressions/float';\nimport Property from '../core/style/expressions/property';\nimport Blend from '../core/style/expressions/blend';\nimport Animate from '../core/style/expressions/animate';\nimport FloatConstant from '../core/style/expressions/floatConstant';\n\n\n/**\n * Returns supported windshaft filters for the style\n * @param {*} style\n * @returns {Filtering}\n */\nexport function getFiltering(style) {\n    return getFilter(style.filter);\n}\n\n/**\n *\n * @param {Filtering} filtering\n */\nexport function getSQLWhere(filtering) {\n    if (!filtering) {\n        return '';\n    }\n    return 'WHERE ' + filtering.map(filter => getSQL(filter)).join(' AND ');\n\n}\n\nfunction getSQL(f) {\n    return getBetweenSQL(f) || getInSQL(f) || getNinSQL(f) || '';\n}\n\nfunction getBetweenSQL(f) {\n    if (f.type == 'between') {\n        return `(${f.property} BETWEEN ${f.lowerLimit} AND ${f.upperLimit})`;\n    }\n}\n\nfunction getInSQL(f) {\n    if (f.type == 'in') {\n        return `(${f.property} IN (${f.whitelist.map(cat => `'${cat}'`).join()}))`;\n    }\n}\n\nfunction getNinSQL(f) {\n    if (f.type == 'nin') {\n        return `(${f.property} NOT IN (${f.blacklist.map(cat => `'${cat}'`).join()}))`;\n    }\n}\n\nfunction getFilter(f) {\n    return getAndFilter(f) || getInFilter(f) || getNinFilter(f) || getBetweenFilter(f) || getBlendFilter(f) || null;\n}\n\nfunction getAndFilter(f) {\n    if (f instanceof And) {\n        return [getFilter(f.a), getFilter(f.b)].filter(Boolean).reduce((x, y) => x.concat(y));\n    }\n}\n\nfunction getBlendFilter(f) {\n    if (f instanceof Blend && f.originalMix instanceof Animate) {\n        return getFilter(f.b);\n    }\n}\n\nfunction getInFilter(f) {\n    if (f instanceof In && f.value instanceof Property && f.categories.every(cat => cat instanceof Category) && f.categories.length > 0) {\n        return [{\n            type: 'in',\n            property: f.value.name,\n            whitelist: f.categories.map(cat => cat.expr)\n        }];\n    }\n}\n\nfunction getNinFilter(f) {\n    if (f instanceof Nin && f.value instanceof Property && f.categories.every(cat => cat instanceof Category) && f.categories.length > 0) {\n        return [{\n            type: 'nin',\n            property: f.value.name,\n            blacklist: f.categories.map(cat => cat.expr)\n        }];\n    }\n}\n\nfunction getBetweenFilter(f) {\n    if (isBetweenFilter(f)) {\n        return [{\n            type: 'between',\n            property: f.value.name,\n            lowerLimit: f.lowerLimit.expr,\n            upperLimit: f.upperLimit.expr,\n        }];\n    }\n}\n\nfunction isBetweenFilter(f) {\n    return f instanceof Between\n        && f.value instanceof Property\n        && (f.lowerLimit instanceof Float || f.lowerLimit instanceof FloatConstant)\n        && (f.upperLimit instanceof Float || f.upperLimit instanceof FloatConstant);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/windshaft-filtering.js\n// module id = 79\n// module chunks = 0","module.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@mapbox/vector-tile/index.js\n// module id = 80\n// module chunks = 0","'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@mapbox/vector-tile/lib/vectortile.js\n// module id = 81\n// module chunks = 0","'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@mapbox/point-geometry/index.js\n// module id = 82\n// module chunks = 0","import * as util from '../util';\nimport BaseWindshaft from './base-windshaft';\nimport CartoValidationError from '../error-handling/carto-validation-error';\n\n\nexport default class SQL extends BaseWindshaft {\n\n    /**\n     * A SQL defines the data that will be displayed in a layer.\n     * \n     * Imagine you have a table named `european_cities` and you only want to download data from european cities with population > 100000\n     * \n     * ```javascript\n     * new carto.source.SQL(`SELECT * FROM european_cities WHERE country like 'europe' AND population > 10000`, {\n     *   apiKey: 'YOUR_API_KEY_HERE',\n     *   user: 'YOUR_USERNAME_HERE'\n     * });\n     * ````\n     * \n     * This only downloads the data you need from the server reducing data usage. \n     * \n     * If you need all the data see {@link carto.source.Dataset|carto.source.Dataset}\n     * \n     * Since tables in the server are protected you must provide valid credentials in order to get access to the data.\n     * This can be done {@link carto.setDefaultAuth|setting the default auth} in the carto object or providing an `auth` \n     * object with your username and apiKey.\n     * \n     * If your server is not hosted by CARTO you must add a third parameter that includes the serverURL.\n     *\n     * @param {string} query - A SQL query containing a SELECT statement\n     * @param {object} auth\n     * @param {string} auth.apiKey - API key used to authenticate against CARTO\n     * @param {string} auth.user - Name of the user\n     * @param {object} config\n     * @param {string} [config.serverURL='https://{user}.carto.com'] - URL of the CARTO Maps API server\n     *\n     * @example\n     * new carto.source.SQL('SELECT * FROM european_cities', {\n     *   apiKey: 'YOUR_API_KEY_HERE',\n     *   user: 'YOUR_USERNAME_HERE'\n     * });\n     *\n     * @fires CartoError\n     *\n     * @constructor SQL\n     * @extends carto.source.Base\n     * @memberof carto.source\n     * @api\n     */\n    constructor(query, auth, config) {\n        super();\n        this._checkQuery(query);\n        this._query = query;\n        this.initialize(auth, config);\n    }\n\n    _checkQuery(query) {\n        if (util.isUndefined(query)) {\n            throw new CartoValidationError('source', 'queryRequired');\n        }\n        if (!util.isString(query)) {\n            throw new CartoValidationError('source', 'queryStringRequired');\n        }\n        if (query === '') {\n            throw new CartoValidationError('source', 'nonValidQuery');\n        }\n        var sqlRegex = /(SELECT|select)\\s+.*\\s+(FROM|from)\\s+.*/;\n        if (!query.match(sqlRegex)) {\n            throw new CartoValidationError('source', 'nonValidSQLQuery');\n        }\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/source/sql.js\n// module id = 83\n// module chunks = 0","import * as util from './util';\nimport SourceBase from './source/base';\nimport Style from './style';\nimport CartoMap from './map';\nimport getCMIntegrator from './integrator/carto';\nimport getMGLIntegrator from './integrator/mapbox-gl';\nimport CartoValidationError from './error-handling/carto-validation-error';\nimport { cubic } from '../core/style/functions';\n\n\nexport default class Layer {\n\n    /**\n    *\n    * A Layer is the primary way to visualize geospatial data.\n    *\n    * To create a layer a {@link carto.source.Base|source} and {@link carto.Style|style} are required:\n    *\n    * - The {@link carto.source.Base|source} is used to know **what** data will be displayed in the Layer.\n    * - The {@link carto.Style|style} is used to know **how** to draw the data in the Layer.\n    *\n    * @param {string} id\n    * @param {carto.source.Base} source\n    * @param {carto.Style} style\n    *\n    * @example\n    * new carto.Layer('layer0', source, style);\n    *\n    * @fires CartoError\n    *\n    * @constructor Layer\n    * @memberof carto\n    * @api\n    */\n    constructor(id, source, style) {\n        this._checkId(id);\n        this._checkSource(source);\n        this._checkStyle(style);\n\n        this._lastViewport = null;\n        this._lastMNS = null;\n        this._integrator = null;\n        this._dataframes = [];\n        this._context = new Promise((resolve) => {\n            this._contextInitCallback = resolve;\n        });\n\n        this._id = id;\n        this.metadata = null;\n        this.setSource(source);\n        this.setStyle(style);\n\n        this._listeners = {};\n\n        this.state = 'init';\n        console.log('L', this);\n\n        this.paintCallback = () => {\n            this._dataframes.map(\n                dataframe => {\n                    dataframe.setStyle(this._style);\n                    dataframe.visible = dataframe.active;\n                });\n            this._integrator.renderer.refresh(Number.NaN);\n            this._dataframes.map(\n                dataframe => {\n                    dataframe.visible = false;\n                });\n            if (this.state == 'dataLoaded') {\n                this.state = 'dataPainted';\n                this._fire('loaded');\n            }\n        };\n    }\n\n    _fire(eventType, eventData) {\n        if (!this._listeners[eventType]) {\n            return;\n        }\n        this._listeners[eventType].map(listener => listener(eventData));\n    }\n\n    on(eventType, callback) {\n        if (!this._listeners[eventType]) {\n            this._listeners[eventType] = [callback];\n        } else {\n            this._listeners[eventType].push(callback);\n        }\n    }\n    off(eventType, callback) {\n        const index = this._listeners[eventType].indexOf(callback);\n        this._listeners[eventType].splice(index, 1);\n    }\n\n    async update(source, style) {\n        this._checkSource(source);\n        this._checkStyle(style);\n        this._atomicChangeUID = this._atomicChangeUID + 1 || 1;\n        const uid = this._atomicChangeUID;\n        await this._context;\n        const metadata = await source.requestMetadata(style);\n        if (this._atomicChangeUID > uid) {\n            throw new Error('Another atomic change was done before this one committed');\n        }\n\n        // Everything was ok => commit changes\n        this.metadata = metadata;\n\n        source.bindLayer(this._onDataframeAdded.bind(this), this._onDataFrameRemoved.bind(this), this._onDataLoaded.bind(this));\n        if (this._source && this._source !== source) {\n            this._source.free();\n        }\n        this._source = source;\n        this.requestData();\n\n        if (this._style) {\n            this._style.onChange(null);\n        }\n        this._style = style;\n        style.onChange(() => {\n            this._styleChanged(style);\n        });\n        this._compileShaders(style, metadata);\n    }\n    /**\n     * Set a new source for this layer.\n     *\n     * @param {carto.source.Base} source - New source\n     * @memberof carto.Layer\n     * @instance\n     * @api\n     */\n    async setSource(source) {\n        this._checkSource(source);\n        const style = this._style;\n        if (style) {\n            var metadata = await source.requestMetadata(style);\n        }\n        if (this._style !== style) {\n            throw new Error('A style change was made before the metadata was retrieved, therefore, metadata is stale and it cannot be longer consumed');\n        }\n        this.metadata = metadata;\n        source.bindLayer(this._onDataframeAdded.bind(this), this._onDataFrameRemoved.bind(this), this._onDataLoaded.bind(this));\n        if (this._source && this._source !== source) {\n            this._source.free();\n        }\n        this._source = source;\n        if (style) {\n            this._styleChanged(style);\n        }\n    }\n\n    /**\n     * Callback executed when the client adds a new dataframe\n     * @param {Dataframe} dataframe\n     */\n    _onDataframeAdded(dataframe) {\n        this._dataframes.push(dataframe);\n        this._integrator.renderer.addDataframe(dataframe);\n        this._integrator.invalidateWebGLState();\n    }\n\n    /**\n     * Callback executed when the client removes dataframe\n     * @param {Dataframe} dataframe\n     */\n    _onDataFrameRemoved(dataframe) {\n        this._dataframes = this._dataframes.filter(d => d !== dataframe);\n        this._integrator.renderer.removeDataframe(dataframe);\n        this._integrator.invalidateWebGLState();\n    }\n\n    /**\n    * Callback executed when the client finishes loading data\n    */\n    _onDataLoaded() {\n        this.state = 'dataLoaded';\n    }\n\n    /**\n     * Set a new style for this layer.\n     *\n     * This transition happens instantly, for smooth animations use {@link carto.Layer#blendToStyle|blendToStyle}\n     *\n     * @param {carto.Style} style - New style\n     * @memberof carto.Layer\n     * @instance\n     * @api\n     */\n    setStyle(style) {\n        this._checkStyle(style);\n        return this._styleChanged(style).then(r => {\n            if (this._style) {\n                this._style.onChange(null);\n            }\n            this._style = style;\n            this._style.onChange(() => {\n                this._styleChanged(style);\n            });\n            return r;\n        });\n    }\n\n    /**\n     * Blend the current style with another style.\n     *\n     * This allows smooth transforms between two different styles.\n     *\n     * @example <caption> Smooth transition variating point size </caption>\n     * // We create two different styles varying the width\n     * const style0 = new carto.style({ width: 10 });\n     * const style1 = new carto.style({ width: 20 });\n     * // Create a layer with the first style\n     * const layer = new carto.Layer(source, style);\n     * // We add the layer to the map, the points in this layer will have widh 10\n     * layer.addTo(map, 'layer0');\n     * // The points will be animated from 10px to 20px for 500ms.\n     * layer.blendToStyle(style1, 500);\n     *\n     * @param {carto.Style} style - The final style\n     * @param {number} duration - The animation duration in milliseconds [default:400]\n     * @memberof carto.Layer\n     * @instance\n     * @api\n     */\n    blendToStyle(style, ms = 400, interpolator = cubic) {\n        this._checkStyle(style);\n        if (this._style) {\n            style.getColor().blendFrom(this._style.getColor(), ms, interpolator);\n            style.getStrokeColor().blendFrom(this._style.getStrokeColor(), ms, interpolator);\n            style.getWidth().blendFrom(this._style.getWidth(), ms, interpolator);\n            style.getStrokeWidth().blendFrom(this._style.getStrokeWidth(), ms, interpolator);\n            style.filter.blendFrom(this._style.filter, ms, interpolator);\n        }\n\n        return this._styleChanged(style).then(r => {\n            if (this._style) {\n                this._style.onChange(null);\n            }\n            this._style = style;\n            this._style.onChange(() => {\n                this._styleChanged(style);\n            });\n            return r;\n        });\n    }\n\n    /**\n     * Add this layer to a map.\n     *\n     * @param {mapboxgl.Map} map\n     * @param {string} beforeLayerID\n     * @memberof carto.Layer\n     * @instance\n     * @api\n     */\n    addTo(map, beforeLayerID) {\n        if (this._isCartoMap(map)) {\n            this._addToCartoMap(map, beforeLayerID);\n        } else if (this._isMGLMap(map)) {\n            this._addToMGLMap(map, beforeLayerID);\n        } else {\n            throw new CartoValidationError('layer', 'nonValidMap');\n        }\n    }\n\n    hasDataframes() {\n        return this._dataframes.length > 0;\n    }\n\n    getId() {\n        return this._id;\n    }\n\n    getSource() {\n        return this._source;\n    }\n\n    getStyle() {\n        return this._style;\n    }\n\n    _isCartoMap(map) {\n        return map instanceof CartoMap;\n    }\n\n    _isMGLMap() {\n        // TODO: implement this\n        return true;\n    }\n\n    _addToCartoMap(map, beforeLayerID) {\n        this._integrator = getCMIntegrator(map);\n        this._integrator.addLayer(this, beforeLayerID);\n    }\n\n    initCallback() {\n        this._contextInitCallback();\n        this.requestMetadata();\n    }\n\n    _addToMGLMap(map, beforeLayerID) {\n        if (map.isStyleLoaded()) {\n            this._onMapLoaded(map, beforeLayerID);\n        } else {\n            map.on('load', () => {\n                this._onMapLoaded(map, beforeLayerID);\n            });\n        }\n    }\n\n    _onMapLoaded(map, beforeLayerID) {\n        this._integrator = getMGLIntegrator(map);\n        this._integrator.addLayer(this, beforeLayerID);\n    }\n\n    _compileShaders(style, metadata) {\n        style._compileColorShader(this._integrator.renderer.gl, metadata);\n        style._compileWidthShader(this._integrator.renderer.gl, metadata);\n        style._compileStrokeColorShader(this._integrator.renderer.gl, metadata);\n        style._compileStrokeWidthShader(this._integrator.renderer.gl, metadata);\n        style._compileFilterShader(this._integrator.renderer.gl, metadata);\n    }\n    async _styleChanged(style) {\n        await this._context;\n        const source = this._source;\n        const metadata = await source.requestMetadata(style);\n        if (this._source !== source) {\n            throw new Error('A source change was made before the metadata was retrieved, therefore, metadata is stale and it cannot be longer consumed');\n        }\n        this.metadata = metadata;\n        this._compileShaders(style, this.metadata);\n        return this.requestData();\n    }\n\n    _checkId(id) {\n        if (util.isUndefined(id)) {\n            throw new CartoValidationError('layer', 'idRequired');\n        }\n        if (!util.isString(id)) {\n            throw new CartoValidationError('layer', 'idStringRequired');\n        }\n        if (id === '') {\n            throw new CartoValidationError('layer', 'nonValidId');\n        }\n    }\n\n    _checkSource(source) {\n        if (util.isUndefined(source)) {\n            throw new CartoValidationError('layer', 'sourceRequired');\n        }\n        if (!(source instanceof SourceBase)) {\n            throw new CartoValidationError('layer', 'nonValidSource');\n        }\n    }\n\n    _checkStyle(style) {\n        if (util.isUndefined(style)) {\n            throw new CartoValidationError('layer', 'styleRequired');\n        }\n        if (!(style instanceof Style)) {\n            throw new CartoValidationError('layer', 'nonValidStyle');\n        }\n    }\n\n    _getViewport() {\n        if (this._integrator) {\n            return this._integrator.renderer.getBounds();\n        }\n        throw new Error('?');\n    }\n\n    async requestMetadata(style) {\n        style = style || this._style;\n        if (!style) {\n            return;\n        }\n        await this._context;\n        return this._source.requestMetadata(style);\n    }\n\n    async requestData() {\n        if (!this.metadata) {\n            return;\n        }\n        this._source.requestData(this._getViewport());\n    }\n\n    getNumFeatures() {\n        return this._dataframes.filter(d => d.active).map(d => d.numFeatures).reduce((x, y) => x + y, 0);\n    }\n\n    //TODO free layer resources\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/layer.js\n// module id = 84\n// module chunks = 0","export function compileShader(gl, styleRootExpr, shaderCreator) {\n    let uniformIDcounter = 0;\n    let tid = {};\n    const colorModifier = styleRootExpr._applyToShaderSource(() => uniformIDcounter++, name => {\n        if (tid[name] !== undefined) {\n            return tid[name];\n        }\n        tid[name] = Object.keys(tid).length;\n        return tid[name];\n    });\n    const shader = shaderCreator(gl, colorModifier.preface, colorModifier.inline);\n    styleRootExpr._postShaderCompile(shader.program, gl);\n    return {\n        tid: tid,\n        shader: shader\n    };\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/shader-compiler.js\n// module id = 85\n// module chunks = 0","\nimport jsep from 'jsep';\nimport * as functions from './functions';\nimport { implicitCast } from './expressions/utils';\n// TODO use Schema classes\n\nconst aggFns = [];\n\nvar lowerCaseFunctions = {};\nObject.keys(functions)\n    .filter(name => name[0] == name[0].toLowerCase()) // Only get functions starting with lowercase\n    .map(name => { lowerCaseFunctions[name.toLocaleLowerCase()] = functions[name]; });\nlowerCaseFunctions.true = functions.TRUE;\nlowerCaseFunctions.false = functions.FALSE;\n\n/**\n * @jsapi\n * @param {*} str\n * @param {*} schema\n */\nexport function parseStyleExpression(str, schema) {\n    // jsep addBinaryOp pollutes its module scope, we need to remove the custom operators afterwards\n    jsep.addBinaryOp('^', 10);\n    const r = parseNode(jsep(str), schema);\n    jsep.removeBinaryOp('^');\n    return r;\n}\n\nfunction parseStyleNamedExpr(styleSpec, node) {\n    if (node.operator != ':') {\n        throw new Error('Invalid syntax');\n    }\n    const name = node.left.name;\n    if (!name) {\n        throw new Error('Invalid syntax');\n    }\n    const value = parseNode(node.right);\n    // Don't cast resolution properties implicitly since they must be of type Number\n    styleSpec[name] = name == 'resolution' ? value : implicitCast(value);\n}\n\nexport function parseStyleDefinition(str) {\n    // jsep addBinaryOp pollutes its module scope, we need to remove the custom operators afterwards\n    jsep.addBinaryOp(':', 0);\n    jsep.addBinaryOp('^', 11);\n    jsep.addBinaryOp('or', 1);\n    jsep.addBinaryOp('and', 2);\n    jsep.removeLiteral('true');\n    jsep.removeLiteral('false');\n    const ast = jsep(str);\n    let styleSpec = {};\n    if (ast.type == 'Compound') {\n        ast.body.map(node => parseStyleNamedExpr(styleSpec, node));\n    } else {\n        parseStyleNamedExpr(styleSpec, ast);\n    }\n    jsep.removeBinaryOp('and');\n    jsep.removeBinaryOp('or');\n    jsep.removeBinaryOp('^');\n    jsep.removeBinaryOp(':');\n    jsep.addLiteral('true');\n    jsep.addLiteral('false');\n    return styleSpec;\n}\n\nfunction parseFunctionCall(node) {\n    const name = node.callee.name.toLowerCase();\n    if (aggFns.includes(name)) {\n        //node.arguments[0].name += '_' + name;\n        const args = node.arguments.map(arg => parseNode(arg));\n        return args[0];\n    }\n    const args = node.arguments.map(arg => parseNode(arg));\n    if (lowerCaseFunctions[name]) {\n        return lowerCaseFunctions[name](...args);\n    }\n    throw new Error(`Invalid function name '${node.callee.name}'`);\n}\n\nfunction parseBinaryOperation(node) {\n    const left = parseNode(node.left);\n    const right = parseNode(node.right);\n    switch (node.operator) {\n        case '*':\n            return functions.floatMul(left, right);\n        case '/':\n            return functions.floatDiv(left, right);\n        case '+':\n            return functions.floatAdd(left, right);\n        case '-':\n            return functions.floatSub(left, right);\n        case '%':\n            return functions.floatMod(left, right);\n        case '^':\n            return functions.floatPow(left, right);\n        case '>':\n            return functions.greaterThan(left, right);\n        case '>=':\n            return functions.greaterThanOrEqualTo(left, right);\n        case '<':\n            return functions.lessThan(left, right);\n        case '<=':\n            return functions.lessThanOrEqualTo(left, right);\n        case '==':\n            return functions.equals(left, right);\n        case 'and':\n            return functions.and(left, right);\n        case 'or':\n            return functions.or(left, right);\n        default:\n            throw new Error(`Invalid binary operator '${node.operator}'`);\n    }\n}\n\nfunction parseUnaryOperation(node) {\n    switch (node.operator) {\n        case '-':\n            return functions.floatMul(-1, parseNode(node.argument));\n        case '+':\n            return parseNode(node.argument);\n        default:\n            throw new Error(`Invalid unary operator '${node.operator}'`);\n    }\n}\n\nfunction parseIdentifier(node) {\n    if (node.name[0] == '$') {\n        return functions.property(node.name.substring(1));\n    } else if (functions.palettes[node.name.toLowerCase()]) {\n        return functions.palettes[node.name.toLowerCase()];\n    } else if (lowerCaseFunctions[node.name.toLowerCase()]) {\n        return lowerCaseFunctions[node.name.toLowerCase()];\n    }\n}\n\nfunction parseNode(node) {\n    if (node.type == 'CallExpression') {\n        return parseFunctionCall(node);\n    } else if (node.type == 'Literal') {\n        return node.value;\n    } else if (node.type == 'ArrayExpression') {\n        return node.elements.map(e => parseNode(e));\n    } else if (node.type == 'BinaryExpression') {\n        return parseBinaryOperation(node);\n    } else if (node.type == 'UnaryExpression') {\n        return parseUnaryOperation(node);\n    } else if (node.type == 'Identifier') {\n        return parseIdentifier(node);\n    }\n    throw new Error(`Invalid expression '${JSON.stringify(node)}'`);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/core/style/parser.js\n// module id = 86\n// module chunks = 0","//     JavaScript Expression Parser (JSEP) 0.3.3\r\n//     JSEP may be freely distributed under the MIT License\r\n//     http://jsep.from.so/\r\n\r\n/*global module: true, exports: true, console: true */\r\n(function (root) {\r\n\t'use strict';\r\n\t// Node Types\r\n\t// ----------\r\n\r\n\t// This is the full set of types that any JSEP node can be.\r\n\t// Store them here to save space when minified\r\n\tvar COMPOUND = 'Compound',\r\n\t\tIDENTIFIER = 'Identifier',\r\n\t\tMEMBER_EXP = 'MemberExpression',\r\n\t\tLITERAL = 'Literal',\r\n\t\tTHIS_EXP = 'ThisExpression',\r\n\t\tCALL_EXP = 'CallExpression',\r\n\t\tUNARY_EXP = 'UnaryExpression',\r\n\t\tBINARY_EXP = 'BinaryExpression',\r\n\t\tLOGICAL_EXP = 'LogicalExpression',\r\n\t\tCONDITIONAL_EXP = 'ConditionalExpression',\r\n\t\tARRAY_EXP = 'ArrayExpression',\r\n\r\n\t\tPERIOD_CODE = 46, // '.'\r\n\t\tCOMMA_CODE  = 44, // ','\r\n\t\tSQUOTE_CODE = 39, // single quote\r\n\t\tDQUOTE_CODE = 34, // double quotes\r\n\t\tOPAREN_CODE = 40, // (\r\n\t\tCPAREN_CODE = 41, // )\r\n\t\tOBRACK_CODE = 91, // [\r\n\t\tCBRACK_CODE = 93, // ]\r\n\t\tQUMARK_CODE = 63, // ?\r\n\t\tSEMCOL_CODE = 59, // ;\r\n\t\tCOLON_CODE  = 58, // :\r\n\r\n\t\tthrowError = function(message, index) {\r\n\t\t\tvar error = new Error(message + ' at character ' + index);\r\n\t\t\terror.index = index;\r\n\t\t\terror.description = message;\r\n\t\t\tthrow error;\r\n\t\t},\r\n\r\n\t// Operations\r\n\t// ----------\r\n\r\n\t// Set `t` to `true` to save space (when minified, not gzipped)\r\n\t\tt = true,\r\n\t// Use a quickly-accessible map to store all of the unary operators\r\n\t// Values are set to `true` (it really doesn't matter)\r\n\t\tunary_ops = {'-': t, '!': t, '~': t, '+': t},\r\n\t// Also use a map for the binary operations but set their values to their\r\n\t// binary precedence for quick reference:\r\n\t// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\r\n\t\tbinary_ops = {\r\n\t\t\t'||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\r\n\t\t\t'==': 6, '!=': 6, '===': 6, '!==': 6,\r\n\t\t\t'<': 7,  '>': 7,  '<=': 7,  '>=': 7,\r\n\t\t\t'<<':8,  '>>': 8, '>>>': 8,\r\n\t\t\t'+': 9, '-': 9,\r\n\t\t\t'*': 10, '/': 10, '%': 10\r\n\t\t},\r\n\t// Get return the longest key length of any object\r\n\t\tgetMaxKeyLen = function(obj) {\r\n\t\t\tvar max_len = 0, len;\r\n\t\t\tfor(var key in obj) {\r\n\t\t\t\tif((len = key.length) > max_len && obj.hasOwnProperty(key)) {\r\n\t\t\t\t\tmax_len = len;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn max_len;\r\n\t\t},\r\n\t\tmax_unop_len = getMaxKeyLen(unary_ops),\r\n\t\tmax_binop_len = getMaxKeyLen(binary_ops),\r\n\t// Literals\r\n\t// ----------\r\n\t// Store the values to return for the various literals we may encounter\r\n\t\tliterals = {\r\n\t\t\t'true': true,\r\n\t\t\t'false': false,\r\n\t\t\t'null': null\r\n\t\t},\r\n\t// Except for `this`, which is special. This could be changed to something like `'self'` as well\r\n\t\tthis_str = 'this',\r\n\t// Returns the precedence of a binary operator or `0` if it isn't a binary operator\r\n\t\tbinaryPrecedence = function(op_val) {\r\n\t\t\treturn binary_ops[op_val] || 0;\r\n\t\t},\r\n\t// Utility function (gets called from multiple places)\r\n\t// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\r\n\t\tcreateBinaryExpression = function (operator, left, right) {\r\n\t\t\tvar type = (operator === '||' || operator === '&&') ? LOGICAL_EXP : BINARY_EXP;\r\n\t\t\treturn {\r\n\t\t\t\ttype: type,\r\n\t\t\t\toperator: operator,\r\n\t\t\t\tleft: left,\r\n\t\t\t\tright: right\r\n\t\t\t};\r\n\t\t},\r\n\t\t// `ch` is a character code in the next three functions\r\n\t\tisDecimalDigit = function(ch) {\r\n\t\t\treturn (ch >= 48 && ch <= 57); // 0...9\r\n\t\t},\r\n\t\tisIdentifierStart = function(ch) {\r\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\r\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\r\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\r\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\r\n\t\t},\r\n\t\tisIdentifierPart = function(ch) {\r\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\r\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\r\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\r\n\t\t\t\t\t(ch >= 48 && ch <= 57) || // 0...9\r\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\r\n\t\t},\r\n\r\n\t\t// Parsing\r\n\t\t// -------\r\n\t\t// `expr` is a string with the passed in expression\r\n\t\tjsep = function(expr) {\r\n\t\t\t// `index` stores the character number we are currently at while `length` is a constant\r\n\t\t\t// All of the gobbles below will modify `index` as we move along\r\n\t\t\tvar index = 0,\r\n\t\t\t\tcharAtFunc = expr.charAt,\r\n\t\t\t\tcharCodeAtFunc = expr.charCodeAt,\r\n\t\t\t\texprI = function(i) { return charAtFunc.call(expr, i); },\r\n\t\t\t\texprICode = function(i) { return charCodeAtFunc.call(expr, i); },\r\n\t\t\t\tlength = expr.length,\r\n\r\n\t\t\t\t// Push `index` up to the next non-space character\r\n\t\t\t\tgobbleSpaces = function() {\r\n\t\t\t\t\tvar ch = exprICode(index);\r\n\t\t\t\t\t// space or tab\r\n\t\t\t\t\twhile(ch === 32 || ch === 9 || ch === 10 || ch === 13) {\r\n\t\t\t\t\t\tch = exprICode(++index);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// The main parsing function. Much of this code is dedicated to ternary expressions\r\n\t\t\t\tgobbleExpression = function() {\r\n\t\t\t\t\tvar test = gobbleBinaryExpression(),\r\n\t\t\t\t\t\tconsequent, alternate;\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tif(exprICode(index) === QUMARK_CODE) {\r\n\t\t\t\t\t\t// Ternary expression: test ? consequent : alternate\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\tconsequent = gobbleExpression();\r\n\t\t\t\t\t\tif(!consequent) {\r\n\t\t\t\t\t\t\tthrowError('Expected expression', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tif(exprICode(index) === COLON_CODE) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\talternate = gobbleExpression();\r\n\t\t\t\t\t\t\tif(!alternate) {\r\n\t\t\t\t\t\t\t\tthrowError('Expected expression', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\ttype: CONDITIONAL_EXP,\r\n\t\t\t\t\t\t\t\ttest: test,\r\n\t\t\t\t\t\t\t\tconsequent: consequent,\r\n\t\t\t\t\t\t\t\talternate: alternate\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrowError('Expected :', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn test;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Search for the operation portion of the string (e.g. `+`, `===`)\r\n\t\t\t\t// Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\r\n\t\t\t\t// and move down from 3 to 2 to 1 character until a matching binary operation is found\r\n\t\t\t\t// then, return that binary operation\r\n\t\t\t\tgobbleBinaryOp = function() {\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tvar biop, to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\r\n\t\t\t\t\twhile(tc_len > 0) {\r\n\t\t\t\t\t\tif(binary_ops.hasOwnProperty(to_check)) {\r\n\t\t\t\t\t\t\tindex += tc_len;\r\n\t\t\t\t\t\t\treturn to_check;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// This function is responsible for gobbling an individual expression,\r\n\t\t\t\t// e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\r\n\t\t\t\tgobbleBinaryExpression = function() {\r\n\t\t\t\t\tvar ch_i, node, biop, prec, stack, biop_info, left, right, i;\r\n\r\n\t\t\t\t\t// First, try to get the leftmost thing\r\n\t\t\t\t\t// Then, check to see if there's a binary operator operating on that leftmost thing\r\n\t\t\t\t\tleft = gobbleToken();\r\n\t\t\t\t\tbiop = gobbleBinaryOp();\r\n\r\n\t\t\t\t\t// If there wasn't a binary operator, just return the leftmost node\r\n\t\t\t\t\tif(!biop) {\r\n\t\t\t\t\t\treturn left;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Otherwise, we need to start a stack to properly place the binary operations in their\r\n\t\t\t\t\t// precedence structure\r\n\t\t\t\t\tbiop_info = { value: biop, prec: binaryPrecedence(biop)};\r\n\r\n\t\t\t\t\tright = gobbleToken();\r\n\t\t\t\t\tif(!right) {\r\n\t\t\t\t\t\tthrowError(\"Expected expression after \" + biop, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstack = [left, biop_info, right];\r\n\r\n\t\t\t\t\t// Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\r\n\t\t\t\t\twhile((biop = gobbleBinaryOp())) {\r\n\t\t\t\t\t\tprec = binaryPrecedence(biop);\r\n\r\n\t\t\t\t\t\tif(prec === 0) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbiop_info = { value: biop, prec: prec };\r\n\r\n\t\t\t\t\t\t// Reduce: make a binary expression from the three topmost entries.\r\n\t\t\t\t\t\twhile ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\r\n\t\t\t\t\t\t\tright = stack.pop();\r\n\t\t\t\t\t\t\tbiop = stack.pop().value;\r\n\t\t\t\t\t\t\tleft = stack.pop();\r\n\t\t\t\t\t\t\tnode = createBinaryExpression(biop, left, right);\r\n\t\t\t\t\t\t\tstack.push(node);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnode = gobbleToken();\r\n\t\t\t\t\t\tif(!node) {\r\n\t\t\t\t\t\t\tthrowError(\"Expected expression after \" + biop, index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstack.push(biop_info, node);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti = stack.length - 1;\r\n\t\t\t\t\tnode = stack[i];\r\n\t\t\t\t\twhile(i > 1) {\r\n\t\t\t\t\t\tnode = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\r\n\t\t\t\t\t\ti -= 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// An individual part of a binary expression:\r\n\t\t\t\t// e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\r\n\t\t\t\tgobbleToken = function() {\r\n\t\t\t\t\tvar ch, to_check, tc_len;\r\n\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tch = exprICode(index);\r\n\r\n\t\t\t\t\tif(isDecimalDigit(ch) || ch === PERIOD_CODE) {\r\n\t\t\t\t\t\t// Char code 46 is a dot `.` which can start off a numeric literal\r\n\t\t\t\t\t\treturn gobbleNumericLiteral();\r\n\t\t\t\t\t} else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\r\n\t\t\t\t\t\t// Single or double quotes\r\n\t\t\t\t\t\treturn gobbleStringLiteral();\r\n\t\t\t\t\t} else if (ch === OBRACK_CODE) {\r\n\t\t\t\t\t\treturn gobbleArray();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tto_check = expr.substr(index, max_unop_len);\r\n\t\t\t\t\t\ttc_len = to_check.length;\r\n\t\t\t\t\t\twhile(tc_len > 0) {\r\n\t\t\t\t\t\t\tif(unary_ops.hasOwnProperty(to_check)) {\r\n\t\t\t\t\t\t\t\tindex += tc_len;\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttype: UNARY_EXP,\r\n\t\t\t\t\t\t\t\t\toperator: to_check,\r\n\t\t\t\t\t\t\t\t\targument: gobbleToken(),\r\n\t\t\t\t\t\t\t\t\tprefix: true\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\r\n\t\t\t\t\t\t\t// `foo`, `bar.baz`\r\n\t\t\t\t\t\t\treturn gobbleVariable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\t// Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\r\n\t\t\t\t// keep track of everything in the numeric literal and then calling `parseFloat` on that string\r\n\t\t\t\tgobbleNumericLiteral = function() {\r\n\t\t\t\t\tvar number = '', ch, chCode;\r\n\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\r\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tch = exprI(index);\r\n\t\t\t\t\tif(ch === 'e' || ch === 'E') { // exponent marker\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\tch = exprI(index);\r\n\t\t\t\t\t\tif(ch === '+' || ch === '-') { // exponent sign\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) { //exponent itself\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!isDecimalDigit(exprICode(index-1)) ) {\r\n\t\t\t\t\t\t\tthrowError('Expected exponent (' + number + exprI(index) + ')', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tchCode = exprICode(index);\r\n\t\t\t\t\t// Check to make sure this isn't a variable name that start with a number (123abc)\r\n\t\t\t\t\tif(isIdentifierStart(chCode)) {\r\n\t\t\t\t\t\tthrowError('Variable names cannot start with a number (' +\r\n\t\t\t\t\t\t\t\t\tnumber + exprI(index) + ')', index);\r\n\t\t\t\t\t} else if(chCode === PERIOD_CODE) {\r\n\t\t\t\t\t\tthrowError('Unexpected period', index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\tvalue: parseFloat(number),\r\n\t\t\t\t\t\traw: number\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Parses a string literal, staring with single or double quotes with basic support for escape codes\r\n\t\t\t\t// e.g. `\"hello world\"`, `'this is\\nJSEP'`\r\n\t\t\t\tgobbleStringLiteral = function() {\r\n\t\t\t\t\tvar str = '', quote = exprI(index++), closed = false, ch;\r\n\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tch = exprI(index++);\r\n\t\t\t\t\t\tif(ch === quote) {\r\n\t\t\t\t\t\t\tclosed = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else if(ch === '\\\\') {\r\n\t\t\t\t\t\t\t// Check for all of the common escape codes\r\n\t\t\t\t\t\t\tch = exprI(index++);\r\n\t\t\t\t\t\t\tswitch(ch) {\r\n\t\t\t\t\t\t\t\tcase 'n': str += '\\n'; break;\r\n\t\t\t\t\t\t\t\tcase 'r': str += '\\r'; break;\r\n\t\t\t\t\t\t\t\tcase 't': str += '\\t'; break;\r\n\t\t\t\t\t\t\t\tcase 'b': str += '\\b'; break;\r\n\t\t\t\t\t\t\t\tcase 'f': str += '\\f'; break;\r\n\t\t\t\t\t\t\t\tcase 'v': str += '\\x0B'; break;\r\n\t\t\t\t\t\t\t\tdefault : str += ch;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += ch;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!closed) {\r\n\t\t\t\t\t\tthrowError('Unclosed quote after \"'+str+'\"', index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\tvalue: str,\r\n\t\t\t\t\t\traw: quote + str + quote\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobbles only identifiers\r\n\t\t\t\t// e.g.: `foo`, `_value`, `$x1`\r\n\t\t\t\t// Also, this function checks if that identifier is a literal:\r\n\t\t\t\t// (e.g. `true`, `false`, `null`) or `this`\r\n\t\t\t\tgobbleIdentifier = function() {\r\n\t\t\t\t\tvar ch = exprICode(index), start = index, identifier;\r\n\r\n\t\t\t\t\tif(isIdentifierStart(ch)) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrowError('Unexpected ' + exprI(index), index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tch = exprICode(index);\r\n\t\t\t\t\t\tif(isIdentifierPart(ch)) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tidentifier = expr.slice(start, index);\r\n\r\n\t\t\t\t\tif(literals.hasOwnProperty(identifier)) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\t\tvalue: literals[identifier],\r\n\t\t\t\t\t\t\traw: identifier\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else if(identifier === this_str) {\r\n\t\t\t\t\t\treturn { type: THIS_EXP };\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: IDENTIFIER,\r\n\t\t\t\t\t\t\tname: identifier\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobbles a list of arguments within the context of a function call\r\n\t\t\t\t// or array literal. This function also assumes that the opening character\r\n\t\t\t\t// `(` or `[` has already been gobbled, and gobbles expressions and commas\r\n\t\t\t\t// until the terminator character `)` or `]` is encountered.\r\n\t\t\t\t// e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\r\n\t\t\t\tgobbleArguments = function(termination) {\r\n\t\t\t\t\tvar ch_i, args = [], node, closed = false;\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t\tif(ch_i === termination) { // done parsing\r\n\t\t\t\t\t\t\tclosed = true;\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else if (ch_i === COMMA_CODE) { // between expressions\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnode = gobbleExpression();\r\n\t\t\t\t\t\t\tif(!node || node.type === COMPOUND) {\r\n\t\t\t\t\t\t\t\tthrowError('Expected comma', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\targs.push(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!closed) {\r\n\t\t\t\t\t\tthrowError('Expected ' + String.fromCharCode(termination), index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn args;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobble a non-literal variable name. This variable name may include properties\r\n\t\t\t\t// e.g. `foo`, `bar.baz`, `foo['bar'].baz`\r\n\t\t\t\t// It also gobbles function calls:\r\n\t\t\t\t// e.g. `Math.acos(obj.angle)`\r\n\t\t\t\tgobbleVariable = function() {\r\n\t\t\t\t\tvar ch_i, node;\r\n\t\t\t\t\tch_i = exprICode(index);\r\n\r\n\t\t\t\t\tif(ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\tnode = gobbleGroup();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnode = gobbleIdentifier();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\twhile(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\tif(ch_i === PERIOD_CODE) {\r\n\t\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\r\n\t\t\t\t\t\t\t\tcomputed: false,\r\n\t\t\t\t\t\t\t\tobject: node,\r\n\t\t\t\t\t\t\t\tproperty: gobbleIdentifier()\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else if(ch_i === OBRACK_CODE) {\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\r\n\t\t\t\t\t\t\t\tcomputed: true,\r\n\t\t\t\t\t\t\t\tobject: node,\r\n\t\t\t\t\t\t\t\tproperty: gobbleExpression()\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t\t\tif(ch_i !== CBRACK_CODE) {\r\n\t\t\t\t\t\t\t\tthrowError('Unclosed [', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else if(ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\t\t// A function call is being made; gobble all the arguments\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: CALL_EXP,\r\n\t\t\t\t\t\t\t\t'arguments': gobbleArguments(CPAREN_CODE),\r\n\t\t\t\t\t\t\t\tcallee: node\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Responsible for parsing a group of things within parentheses `()`\r\n\t\t\t\t// This function assumes that it needs to gobble the opening parenthesis\r\n\t\t\t\t// and then tries to gobble everything within that parenthesis, assuming\r\n\t\t\t\t// that the next thing it should see is the close parenthesis. If not,\r\n\t\t\t\t// then the expression probably doesn't have a `)`\r\n\t\t\t\tgobbleGroup = function() {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tvar node = gobbleExpression();\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tif(exprICode(index) === CPAREN_CODE) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\treturn node;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrowError('Unclosed (', index);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Responsible for parsing Array literals `[1, 2, 3]`\r\n\t\t\t\t// This function assumes that it needs to gobble the opening bracket\r\n\t\t\t\t// and then tries to gobble the expressions as arguments.\r\n\t\t\t\tgobbleArray = function() {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: ARRAY_EXP,\r\n\t\t\t\t\t\telements: gobbleArguments(CBRACK_CODE)\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\tnodes = [], ch_i, node;\r\n\r\n\t\t\twhile(index < length) {\r\n\t\t\t\tch_i = exprICode(index);\r\n\r\n\t\t\t\t// Expressions can be separated by semicolons, commas, or just inferred without any\r\n\t\t\t\t// separators\r\n\t\t\t\tif(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\r\n\t\t\t\t\tindex++; // ignore separators\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Try to gobble each expression individually\r\n\t\t\t\t\tif((node = gobbleExpression())) {\r\n\t\t\t\t\t\tnodes.push(node);\r\n\t\t\t\t\t// If we weren't able to find a binary expression and are out of room, then\r\n\t\t\t\t\t// the expression passed in probably has too much\r\n\t\t\t\t\t} else if(index < length) {\r\n\t\t\t\t\t\tthrowError('Unexpected \"' + exprI(index) + '\"', index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If there's only one expression just try returning the expression\r\n\t\t\tif(nodes.length === 1) {\r\n\t\t\t\treturn nodes[0];\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: COMPOUND,\r\n\t\t\t\t\tbody: nodes\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t// To be filled in by the template\r\n\tjsep.version = '0.3.3';\r\n\tjsep.toString = function() { return 'JavaScript Expression Parser (JSEP) v' + jsep.version; };\r\n\r\n\t/**\r\n\t * @method jsep.addUnaryOp\r\n\t * @param {string} op_name The name of the unary op to add\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addUnaryOp = function(op_name) {\r\n\t\tmax_unop_len = Math.max(op_name.length, max_unop_len);\r\n\t\tunary_ops[op_name] = t; return this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.addBinaryOp\r\n\t * @param {string} op_name The name of the binary op to add\r\n\t * @param {number} precedence The precedence of the binary op (can be a float)\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addBinaryOp = function(op_name, precedence) {\r\n\t\tmax_binop_len = Math.max(op_name.length, max_binop_len);\r\n\t\tbinary_ops[op_name] = precedence;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.addLiteral\r\n\t * @param {string} literal_name The name of the literal to add\r\n\t * @param {*} literal_value The value of the literal\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addLiteral = function(literal_name, literal_value) {\r\n\t\tliterals[literal_name] = literal_value;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeUnaryOp\r\n\t * @param {string} op_name The name of the unary op to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeUnaryOp = function(op_name) {\r\n\t\tdelete unary_ops[op_name];\r\n\t\tif(op_name.length === max_unop_len) {\r\n\t\t\tmax_unop_len = getMaxKeyLen(unary_ops);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllUnaryOps\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllUnaryOps = function() {\r\n\t\tunary_ops = {};\r\n\t\tmax_unop_len = 0;\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeBinaryOp\r\n\t * @param {string} op_name The name of the binary op to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeBinaryOp = function(op_name) {\r\n\t\tdelete binary_ops[op_name];\r\n\t\tif(op_name.length === max_binop_len) {\r\n\t\t\tmax_binop_len = getMaxKeyLen(binary_ops);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllBinaryOps\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllBinaryOps = function() {\r\n\t\tbinary_ops = {};\r\n\t\tmax_binop_len = 0;\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeLiteral\r\n\t * @param {string} literal_name The name of the literal to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeLiteral = function(literal_name) {\r\n\t\tdelete literals[literal_name];\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllLiterals\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllLiterals = function() {\r\n\t\tliterals = {};\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t// In desktop environments, have a way to restore the old value for `jsep`\r\n\tif (typeof exports === 'undefined') {\r\n\t\tvar old_jsep = root.jsep;\r\n\t\t// The star of the show! It's a function!\r\n\t\troot.jsep = jsep;\r\n\t\t// And a courteous function willing to move out of the way for other similarly-named objects!\r\n\t\tjsep.noConflict = function() {\r\n\t\t\tif(root.jsep === jsep) {\r\n\t\t\t\troot.jsep = old_jsep;\r\n\t\t\t}\r\n\t\t\treturn jsep;\r\n\t\t};\r\n\t} else {\r\n\t\t// In Node.JS environments\r\n\t\tif (typeof module !== 'undefined' && module.exports) {\r\n\t\t\texports = module.exports = jsep;\r\n\t\t} else {\r\n\t\t\texports.parse = jsep;\r\n\t\t}\r\n\t}\r\n}(this));\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/jsep/build/jsep.js\n// module id = 87\n// module chunks = 0","import * as R from '../../core/renderer';\n\nlet integrator = null;\nexport default function getCartoMapIntegrator(map) {\n    if (!integrator) {\n        integrator = new CartoMapIntegrator(map);\n    }\n    return integrator;\n}\n\nclass CartoMapIntegrator {\n    constructor(map) {\n        this.map = map;\n        this.renderer = new R.Renderer();\n        this.renderer._initGL(this.map._gl);\n        this.invalidateWebGLState = () => {};\n    }\n\n    addLayer(layerId, layer) {\n        this.map.addLayer(layerId, layer);\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/integrator/carto.js\n// module id = 88\n// module chunks = 0","import * as R from '../../core/renderer';\nimport * as util from '../util';\n\nlet uid = 0;\n\n// TODO This needs to be separated by each mgl map to support multi map pages\nlet integrator = null;\nexport default function getMGLIntegrator(map) {\n    if (!integrator) {\n        integrator = new MGLIntegrator(map);\n    }\n    return integrator;\n}\n\n\n/**\n * Responsabilities, keep all MGL integration state and functionality that lies outside Layer\n */\nclass MGLIntegrator {\n    constructor(map) {\n        this.renderer = new R.Renderer();\n        this.map = map;\n        this.invalidateWebGLState = null;\n\n        map.on('movestart', this.move.bind(this));\n        map.on('move', this.move.bind(this));\n        map.on('moveend', this.move.bind(this));\n        map.on('resize', this.move.bind(this));\n\n        this.moveObservers = {};\n\n        this._layers = [];\n    }\n    _registerMoveObserver(observerName, observerCallback) {\n        this.moveObservers[observerName] = observerCallback;\n    }\n    _unregisterMoveObserver(observerName) {\n        delete this.moveObservers[observerName];\n    }\n    addLayer(layer, beforeLayerID) {\n        const callbackID = `_cartoGL_${uid++}`;\n        const layerId = layer.getId();\n        this._registerMoveObserver(callbackID, layer.requestData.bind(layer));\n        this.map.repaint = true; // FIXME: add logic to manage repaint flag\n        this.map.setCustomWebGLDrawCallback(layerId, (gl, invalidate) => {\n            if (!this.invalidateWebGLState) {\n                this.invalidateWebGLState = invalidate;\n                this.notifyObservers();\n                this.renderer._initGL(gl);\n                this._layers.map(layer => layer.initCallback());\n            }\n            layer.paintCallback();\n            invalidate();\n        });\n        this.map.addLayer({\n            id: layerId,\n            type: 'custom-webgl'\n        }, beforeLayerID);\n        this._layers.push(layer);\n        this.move();\n    }\n    needRefresh() {\n        this.map.repaint = true; // FIXME: add logic to manage repaint flag\n    }\n    move() {\n        var c = this.map.getCenter();\n        // TODO create getCenter method\n        this.renderer.setCenter(c.lng / 180., util.projectToWebMercator(c).y / util.WM_R);\n        this.renderer.setZoom(this.getZoom());\n        this.notifyObservers();\n    }\n    notifyObservers() {\n        Object.keys(this.moveObservers).map(id => this.moveObservers[id]());\n    }\n    getZoom() {\n        var b = this.map.getBounds();\n        var c = this.map.getCenter();\n        var nw = b.getNorthWest();\n        var sw = b.getSouthWest();\n        var z = (util.projectToWebMercator(nw).y - util.projectToWebMercator(sw).y) / util.WM_2R;\n        this.renderer.setCenter(c.lng / 180., util.projectToWebMercator(c).y / util.WM_R);\n        return z;\n    }\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/api/integrator/mapbox-gl.js\n// module id = 89\n// module chunks = 0"],"sourceRoot":""}